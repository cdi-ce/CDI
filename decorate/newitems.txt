//==========
// New Items
//==========

ACTOR HasRune : Inventory{Inventory.MaxAmount 1}

Actor ModdedGreenArmorPickup : CustomInventory replaces GreenArmorSpawner
{  
Inventory.Pickupmessage "\c[M4]Security Armor"
Inventory.PickupSound "pickups/greenarmor"
+INVENTORY.UNDROPPABLE
Inventory.Amount 1
Inventory.MaxAmount 0
Scale 0.8
States
{
  Spawn:
    ARM1 AAAAAA 1 A_SpawnItemEx("GreenPowerLineSpawner",0,0,0,0,0,0,0,128)
    ARM1 BBBBBBBBBBBB 1 Bright A_SpawnItemEx("GreenPowerLineSpawner",0,0,0,0,0,0,0,128)
    Loop
  Pickup:
  	NULL A 1
	NULL A 1 A_JumpIf(CallACS("Armor Pickup Conditions",1) == 555,"Remove")
	NULL A 1 A_JumpIf(CallACS("Armor Pickup Conditions",1) == FALSE,"Nope")
    NULL A 1 A_GiveInventory("ModdedGreenArmor")
	Stop
  Nope:
	ARM1 A 1
	Stop
  Remove:
	ARM1 A 1 A_SpawnItemEx("ArmorPickupNothing",0,0,0,0,0,0,0)
	Stop
}
}

Actor ModdedBlueArmorPickup : CustomInventory replaces BlueArmorSpawner
{  
Inventory.Pickupmessage "\c[M5]Combat Armor"
Inventory.PickupSound "pickups/bluearmor"
+INVENTORY.UNDROPPABLE
Inventory.Amount 1
Inventory.MaxAmount 0
Scale 0.8
States
{
  Spawn:
    ARM2 AAAAAA 1 A_SpawnItemEx("BluePowerLineSpawner",0,0,0,0,0,0,0,128)
    ARM2 BBBBBBBBBBBB 1 Bright A_SpawnItemEx("BluePowerLineSpawner",0,0,0,0,0,0,0,128)
    Loop
  Pickup:
  	NULL A 1
	NULL A 1 A_JumpIf(CallACS("Armor Pickup Conditions",2) == 555,"Remove")
	NULL A 1 A_JumpIf(CallACS("Armor Pickup Conditions",2) == FALSE,"Nope")
    NULL A 1 A_GiveInventory("ModdedBlueArmor")
	Stop
  Nope:
	ARM2 A 1
	Stop
  Remove:
	ARM1 A 1 A_SpawnItemEx("ArmorPickupNothing",0,0,0,0,0,0,0)
	Stop
}
}

Actor RedArmorPickup : CustomInventory replaces RedArmor
{  
Inventory.Pickupmessage "\c[I7]Demonic Armor"
Inventory.PickupSound "pickups/redarmor"
+INVENTORY.UNDROPPABLE
Inventory.Amount 1
Inventory.MaxAmount 0
Scale 0.8
States
{
  Spawn:
    ARM3 AAAAAA 1 A_SpawnItemEx("RedPowerLineSpawner",0,0,0,0,0,0,0,128)
    ARM3 BBBBBBBBBBBB 1 Bright A_SpawnItemEx("RedPowerLineSpawner",0,0,0,0,0,0,0,128)
    Loop
  Pickup:
  	NULL A 1
	NULL A 1 A_JumpIf(CallACS("Armor Pickup Conditions",3) == 555,"Remove")
	NULL A 1 A_JumpIf(CallACS("Armor Pickup Conditions",3) == FALSE,"Nope")
    NULL A 1 A_GiveInventory("RedArmor")
	Stop
  Nope:
	ARM3 A 1
	Stop
  Remove:
	ARM1 A 1 A_SpawnItemEx("ArmorPickupNothing",0,0,0,0,0,0,0)
	Stop
}
}

Actor LegendaryArmorPickup : CustomInventory replaces LegendaryArmor
{  
Inventory.Pickupmessage "\c[z3]Legendary Armor"
Inventory.PickupSound "legendaryarmor/pickup"
+INVENTORY.UNDROPPABLE
Inventory.Amount 1
Inventory.MaxAmount 0
Scale 1.2
States
{
  Spawn:
	TNT1 A 0 A_SpawnItemEx("ArmorParticleBlue",random(-12,12),random(-12,12),random(-12,12),random(-2,2),random(-2,2),random(-2,2),random(-20,20))
	LEGA AAAAA 2 Bright A_SpawnItemEx("LegArmorSpark",random(-12,12),random(-12,12),random(2,16),frandom(-0.4,0.4),frandom(-0.4,0.4),frandom(0,2),0,0,64)
	TNT1 A 0 A_SpawnItemEx("ArmorParticleBlue",random(-12,12),random(-12,12),random(-12,12),random(-2,2),random(-2,2),random(-2,2),random(-20,20))
	LEGA BBBBB 2 Bright A_SpawnItemEx("LegArmorSpark",random(-12,12),random(-12,12),random(2,16),frandom(-0.4,0.4),frandom(-0.4,0.4),frandom(0,2),0,0,64) 
	Loop
  Pickup:
  	NULL A 1
	NULL A 1 A_JumpIf(CallACS("Armor Pickup Conditions",4) == FALSE,"Nope")
    NULL A 1 A_GiveInventory("LegendaryArmor")
	Stop
  Nope:
	LEGA A 1
	Stop
}
}

Actor LegendaryArmorFromSphere : LegendaryArmorPickup
{  
States
{
  Pickup:
  	NULL A 1
	NULL A 1 A_JumpIf(CallACS("Armor Pickup Conditions",5) == FALSE,"Nope")
    NULL A 1 A_GiveInventory("LegendaryArmor")
	Stop
}
}

ACTOR HealthFlask2 : HealthFlask replaces HealthFlask{Inventory.MaxAmount 50 Health 10 Tag "Health Flask"}
ACTOR Stimkit2 : Stimkit replaces Stimkit{Inventory.MaxAmount 30 Health 25 Tag "Stimkit"}
ACTOR PortableMedkit2 : PortableMedkit replaces PortableMedkit{Inventory.MaxAmount 10 Health 50 Tag "Portable Medkit"}

ACTOR ArmorScavengerGiver : ArmorBonus{Armor.SaveAmount 1 Armor.MaxSaveAmount 350}

ACTOR ArmorCharge2 : ArmorCharge replaces ArmorCharge
{
Inventory.MaxAmount 50 
Tag "Armor Charge" 
Inventory.PickupMessage "Armor Charge"
States
{
  Use:
	TNT1 A 0 A_JumpIfInventory("BasicArmor",300,"Full")
	TNT1 A 0 A_GiveInventory("ArmorChargeGiver2",1)
	Stop
} 
}
ACTOR ArmorChargeGiver2 : ArmorBonus{Armor.SaveAmount 10 Armor.MaxSaveAmount 350}

ACTOR ArmorBooster2 : ArmorBooster replaces ArmorBooster
{
Inventory.MaxAmount 30 
Tag "Armor Booster"
States
{
  Use:
	TNT1 A 0 A_JumpIfInventory("BasicArmor",300,"Full")
	TNT1 A 0 A_GiveInventory("ArmorBoostGiver2",1)
	Stop
} 
}
ACTOR ArmorBoostGiver2 : ArmorBonus{Armor.SaveAmount 25 Armor.MaxSaveAmount 350}

ACTOR ArmorPlate2 : ArmorPlate replaces ArmorPlate
{
Inventory.MaxAmount 10 
Tag "Armor Plate"
States
{
  Use:
	TNT1 A 0 A_JumpIfInventory("BasicArmor",300,"Full")
	TNT1 A 0 A_GiveInventory("ArmorPlateGiver2",1)
	Stop
} 
}
ACTOR ArmorPlateGiver2 : ArmorBonus{Armor.SaveAmount 50 Armor.MaxSaveAmount 350}

ACTOR NewExtraArmor : ExtraArmor replaces ExtraArmor
{
States
{
  Pickup:
	TNT1 A 0 A_GiveInventory("NewExtraArmorGiver",1)
	Stop
} 
}

ACTOR NewExtraArmorGiver : ArmorBonus
{
Armor.SaveAmount 250
Armor.MaxSaveAmount 1000
-INVENTORY.ALWAYSPICKUP
}

Actor ReinforcementCard : CustomInventory
{
  +Inventory.ALWAYSPICKUP
  +Inventory.AUTOACTIVATE
  Inventory.PickupSound "bonus/card"
  Inventory.PickupMessage "\c[L5]Reinforcement Card"
  Tag "Reinforcement Card"
  Radius 20
  Height 32
  +INVBAR
  +AMBUSH
  +LOOKALLAROUND
  +NOBLOCKMONST
  +NOTELEPORT
  +NOFEAR
  -SHOOTABLE
  Scale 0.6
  var int user_delay;
  Speed 5
  States
  {
  Spawn:
    SAMO A 0 A_JumpIf(user_delay >= 8,"Follow")
	SAMO A 0 A_SetUserVar("user_delay",user_delay+1)
    SAMO AAABBBCCCDDDCCCBBB 1 Bright A_SpawnItemEx("BluePowerLine",random(10,-10),random(10,-10),0,0,0,2,0,128,0)
    Loop
  Follow:
    SAMO A 0 A_ChangeFlag("FLOAT",1)
	SAMO A 0 A_ChangeFlag("FLOATBOB",1)
	SAMO A 0 A_ChangeFlag("NOGRAVITY",1)
	SAMO A 0 A_Look
	SAMO A 1 Bright A_SpawnItemEx("BluePowerLine",random(10,-10),random(10,-10),0,0,0,2,0,128,0)
	SAMO B 0 A_Look
	SAMO B 1 Bright A_SpawnItemEx("BluePowerLine",random(10,-10),random(10,-10),0,0,0,2,0,128,0)
	SAMO C 0 A_Look
	SAMO C 1 Bright A_SpawnItemEx("BluePowerLine",random(10,-10),random(10,-10),0,0,0,2,0,128,0)
	SAMO D 0 A_Look
	SAMO D 1 Bright A_SpawnItemEx("BluePowerLine",random(10,-10),random(10,-10),0,0,0,2,0,128,0)
	Loop
  See:
  	SAMO A 0 A_JumpIfTargetInlos(3)
	SAMO A 0 A_ClearTarget
	SAMO A 1 Bright A_SpawnItemEx("BluePowerLine",random(10,-10),random(10,-10),0,0,0,2,0,128,0)
	Goto Follow
	SAMO A 0 A_Chase
	SAMO A 1 Bright A_SpawnItemEx("BluePowerLine",random(10,-10),random(10,-10),0,0,0,2,0,128,0)
	SAMO B 0 A_Chase
	SAMO B 1 Bright A_SpawnItemEx("BluePowerLine",random(10,-10),random(10,-10),0,0,0,2,0,128,0)
	SAMO C 0 A_Chase
	SAMO C 1 Bright A_SpawnItemEx("BluePowerLine",random(10,-10),random(10,-10),0,0,0,2,0,128,0)
	SAMO D 0 A_Chase
	SAMO D 1 Bright A_SpawnItemEx("BluePowerLine",random(10,-10),random(10,-10),0,0,0,2,0,128,0)
	Loop
  Pickup:
    NULL A 0 ACS_ExecuteAlways(2998,0,0,0,0)
	Stop
  }
}

ACTOR WeaponUpgrader : CustomInventory
{
Inventory.MaxAmount 20
Inventory.Icon "ITM3V0"
Inventory.PickupMessage "\c[X5]Weapon Upgrader"
Inventory.PickupSound "WeaponUpgrader/Pickup"
//Inventory.UseSound "WeaponUpgrader/Use"
Tag "Weapon Upgrader"
+INVBAR
+BRIGHT
States
{
  Spawn:
	WPUP A 1 A_SpawnItemEx("GreenPowerLine",random(10,-10),random(10,-10),0,0,0,2,0,128,0)
	WPUP A 1 A_SpawnItemEx("BluePowerLine",random(10,-10),random(10,-10),0,0,0,2,0,128,0)
    Loop
  Use:
    TNT1 A 0
	TNT1 A 1 ACS_NamedExecuteAlways("Weapon Upgrader",0,0,0,0)
	Fail
}
}

Actor WeaponUpgraderCombatShotgun : Inventory{Inventory.MaxAmount 1}
Actor WeaponUpgraderAssaultShotgun : Inventory{Inventory.MaxAmount 1}
Actor WeaponUpgraderExplosiveMinigun : Inventory{Inventory.MaxAmount 1}
Actor WeaponUpgraderRapidShotgun : Inventory{Inventory.MaxAmount 1}
Actor WeaponUpgraderRocketLauncher : Inventory{Inventory.MaxAmount 1}
Actor WeaponUpgraderGrenadeLauncher : Inventory{Inventory.MaxAmount 1}
Actor WeaponUpgraderRailgun : Inventory{Inventory.MaxAmount 1}
Actor WeaponUpgraderBehemothCannon : Inventory{Inventory.MaxAmount 1}
Actor WeaponUpgraderBFG9500 : Inventory{Inventory.MaxAmount 1}
Actor WeaponUpgraderBFG10K : Inventory{Inventory.MaxAmount 1}
Actor WeaponUpgraderHellStormBFG : Inventory{Inventory.MaxAmount 1}
Actor WeaponUpgraderD-BFG : Inventory{Inventory.MaxAmount 1}
Actor WeaponUpgraderProto-D-BFG : Inventory{Inventory.MaxAmount 1}
Actor WeaponUpgraderEradicatorBFG : Inventory{Inventory.MaxAmount 1}
Actor WeaponUpgraderBFG12000 : Inventory{Inventory.MaxAmount 1}
Actor WeaponUpgraderQuadBarrelShotgun : Inventory{Inventory.MaxAmount 1}
Actor WeaponUpgraderHexa-Shotgun : Inventory{Inventory.MaxAmount 1}
Actor WeaponUpgraderPlasmaRepeater : Inventory{Inventory.MaxAmount 1}
Actor WeaponUpgraderMineLauncher : Inventory{Inventory.MaxAmount 1}
Actor WeaponUpgraderLightningRifle : Inventory{Inventory.MaxAmount 1}
Actor WeaponUpgraderDemonTechBFG10K : Inventory{Inventory.MaxAmount 1}
Actor WeaponUpgraderDemonTechRifle : Inventory{Inventory.MaxAmount 1}
Actor WeaponUpgraderDemonTechRailgun : Inventory{Inventory.MaxAmount 1}
Actor WeaponUpgraderDoubleBarrelShotgun : Inventory{Inventory.MaxAmount 1}
Actor WeaponUpgraderAssaultRifle : Inventory{Inventory.MaxAmount 1}
Actor WeaponUpgraderMinigun : Inventory{Inventory.MaxAmount 1}
Actor WeaponUpgraderEFG9000 : Inventory{Inventory.MaxAmount 1}
Actor WeaponUpgraderDoubleGrenadeLauncher : Inventory{Inventory.MaxAmount 1}
Actor WeaponUpgraderHomingRocketLauncher : Inventory{Inventory.MaxAmount 1}
Actor WeaponUpgraderM79GrenadeLauncher : Inventory{Inventory.MaxAmount 1}
Actor WeaponUpgraderExplosiveRailgun : Inventory{Inventory.MaxAmount 1}
Actor WeaponUpgraderDemonTechBallista : Inventory{Inventory.MaxAmount 1}
Actor WeaponUpgraderPlasmaCaster : Inventory{Inventory.MaxAmount 1}
Actor WeaponUpgraderPlasmaRifle : Inventory{Inventory.MaxAmount 1}
Actor WeaponUpgraderQuadRocketLauncher : Inventory{Inventory.MaxAmount 1}
Actor WeaponUpgraderDemonTechRocketLauncher : Inventory{Inventory.MaxAmount 1}

ACTOR MedPack : CustomInventory
{
Inventory.MaxAmount 1
Inventory.Icon "I_MBPK"
Inventory.PickupMessage "\c[M6]Medical Backpack"
Inventory.PickupSound "pickups/pmedkit"
Inventory.UseSound "pmed/use"
+INVBAR
States
{
  Spawn:
	MBPK A -1
    Stop
  Use:
    TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(3100,0,0,0) == 1 ,"Nope")
	TNT1 A 1 A_GiveInventory("MedPackHealing",1)
	Stop
  Nope:
	 TNT1 A 0 A_Print("Can't use this inventory now!")
	 Fail
}
}

Actor MedPackHealing : PowerupGiver
{
    Powerup.Type MedPackHeal
    +AUTOACTIVATE
    +ALWAYSPICKUP
}

Actor PowerMedPackHeal : PowerTargeter
{
    Powerup.Duration -20
    States
    {
    Targeter:
        TNT1 AA 0
		TNT1 A 0 HealThing(2,150)
		TNT1 AAAAAA 3 A_SpawnItemEx("HealingEffect",random(24,-24),random(24,-24),random(0,32),0,0,random(1,4),0,128,0)
        Loop
    }
}

ACTOR SoulGenerator : CustomInventory
{
Inventory.MaxAmount 1
Inventory.Icon "ITM3U0" //"ITM2E0"
Inventory.PickupSound "soulgenerator/pickup"
Inventory.PickupMessage "\c[n5]Life Sphere Dispenser"
Tag "Life Sphere Dispenser"
Scale 0.75
+INVBAR
States
{
  Spawn:
	BSOU E -1
    Stop
  Use:
    TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(3100,0,0,0) == 1 ,"Nope")
    TNT1 A 1 A_JumpIfInventory("HasSpreadRune",1,2)
	TNT1 A 1 A_SpawnItemEx("SoulDispenser",0,0,16,8,0,4,0)
	Stop
	TNT1 A 1 A_SpawnItemEx("SoulDispenser",0,0,16,8,0,4,0)
	TNT1 A 1 A_SpawnItemEx("SoulDispenser",0,0,16,8,-4,4,0)
 	TNT1 A 1 A_SpawnItemEx("SoulDispenser",0,0,16,8,4,4,0)
	Stop
  Nope:
	TNT1 A 0 A_Print("Can't use this inventory now!")
	Fail
}
}

ACTOR SoulDispenser
{
+USESPECIAL
Activation THINGSPEC_ThingActs
var int user_amount;
var int user_script;
var int user_ready;
var int user_limit;
States
{
  Spawn:
    BSOU A 0
	BSOU A 0 A_ChangeFlag("USESPECIAL",1)
	BSOU A 0 A_SetUserVar("user_limit",5)
	BSOU A 0 A_JumpIf(user_amount >= user_limit,"Death")
    BSOU A 0 A_SetUserVar("user_ready",0)
	BSOU A 0 A_JumpIf(user_script == 1,3)
	BSOU A 0 Thing_SetSpecial(0,226,2997,0,0)
	BSOU A 0 A_SetUserVar("user_script",1)
    BSOU BBBCCCDDD 1 Bright A_SpawnItemEx("BluePowerLine",random(10,-10),random(10,-10),0,0,0,2,0,128,0)
    Loop
  Reloading:
    BSOU E 0 A_ChangeFlag("USESPECIAL",0)
    BSOU E 0 A_SetUserVar("user_amount",user_amount+1)
	BSOU E 0 A_SetUserVar("user_ready",1)
    BSOU E 1 A_SpawnItemEx("LifeSphere2",0,0,0,random(2,7),0,random(2,5),random(0,359),32)
    BSOU EEEEE 35
	Goto Spawn
  Death:
	TNT1 A 0
	TNT1 A 0 A_SpawnItemEx("OrangeParticleSpawner", 0, 0, 0, 0, 0, 0, 0, 128)
    TNT1 AAA 0 A_CustomMissile("Kaboom3", 0, 0, random(0,360), 2, random(0,360))
	TNT1 AAA 0 A_CustomMissile("SmokeFX2", 0, 0, random(0,360), 2, random(0,360))
    TNT1 AAAA 0 A_SpawnItemEx("Debris",0,0,0,Random(4,-4),Random(4,-4),Random(4,8),0,128)
    TNT1 A 0 A_PlaySound("weapons/rocklx")
    TNT1 A 1 A_SpawnItem("RocketEx")
    Stop
}
}

ACTOR ArmorGenerator : CustomInventory
{
Inventory.MaxAmount 1
Inventory.Icon "ITM2V0"
Inventory.PickupSound "soulgenerator/pickup"
Inventory.PickupMessage "\c[m5]Combat Armor Dispenser"
Tag "Combat Armor Dispenser"
Scale 0.75
+INVBAR
States
{
  Spawn:
	BARM B -1
    Stop
  Use:
    TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(3100,0,0,0) == 1 ,"Nope")
    TNT1 A 1 A_JumpIfInventory("HasSpreadRune",1,2)
	TNT1 A 1 A_SpawnItemEx("ArmorDispenser",0,0,16,8,0,4,0)
	Stop
	TNT1 A 1 A_SpawnItemEx("ArmorDispenser",0,0,16,8,0,4,0)
	TNT1 A 1 A_SpawnItemEx("ArmorDispenser",0,0,16,8,-4,4,0)
 	TNT1 A 1 A_SpawnItemEx("ArmorDispenser",0,0,16,8,4,4,0)
	Stop
  Nope:
	TNT1 A 0 A_Print("Can't use this inventory now!")
	Fail
}
}

ACTOR ArmorDispenser
{
+USESPECIAL
Activation THINGSPEC_ThingActs
var int user_amount;
var int user_script;
var int user_ready;
var int user_limit;
States
{
  Spawn:
    BARM A 0
	BARM A 0 A_ChangeFlag("USESPECIAL",1)
	BARM A 0 A_SetUserVar("user_limit",5)
	BARM A 0 A_JumpIf(user_amount >= user_limit,"Death")
    BARM A 0 A_SetUserVar("user_ready",0)
	BARM A 0 A_JumpIf(user_script == 1,3)
	BARM A 0 Thing_SetSpecial(0,226,2997,0,0)
	BARM A 0 A_SetUserVar("user_script",1)
    BARM AAAAAAAAAAAA 1 Bright A_SpawnItemEx("BluePowerLine",random(10,-10),random(10,-10),0,0,0,2,0,128,0)
    Loop
  Reloading:
    BARM B 0 A_ChangeFlag("USESPECIAL",0)
    BARM B 0 A_SetUserVar("user_amount",user_amount+1)
	BARM B 0 A_SetUserVar("user_ready",1)
    BARM B 1 A_SpawnItemEx("ModdedBlueArmorPickup",0,0,0,random(2,7),0,random(2,5),random(0,359),32)
    BARM BBBBB 35
	Goto Spawn
  Death:
	TNT1 A 0
	TNT1 A 0 A_SpawnItemEx("OrangeParticleSpawner", 0, 0, 0, 0, 0, 0, 0, 128)
    TNT1 AAA 0 A_CustomMissile("Kaboom3", 0, 0, random(0,360), 2, random(0,360))
	TNT1 AAA 0 A_CustomMissile("SmokeFX2", 0, 0, random(0,360), 2, random(0,360))
    TNT1 AAAA 0 A_SpawnItemEx("Debris",0,0,0,Random(4,-4),Random(4,-4),Random(4,8),0,128)
    TNT1 A 0 A_PlaySound("weapons/rocklx")
    TNT1 A 1 A_SpawnItem("RocketEx")
    Stop
}
}

ACTOR HealthDispenser
{
+USESPECIAL
Activation THINGSPEC_ThingActs
var int user_amount;
var int user_script;
var int user_ready;
var int user_limit;
var int user_timer;
States
{
  Spawn:
    BARM F 0
	BARM F 0 A_ChangeFlag("USESPECIAL",1)
	BARM F 0 A_SetUserVar("user_limit",20)
	BARM F 0 A_JumpIf(user_amount >= user_limit,"Death")
	BARM F 0 A_JumpIf(user_timer >= 1080,"Death")
    BARM F 0 A_SetUserVar("user_ready",0)
	BARM F 0 A_JumpIf(user_script == 1,3)
	BARM F 0 Thing_SetSpecial(0,226,2997,0,0)
	BARM F 0 A_SetUserVar("user_script",1)
	BARM F 0 A_SetUserVar("user_timer",user_timer+1)
    BARM FFFFFFFFFFFF 1 Bright A_SpawnItemEx("RedPowerLine",random(10,-10),random(10,-10),0,0,0,2,0,128,0)
    Loop
  Reloading:
    BARM D 0 A_ChangeFlag("USESPECIAL",0)
    BARM D 0 A_SetUserVar("user_amount",user_amount+1)
	BARM D 0 A_SetUserVar("user_ready",1)
    BARM DDDDDD 1 A_SpawnItemEx("HealthDispenserItems",0,0,0,random(2,7),0,random(2,5),random(0,359),32)
    BARM DDD 35
	Goto Spawn
  Death:
	TNT1 A 0
	TNT1 A 0 A_SpawnItemEx("OrangeParticleSpawner", 0, 0, 0, 0, 0, 0, 0, 128)
    TNT1 AAA 0 A_CustomMissile("Kaboom3", 0, 0, random(0,360), 2, random(0,360))
	TNT1 AAA 0 A_CustomMissile("SmokeFX2", 0, 0, random(0,360), 2, random(0,360))
    TNT1 AAAA 0 A_SpawnItemEx("Debris",0,0,0,Random(4,-4),Random(4,-4),Random(4,8),0,128)
    TNT1 A 0 A_PlaySound("weapons/rocklx")
    TNT1 A 1 A_SpawnItem("RocketEx")
    Stop
}
}

ACTOR HealthDispenserItems : RandomSpawner
{
DropItem "NewStimpackTimed", 256, 60
DropItem "StimkitTimed", 256, 30
DropItem "NewMedikitTimed", 256, 10
}

ACTOR NewStimpackTimed : Stimpack
{
Scale 0.65
Inventory.PickupMessage "Stimpack"
Inventory.PickupSound "pickups/health"
States
{
   Spawn:
	STIM A 175
	STIM AAAAAAAAAA 1 A_FadeOut(0.1)
	Stop
	}
}

ACTOR StimkitTimed : NewStimpackTimed
{
Health 15
Scale 0.75
Inventory.PickupMessage "Stimkit"
Inventory.PickupSound "pickups/pstimpack"
States
{
   Spawn:
	PME2 A 175
	PME2 AAAAAAAAAA 1 A_FadeOut(0.1)
	Stop
	}
}

ACTOR NewMedikitTimed : Medikit
{
Scale 0.65
Inventory.PickupMessage "Medkit"
Inventory.PickupSound "pickups/largehealth"
States
{
   Spawn:
	MEDI A 175
	MEDI AAAAAAAAAA 1 A_FadeOut(0.1)
	Stop
	}
}

ACTOR ArmorShardsDispenser
{
+USESPECIAL
Activation THINGSPEC_ThingActs
var int user_amount;
var int user_script;
var int user_ready;
var int user_limit;
var int user_timer;
States
{
  Spawn:
    BARM E 0
	BARM E 0 A_ChangeFlag("USESPECIAL",1)
	BARM E 0 A_SetUserVar("user_limit",20)
	BARM E 0 A_JumpIf(user_amount >= user_limit,"Death")
	BARM E 0 A_JumpIf(user_timer >= 1080,"Death")
    BARM E 0 A_SetUserVar("user_ready",0)
	BARM E 0 A_JumpIf(user_script == 1,3)
	BARM E 0 Thing_SetSpecial(0,226,2997,0,0)
	BARM E 0 A_SetUserVar("user_script",1)
	BARM E 0 A_SetUserVar("user_timer",user_timer+1)
    BARM EEEEEEEEEEEE 1 Bright A_SpawnItemEx("GreenPowerLine",random(10,-10),random(10,-10),0,0,0,2,0,128,0)
    Loop
  Reloading:
    BARM C 0 A_ChangeFlag("USESPECIAL",0)
    BARM C 0 A_SetUserVar("user_amount",user_amount+1)
	BARM C 0 A_SetUserVar("user_ready",1)
    BARM CCCCCCCCCCCCCCC 1 A_SpawnItemEx("ArmorShardsDispenserItems",0,0,0,random(2,7),0,random(2,5),random(0,359),32)
    BARM CCC 35
	Goto Spawn
  Death:
	TNT1 A 0
	TNT1 A 0 A_SpawnItemEx("OrangeParticleSpawner", 0, 0, 0, 0, 0, 0, 0, 128)
    TNT1 AAA 0 A_CustomMissile("Kaboom3", 0, 0, random(0,360), 2, random(0,360))
	TNT1 AAA 0 A_CustomMissile("SmokeFX2", 0, 0, random(0,360), 2, random(0,360))
    TNT1 AAAA 0 A_SpawnItemEx("Debris",0,0,0,Random(4,-4),Random(4,-4),Random(4,8),0,128)
    TNT1 A 0 A_PlaySound("weapons/rocklx")
    TNT1 A 1 A_SpawnItem("RocketEx")
    Stop
}
}

ACTOR ArmorShardsDispenserItems : RandomSpawner
{
DropItem "NewArmorBonusTimed", 256, 60
DropItem "ArmorBoosterTimed", 256, 30
DropItem "ArmorChargeTimed", 256, 10
DropItem "ModdedGreenArmorTimed", 256, 10
}

ACTOR NewArmorBonusTimed : NewArmorBonus
{
Armor.SaveAmount 2
Armor.SavePercent 40
Inventory.Pickupmessage "Armor Shard"
Inventory.PickupSound "pickups/armorbonus"
States
{
   Spawn:
	ARSD ABABABABABABABABABABABABABABAB 6
	ARSD AAAAAAAAAA 1 A_FadeOut(0.1)
	Loop
}
}

ACTOR ArmorChargeTimed : NewArmorBonusTimed
{
Scale 0.7
Armor.SaveAmount 5
Inventory.PickupSound "armorcharge/use"
Inventory.PickupMessage "Armor Charge"
States
{
   Spawn:
	ACRG ABABABABABABABABABABABABABABAB 6
	ARSD AAAAAAAAAA 1 A_FadeOut(0.1)
	Loop
    }
}

ACTOR ArmorBoosterTimed : NewArmorBonusTimed
{

Scale 0.8
Armor.SaveAmount 15
Inventory.PickupSound "armorboost/use"
Inventory.PickupMessage "Armor Booster"
States
{
   Spawn:
	ABST ABABABABABABABABABABABABABABAB 6
	ARSD AAAAAAAAAA 1 A_FadeOut(0.1)
	Stop
	}
}

ACTOR ModdedGreenArmorTimed : ModdedGreenArmorPickup
{
States
{
Spawn:
    ARM1 ABABABABABABABABABABABABABABAB 6 Bright
    ARM1 AAAAAAAAAA 1 A_FadeOut(0.1)
	Stop
    }
}

ACTOR AmmoDispenser
{
+USESPECIAL
Activation THINGSPEC_ThingActs
var int user_amount;
var int user_script;
var int user_ready;
var int user_limit;
var int user_timer;
States
{
  Spawn:
    BARM H 0
	BARM H 0 A_ChangeFlag("USESPECIAL",1)
	BARM H 0 A_SetUserVar("user_limit",20)
	BARM H 0 A_JumpIf(user_amount >= user_limit,"Death")
	BARM H 0 A_JumpIf(user_timer >= 1080,"Death")
    BARM H 0 A_SetUserVar("user_ready",0)
	BARM H 0 A_JumpIf(user_script == 1,3)
	BARM H 0 Thing_SetSpecial(0,226,2997,0,0)
	BARM H 0 A_SetUserVar("user_script",1)
	BARM H 0 A_SetUserVar("user_timer",user_timer+1)
    BARM HHHHHHHHHHHH 1 Bright A_SpawnItemEx("WhitePowerLine",random(10,-10),random(10,-10),0,0,0,2,0,128,0)
    Loop
  Reloading:
    BARM G 0 A_ChangeFlag("USESPECIAL",0)
    BARM G 0 A_SetUserVar("user_amount",user_amount+1)
	BARM G 0 A_SetUserVar("user_ready",1)
    BARM GGGGGGGGGGGG 1 A_SpawnItemEx("AmmoDispenserItems",0,0,0,random(2,7),0,random(2,5),random(0,359),32)
    BARM GGG 35
	Goto Spawn
  Death:
	TNT1 A 0
	TNT1 A 0 A_SpawnItemEx("OrangeParticleSpawner", 0, 0, 0, 0, 0, 0, 0, 128)
    TNT1 AAA 0 A_CustomMissile("Kaboom3", 0, 0, random(0,360), 2, random(0,360))
	TNT1 AAA 0 A_CustomMissile("SmokeFX2", 0, 0, random(0,360), 2, random(0,360))
    TNT1 AAAA 0 A_SpawnItemEx("Debris",0,0,0,Random(4,-4),Random(4,-4),Random(4,8),0,128)
    TNT1 A 0 A_PlaySound("weapons/rocklx")
    TNT1 A 1 A_SpawnItem("RocketEx")
    Stop
}
}

ACTOR AmmoDispenserItems : RandomSpawner
{
DropItem "BulletBoxTimed", 256, 60
DropItem "NewShellBoxTimed", 256, 30
DropItem "MissileBoxTimed", 256, 10
DropItem "NewCellPackTimed", 256, 10
DropItem "DemonAmmoTimed", 256, 10
DropItem "EradicationAmmoTimed", 256, 10
DropItem "EradicationCellPackTimed", 256, 5
DropItem "AmmoPackTimed", 256, 10
}

ACTOR BulletBoxTimed : BulletBox
{
Inventory.Amount 100
States
{
Spawn:
CLBX A 180
CLBX AAAAAAAAAA 1 A_FadeOut(0.1)
Stop
}
}

ACTOR NewShellBoxTimed : NewShellBox
{
Inventory.Amount 40
States
{
Spawn:
SBOX A 180
SBOX AAAAAAAAAA 1 A_FadeOut(0.1)
Stop
}
}

ACTOR MissileBoxTimed  : MissileBox
{
Inventory.Amount 20
States
{
Spawn:
BRO2 A 180
BRO2 AAAAAAAAAA 1 A_FadeOut(0.1)
Stop
}
}

ACTOR NewCellPackTimed : NewCellPack
{
Inventory.Amount 200
States
{
Spawn:
CE2P ABCDEFGGGFEDCB 3
CE2P ABCDEFGGGFEDCB 3
CE2P ABCDEFGGGFEDCB 3
CE2P ABCDEFGGGFEDCB 3
CE2P AAAAAAAAAA 1 A_FadeOut(0.1)
Stop
}
}

ACTOR DemonAmmoTimed : DemonAmmo
{
Inventory.Amount 100
States
{
Spawn:
DAMG A 180
DAMG AAAAAAAAAA 1 A_FadeOut(0.1)
Stop
}
}

ACTOR DemonAmmoBoxTimed : DemonAmmoBox
{
States
{
Spawn:
DAMO A 180
DAMO AAAAAAAAAA 1 A_FadeOut(0.1)
Stop
}
}

ACTOR HandGrenadeAmmoTimed : HandGrenadeAmmo
{
States
{
Spawn:
GRNP A 180
GRNP AAAAAAAAAA 1 A_FadeOut(0.1)
Stop
}
}

ACTOR MineAmmoTimed : MineAmmo
{
States
{
Spawn:
LMIN A 180
LMIN AAAAAAAAAA 1 A_FadeOut(0.1)
Stop
}
}

ACTOR EradicationCellPackTimed : EradicationCell
{
Inventory.Amount 100
States
{
Spawn:
EC3L C 180
EC3L CCCCCCCCCC 1 A_FadeOut(0.1)
Stop
}
}

Actor AmmoPackTimed : CustomInventory
{
  Scale 0.8
  +Inventory.AUTOACTIVATE
  Inventory.PickupSound "ammosatchel/use"
  Inventory.PickupMessage "Ammo Satchel"
  States
  {
  Spawn:
    ASAT A 180
	ASAT AAAAAAAAAA 1 A_FadeOut(0.1)
    Stop
  Pickup:
    NULL A 0
	NULL A 0 A_GiveInventory("AmmoPack  ",1)
	NULL A 0 A_GiveInventory("BulletMag",20)
	NULL A 0 A_GiveInventory("NewShell",8)
	NULL A 0 A_GiveInventory("Missile",4)
	NULL A 0 A_GiveInventory("NewCell",20)
	NULL A 0 A_GiveInventory("EradicationCell",5)
	NULL A 0 A_GiveInventory("DemonAmmo",20)
	NULL A 0 A_GiveInventory("HandGrenadeAmmo",2)
	NULL A 0 A_GiveInventory("MineAmmo",2)
	Stop
  }
}

Actor CrateGiver : CustomInventory
{
  +Inventory.ALWAYSPICKUP
  +Inventory.AUTOACTIVATE
  States
  {
  Pickup:
    NULL A 0
    NULL A 0 ACS_ExecuteAlways(3107,0,100,0,0)
	Stop
  }
}

Actor WeakCrateGiver : CrateGiver
{
  States
  {
  Pickup:
    NULL A 0
    NULL A 0 ACS_ExecuteAlways(3107,0,1,0,0)
	Stop
  }
}

Actor MediumCrateGiver : CrateGiver
{
  States
  {
  Pickup:
    NULL A 0
    NULL A 0 ACS_ExecuteAlways(3107,0,3,0,0)
	Stop
  }
}

Actor StrongCrateGiver : CrateGiver
{
  States
  {
  Pickup:
    NULL A 0
    NULL A 0 ACS_ExecuteAlways(3107,0,7,0,0)
	Stop
  }
}

Actor PowerCrateGiver : CrateGiver
{
  States
  {
  Pickup:
    NULL A 0
    NULL A 0 ACS_ExecuteAlways(3107,0,15,0,0)
	Stop
  }
}

Actor BossCrateGiver : CrateGiver
{
  States
  {
  Pickup:
    NULL A 0
    NULL A 0 ACS_ExecuteAlways(3107,0,25,0,0)
	Stop
  }
}

Actor BonusCrate : CustomInventory
{
  Inventory.MaxAmount 100
  Inventory.Icon "ITM2Z0"
  Inventory.PickupMessage "\cfBonus Crate"
  Inventory.PickupSound "crate/pickup"
  Tag "Bonus Crate"
  Radius 20
  Height 32
  +INVBAR
  +FLOATBOB
  +AMBUSH
  +LOOKALLAROUND
  +NOBLOCKMONST
  +NOTELEPORT
  +NOFEAR
  -SHOOTABLE
  Scale 0.3
  var int user_delay;
  Speed 5
  States
  {
  Spawn:
	UCRT A 0 A_JumpIf(user_delay >= 4,"Follow")
	UCRT A 0 A_SetUserVar("user_delay",user_delay+1)
    UCRT A 0 A_JumpIf(ACS_ExecuteWithResult(3705,0,0,0) == FALSE,"Nope")
	UCRT ABCDEFGHIJKLMABCDEFGHIJKLM 3 Bright
	Loop
  Follow:
    UCRT A 0 A_ChangeFlag("FLOAT",1)
	UCRT A 0 A_ChangeFlag("NOGRAVITY",1)
	UCRT A 0 A_JumpIf(ACS_ExecuteWithResult(3705,0,0,0) == FALSE,"Nope")
	UCRT ABCDEFGHIJ 3 Bright A_Look
	Loop
  Nope:
    UCRT A 1
	Stop
  See:
  	UCRT A 0 A_JumpIfTargetInlos(3)
	UCRT A 0 A_ClearTarget
	UCRT A 1 Bright
	Goto Follow
	UCRT ABCDEFGHIJABCDEFGHIJABCDEFGHIJ 1 Bright A_Chase
	Loop
  Use:
	TNT1 A 1 ACS_ExecuteAlways(3109,0,0,0,0)
	Stop
  }
}

Actor TrappedCrate : BonusCrate
{
  Inventory.MaxAmount 1
  -INVBAR
  +AUTOACTIVATE
  States
  {
  Use:
	TNT1 A 1 ACS_ExecuteAlways(3704,0,0,0,0)
	Stop
  }
}

ACTOR WTFCrateDrop : RandomSpawner
{
DropItem "BonusCrate", 256, 1
DropItem "TrappedCrate", 256, 1
}

ACTOR RoomDrop : RandomSpawner
{
DropItem "BonusCrate", 256, 6
DropItem "TrappedCrate", 256, 1
DropItem "ReinforcementCard", 256, 4
}

ACTOR UtilityUpgradeKit : CustomInventory
{
Inventory.MaxAmount 16
Inventory.Icon "ITM3Z1"
Inventory.PickupMessage "\c[A6]Utility Upgrade Kit"
Inventory.PickupSound "fullpack/pickup"
Inventory.UseSound "utilgun/up"
+INVBAR
States
{
  Spawn:
	MBPK A -1
    Stop
  Use:
	TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(3100,0,0,0) == 1 ,"Nope")
	TNT1 A 1 A_JumpIfInventory("UtilityGun",1,2)
	TNT1 A 1 A_Jump(256,"Nope")
	TNT1 A 1 ACS_NamedExecuteAlways("Utility Gun Pickup",0,1,0,0)
	Stop
  Nope:
	TNT1 A 0 A_Print("You don't have a Utility Gun!")
	Fail
}
}

ACTOR Beacon : CustomInventory
{
Inventory.MaxAmount 1
Inventory.Icon "ITM2A0"
Inventory.PickupMessage "\c[m4]Marine Beacon"
Tag "Marine Beacon"
Inventory.PickupSound "soulgenerator/pickup"
Scale 0.8
+INVBAR
States
{
  Spawn:
	BEAC A -1
    Stop
  Use:
    TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(3100,0,0,0) == 1 ,"Nope")
    //TNT1 A 1 A_JumpIfInventory("HasSpreadRune",1,2)
	TNT1 A 1 A_SpawnItemEx("MarineBeacon",0,0,16,8,0,4,0)
	Stop
	TNT1 A 1 A_SpawnItemEx("MarineBeacon",0,0,16,8,0,4,0)
	TNT1 A 1 A_SpawnItemEx("MarineBeacon",0,0,16,8,-4,4,0)
 	TNT1 A 1 A_SpawnItemEx("MarineBeacon",0,0,16,8,4,4,0)
	Stop
  Nope:
	TNT1 A 0 A_Print("Can't use this inventory now!")
	Fail
}
}

Actor MarineBeacon
{
Monster
Health 1000
Radius 6
Height 28
Mass 9999
+FLOORCLIP
+FRIENDLY
+NOTELEPORT
-COUNTKILL
-SHOOTABLE
-SOLID
States
{
  Spawn:
    BEAC A 10
	BEAC AAA 35 A_PlaySound("world/alarm1")
    BEAC AAAA 35 A_SpawnItemEx("MarineBeaconSpawners",random(-16,16),random(-16,16),0,0,0,0,0,32|SXF_SETMASTER)
    BEAC AAAA 35 A_SpawnItemEx("MarineBeaconSpawners",random(-16,16),random(-16,16),0,0,0,0,0,32|SXF_SETMASTER,85)
	BEAC A 105
	BEAC A 35 A_PlaySound("sentry/warn")
    Goto Death
  Death:
	TNT1 A 0
	//TNT1 A 0 A_SpawnItemEx("OrangeParticleSpawner", 0, 0, 0, 0, 0, 0, 0, 128)
    //TNT1 AAA 0 A_CustomMissile("Kaboom3", 0, 0, random(0,360), 2, random(0,360))
	//TNT1 AAA 0 A_CustomMissile("SmokeFX2", 0, 0, random(0,360), 2, random(0,360))
    //TNT1 AAAA 0 A_SpawnItemEx("Debris",0,0,0,Random(4,-4),Random(4,-4),Random(4,8),0,128)
    //TNT1 A 0 A_PlaySound("weapons/rocklx")
    TNT1 A 1 A_SpawnItemEx("TeleportFog",0,0,8)
    Stop
}
}

ACTOR MarineBeaconSpawners
{
Monster
Radius 1
Height 1
+FRIENDLY
-SHOOTABLE
-COUNTKILL
-SOLID
States
{
  Spawn:
    TNT1 A 0 
    TNT1 A 0 A_SpawnItemEx("TeleportFog")
	TNT1 A 0 A_Jump(256,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17)
    TNT1 A 5 A_SpawnItemEx("UACGuyAR",0,0,0,0,0,0,0,SXF_TRANSFERPOINTERS|32)
    Goto End
	TNT1 A 5 A_SpawnItemEx("UACGuyASG",0,0,0,0,0,0,0,SXF_TRANSFERPOINTERS|32)
	Goto End
	TNT1 A 5 A_SpawnItemEx("UACGuySSG",0,0,0,0,0,0,0,SXF_TRANSFERPOINTERS|32)
	Goto End
	TNT1 A 5 A_SpawnItemEx("UACGuyQSG",0,0,0,0,0,0,0,SXF_TRANSFERPOINTERS|32)
	Goto End
	TNT1 A 5 A_SpawnItemEx("UACGuyMinigun",0,0,0,0,0,0,0,SXF_TRANSFERPOINTERS|32)
	Goto End
	TNT1 A 5 A_SpawnItemEx("UACGuyChaingun",0,0,0,0,0,0,0,SXF_TRANSFERPOINTERS|32)
	Goto End
	TNT1 A 5 A_SpawnItemEx("UACGuyPlasma",0,0,0,0,0,0,0,SXF_TRANSFERPOINTERS|32)
	Goto End
	TNT1 A 5 A_SpawnItemEx("UACGuyRepeater",0,0,0,0,0,0,0,SXF_TRANSFERPOINTERS|32)
	Goto End
	TNT1 A 5 A_SpawnItemEx("UACGuyPlasmaCaster",0,0,0,0,0,0,0,SXF_TRANSFERPOINTERS|32)
	Goto End
	TNT1 A 5 A_SpawnItemEx("UACGuyRailgun",0,0,0,0,0,0,0,SXF_TRANSFERPOINTERS|32)
	Goto End
	TNT1 A 5 A_SpawnItemEx("UACGuyRocket",0,0,0,0,0,0,0,SXF_TRANSFERPOINTERS|32)
	Goto End
	TNT1 A 5 A_SpawnItemEx("UACGuyDTRifle",0,0,0,0,0,0,0,SXF_TRANSFERPOINTERS|32)
	Goto End
	TNT1 A 5 A_SpawnItemEx("UACGuyHRL",0,0,0,0,0,0,0,SXF_TRANSFERPOINTERS|32)
	Goto End
	TNT1 A 5 A_SpawnItemEx("UACGuyHSG",0,0,0,0,0,0,0,SXF_TRANSFERPOINTERS|32)
	Goto End
	TNT1 A 5 A_SpawnItemEx("UACGuyExpMinigun",0,0,0,0,0,0,0,SXF_TRANSFERPOINTERS|32)
	Goto End
	TNT1 A 5 A_SpawnItemEx("UACGuySniper",0,0,0,0,0,0,0,SXF_TRANSFERPOINTERS|32)
	Goto End
    TNT1 A 5 A_SpawnItemEx("UACGuyDTRailgun",0,0,0,0,0,0,0,SXF_TRANSFERPOINTERS|32)
	Goto End
  End:
	TNT1 A 1 A_Fall
	Stop
}
}

ACTOR MarineBeaconMinions : RandomSpawner
{
+FRIENDLY
DropItem "UACGuyAR", 256, 13
DropItem "UACGuyASG", 256, 13
DropItem "UACGuySSG", 256, 13
DropItem "UACGuyQSG", 256, 13
DropItem "UACGuyMinigun", 256, 13
DropItem "UACGuyPlasma", 256, 13
DropItem "UACGuyRepeater", 256, 13
DropItem "UACGuyPlasmaCaster", 256, 13
DropItem "UACGuyRailgun", 256, 13
DropItem "UACGuyRocket", 256, 13
DropItem "UACGuyDTRifle", 256, 13
DropItem "UACGuyHRL", 256, 13
DropItem "UACGuyHSG", 256, 13
DropItem "UACGuyExpMinigun", 256, 13
DropItem "UACGuySniper", 256, 13
DropItem "UACGuyDTRailgun", 256, 13
//DropItem "LegendaryMarine", 256, 1
}

ACTOR SingleBeacon : Beacon
{
Inventory.MaxAmount 12
Inventory.InterHubAmount 12
Inventory.Icon "B3ACZ0"
Inventory.PickupMessage "\c[m4]Single Marine Beacon"
Tag "Single Marine Beacon"
States
{
  Spawn:
	B3AC A -1
    Stop

  Use:
    TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(3100,0,0,0) == 1 ,"Nope")
    //TNT1 A 1 A_JumpIfInventory("HasSpreadRune",1,2)
	TNT1 A 1 A_SpawnItemEx("MarineSingleBeacon",0,0,16,8,0,4,0)
	Stop
	TNT1 A 1 A_SpawnItemEx("MarineSingleBeacon",0,0,16,8,0,4,0)
	TNT1 A 1 A_SpawnItemEx("MarineSingleBeacon",0,0,16,8,-4,4,0)
 	TNT1 A 1 A_SpawnItemEx("MarineSingleBeacon",0,0,16,8,4,4,0)
	Stop
}
}

Actor MarineSingleBeacon : MarineBeacon
{
States
{
  Spawn:
    B3AC ABCDE 6
    B3AC E 20
    B3AC F 15 Bright A_PlaySound("world/alarm1")
    B3AC E 20
    B3AC F 15 Bright A_PlaySound("world/alarm1")
    B3AC E 20
    B3AC F 15 Bright A_PlaySound("world/alarm1")
    B3AC F 35 Bright
    B3AC E 105 A_SpawnItemEx("MarineBeaconSpawners",0,0,0,0,0,0,0,32|SXF_SETMASTER)
	B3AC E 35 A_PlaySound("sentry/warn")
    Goto Death
}
}

ACTOR TSBeacon : CustomInventory
{
Inventory.MaxAmount 1
Inventory.Icon "ITM2B0"
Inventory.PickupMessage "\c[S7]Task Force Beacon"
Inventory.PickupSound "soulgenerator/pickup"
Tag "Task Force Beacon"
Scale 0.8
+INVBAR
States
{
  Spawn:
	BEAC B -1
    Stop
  Use:
    TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(3100,0,0,0) == 1 ,"Nope")
    //TNT1 A 1 A_JumpIfInventory("HasSpreadRune",1,2)
	TNT1 A 1 A_SpawnItemEx("TSMarineBeacon",0,0,16,8,0,4,0)
	Stop
	TNT1 A 1 A_SpawnItemEx("TSMarineBeacon",0,0,16,8,0,4,0)
	TNT1 A 1 A_SpawnItemEx("TSMarineBeacon",0,0,16,8,-4,4,0)
 	TNT1 A 1 A_SpawnItemEx("TSMarineBeacon",0,0,16,8,4,4,0)
	Stop
  Nope:
	TNT1 A 0 A_Print("Can't use this inventory now!")
	Fail
}
}

ACTOR TSMarineBeacon : MarineBeacon
{
  States
  {
  Spawn:
    BEAC B 10
	BEAC BBB 35 A_PlaySound("world/alarm1")
    BEAC BBB 35 A_SpawnItemEx("TaskForceBeaconSpawners",random(-16,16),random(-16,16),0,0,0,0,0,32|SXF_SETMASTER)
    BEAC BBB 35 A_SpawnItemEx("TaskForceBeaconSpawners",random(-16,16),random(-16,16),0,0,0,0,0,32|SXF_SETMASTER,85)
	BEAC B 105
	BEAC B 35 A_PlaySound("sentry/warn")
    Goto Death
}
}

ACTOR TaskForceBeaconSpawners : MarineBeaconSpawners
{
States
{
  Spawn:
    TNT1 A 0
    TNT1 A 0 A_SpawnItemEx("TeleportFog")
	TNT1 A 0 A_Jump(8,"DBFG")
	TNT1 A 0 A_Jump(26,"BFG3500","BFG12000","DTBFG")
	TNT1 A 0 A_Jump(64,"BFG10K","BFG4700")
  BFG9000:
	TNT1 A 5 A_SpawnItemEx("UACGuyBFG9K",0,0,0,0,0,0,0,SXF_TRANSFERPOINTERS|32)
	Goto End
  BFG10K:
	TNT1 A 5 A_SpawnItemEx("UACGuyBFG10K",0,0,0,0,0,0,0,SXF_TRANSFERPOINTERS|32)
	Goto End
  BFG4700:
	TNT1 A 5 A_SpawnItemEx("UACGuyBFG4700",0,0,0,0,0,0,0,SXF_TRANSFERPOINTERS|32)
	Goto End
  BFG3500:
	TNT1 A 5 A_SpawnItemEx("UACGuyBFG3500",0,0,0,0,0,0,0,SXF_TRANSFERPOINTERS|32)
	Goto End
  BFG12000:
	TNT1 A 5 A_SpawnItemEx("UACGuyBFG12K",0,0,0,0,0,0,0,SXF_TRANSFERPOINTERS|32)
	Goto End
  DTBFG:
	TNT1 A 5 A_SpawnItemEx("UACGuyDTBFG",0,0,0,0,0,0,0,SXF_TRANSFERPOINTERS|32)
	Goto End
  DBFG:
	TNT1 A 5 A_SpawnItemEx("UACGuyDBFG",0,0,0,0,0,0,0,SXF_TRANSFERPOINTERS|32)
	Goto End
}
}

ACTOR TaskForceBeaconMinions : RandomSpawner
{
+FRIENDLY
DropItem "UACGuyBFG9K", 256, 62
DropItem "UACGuyBFG10K", 256, 25
DropItem "UACGuyDTBFG", 256, 10
DropItem "UACGuyDBFG", 256, 3
}

ACTOR LegendaryBeacon : CustomInventory
{
Inventory.MaxAmount 1
Inventory.Icon "ITM2K0"
Inventory.PickupMessage "\c[z3]Legendary Beacon"
Inventory.PickupSound "soulgenerator/pickup"
Tag "Legendary Beacon"
Scale 0.8
+INVBAR
States
{
  Spawn:
	BEAC C -1
    Stop
  Use:
    TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(3100,0,0,0) == 1 ,"Nope")
	TNT1 A 1 A_SpawnItemEx("LegendaryMarineBeacon",0,0,16,8,0,4,0)
	Stop
  Nope:
	TNT1 A 0 A_Print("Can't use this inventory now!")
	Fail
}
}

ACTOR LegendaryMarineBeacon : MarineBeacon
{
States
{
  Spawn:
    BEAC C 10
	BEAC CCC 35 A_PlaySound("world/alarm1")
    BEAC CCC 105 A_SpawnItemEx("LegendaryMarineBeaconSpawners",0,0,0,0,0,0,0,32|SXF_SETMASTER)
	BEAC CC 105 A_SpawnItemEx("LegendaryMarineBeaconSpawners",0,0,0,0,0,0,0,32|SXF_SETMASTER,192)
	BEAC C 35 A_PlaySound("sentry/warn")
    Goto Death
  Death:
	TNT1 A 0
	TNT1 A 0 A_SpawnItemEx("OrangeParticleSpawner", 0, 0, 0, 0, 0, 0, 0, 128)
    TNT1 AAA 0 A_CustomMissile("Kaboom3", 0, 0, random(0,360), 2, random(0,360))
	TNT1 AAA 0 A_CustomMissile("SmokeFX2", 0, 0, random(0,360), 2, random(0,360))
    TNT1 AAAA 0 A_SpawnItemEx("Debris",0,0,0,Random(4,-4),Random(4,-4),Random(4,8),0,128)
    TNT1 A 0 A_PlaySound("weapons/rocklx")
    TNT1 A 1 A_SpawnItem("RocketEx")
    Stop
  }
}

ACTOR LegendaryMarineBeaconSpawners : MarineBeaconSpawners
{
States
{
   Spawn:
    TNT1 A 0
    TNT1 A 0 A_SpawnItemEx("TeleportFog")
    TNT1 A 5 A_SpawnItemEx("LegendaryMarine",0,0,0,0,0,0,0,32|SXF_TRANSFERPOINTERS)
	TNT1 A 1 A_Fall
	Stop
}
}

Actor LightSupportBeaconItem : Beacon
{
Inventory.Icon "ITM4A0"
Inventory.PickupMessage "\c[L7]Light Support Beacon"
Tag "Light Support Beacon"
Inventory.MaxAmount 2
States
{
  Spawn:
	RBC1 A -1
    Stop
  Use:
    TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(3100,0,0,0) == 1 ,"Nope")
	TNT1 A 1 A_SpawnItemEx("LightSupportBeacon",0,0,16,8,0,4,0)
	Stop
  Nope:
	TNT1 A 0 A_Print("Can't use this inventory now!")
	Fail
}
}

Actor LightSupportBeacon : MarineBeacon
{
+BRIGHT
States
{
  Spawn:
    RBC1 ABCDE 10
	RBC1 F 70 A_PlaySound("world/alarm1")
	TNT1 A 0 A_SpawnItemEx("LightSupportBeaconSpawners",random(-16,16),random(-16,16),0,0,0,0,0,32|SXF_SETMASTER)
	RBC1 ABCDE 70
	RBC1 F 70 A_PlaySound("world/alarm1")
	TNT1 A 0 A_SpawnItemEx("LightSupportBeaconSpawners",random(-16,16),random(-16,16),0,0,0,0,0,32|SXF_SETMASTER)
	RBC1 ABCDE 70
	RBC1 F 70 A_PlaySound("world/alarm1")
	TNT1 A 0 A_SpawnItemEx("LightSupportBeaconSpawners",random(-16,16),random(-16,16),0,0,0,0,0,32|SXF_SETMASTER)
	RBC1 ABCDE 70
	RBC1 F 70 A_PlaySound("world/alarm1")
	TNT1 A 0 A_SpawnItemEx("LightSupportBeaconSpawners",random(-16,16),random(-16,16),0,0,0,0,0,32|SXF_SETMASTER)
	RBC1 ABCDE 70
	RBC1 F 70 A_PlaySound("world/alarm1")
	TNT1 A 0 A_SpawnItemEx("LightSupportBeaconSpawners",random(-16,16),random(-16,16),0,0,0,0,0,32|SXF_SETMASTER)
	RBC1 A 105
	RBC1 A 35 A_PlaySound("sentry/warn")
    Goto Death
}
}

Actor LightSupportBeaconSpawners : MarineBeaconSpawners
{
States
{
  Spawn:
    TNT1 A 0 
    TNT1 A 0 A_SpawnItemEx("TeleportFog")
	TNT1 A 0 A_Jump(256,1,2,3,4)
    TNT1 A 5 A_SpawnItemEx("UACGuyAR",0,0,0,0,0,0,0,SXF_TRANSFERPOINTERS|32)
    Goto End
	TNT1 A 5 A_SpawnItemEx("UACGuyASG",0,0,0,0,0,0,0,SXF_TRANSFERPOINTERS|32)
	Goto End
	TNT1 A 5 A_SpawnItemEx("UACGuySSG",0,0,0,0,0,0,0,SXF_TRANSFERPOINTERS|32)
	Goto End
	TNT1 A 5 A_SpawnItemEx("UACGuyChaingun",0,0,0,0,0,0,0,SXF_TRANSFERPOINTERS|32)
	Goto End
}
}

Actor HeavySupportBeaconItem : LightSupportBeaconItem
{
Inventory.Icon "ITM4B0"
Inventory.PickupMessage "\c[M6]Heavy Support Beacon"
Tag "Heavy Support Beacon"
States
{
  Spawn:
	RBC2 A -1
    Stop
  Use:
    TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(3100,0,0,0) == 1 ,"Nope")
	TNT1 A 1 A_SpawnItemEx("HeavySupportBeacon",0,0,16,8,0,4,0)
	Stop
  Nope:
	TNT1 A 0 A_Print("Can't use this inventory now!")
	Fail
}
}

Actor HeavySupportBeacon : LightSupportBeacon
{
States
{
  Spawn:
    RBC2 ABCDE 10
	RBC2 F 70 A_PlaySound("world/alarm1")
	TNT1 A 0 A_SpawnItemEx("HeavySupportBeaconSpawners",random(-16,16),random(-16,16),0,0,0,0,0,32|SXF_SETMASTER)
	RBC2 ABCDE 140
	RBC2 F 70 A_PlaySound("world/alarm1")
	TNT1 A 0 A_SpawnItemEx("HeavySupportBeaconSpawners",random(-16,16),random(-16,16),0,0,0,0,0,32|SXF_SETMASTER)
	RBC2 ABCDE 140
	RBC2 F 70 A_PlaySound("world/alarm1")
	TNT1 A 0 A_SpawnItemEx("HeavySupportBeaconSpawners",random(-16,16),random(-16,16),0,0,0,0,0,32|SXF_SETMASTER)
	RBC2 A 105
	RBC2 A 35 A_PlaySound("sentry/warn")
    Goto Death
}
}

Actor HeavySupportBeaconSpawners : MarineBeaconSpawners
{
States
{
  Spawn:
    TNT1 A 0 
    TNT1 A 0 A_SpawnItemEx("TeleportFog")
	TNT1 A 0 A_Jump(256,1,2,3)
	TNT1 A 5 A_SpawnItemEx("UACGuyRocket",0,0,0,0,0,0,0,SXF_TRANSFERPOINTERS|32)
	Goto End
	TNT1 A 5 A_SpawnItemEx("UACGuyHRL",0,0,0,0,0,0,0,SXF_TRANSFERPOINTERS|32)
	Goto End
	TNT1 A 5 A_SpawnItemEx("UACGuyExpMinigun",0,0,0,0,0,0,0,SXF_TRANSFERPOINTERS|32)
	Goto End
}
}

Actor PlasmaSupportBeaconItem : LightSupportBeaconItem
{
Inventory.Icon "ITM4C0"
Inventory.PickupMessage "\c[M4]Plasma Support Beacon"
Tag "Plasma Support Beacon"
States
{
  Spawn:
	RBC3 A -1
    Stop
  Use:
    TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(3100,0,0,0) == 1 ,"Nope")
	TNT1 A 1 A_SpawnItemEx("PlasmaSupportBeacon",0,0,16,8,0,4,0)
	Stop
  Nope:
	TNT1 A 0 A_Print("Can't use this inventory now!")
	Fail
}
}

Actor PlasmaSupportBeacon : LightSupportBeacon
{
States
{
  Spawn:
    RBC3 ABCDE 10
	RBC3 F 70 A_PlaySound("world/alarm1")
	TNT1 A 0 A_SpawnItemEx("PlasmaSupportBeaconSpawners",random(-16,16),random(-16,16),0,0,0,0,0,32|SXF_SETMASTER)
	RBC3 ABCDE 105
	RBC3 F 70 A_PlaySound("world/alarm1")
	TNT1 A 0 A_SpawnItemEx("PlasmaSupportBeaconSpawners",random(-16,16),random(-16,16),0,0,0,0,0,32|SXF_SETMASTER)
	RBC3 ABCDE 105
	RBC3 F 70 A_PlaySound("world/alarm1")
	TNT1 A 0 A_SpawnItemEx("PlasmaSupportBeaconSpawners",random(-16,16),random(-16,16),0,0,0,0,0,32|SXF_SETMASTER)
	RBC3 ABCDE 105
	RBC3 F 70 A_PlaySound("world/alarm1")
	TNT1 A 0 A_SpawnItemEx("PlasmaSupportBeaconSpawners",random(-16,16),random(-16,16),0,0,0,0,0,32|SXF_SETMASTER)
	RBC3 A 105
	RBC3 A 35 A_PlaySound("sentry/warn")
    Goto Death
}
}

Actor PlasmaSupportBeaconSpawners : MarineBeaconSpawners
{
States
{
  Spawn:
    TNT1 A 0 
    TNT1 A 0 A_SpawnItemEx("TeleportFog")
	TNT1 A 0 A_Jump(256,1,2,3,4,5,6)
	TNT1 A 5 A_SpawnItemEx("UACGuyPlasma",0,0,0,0,0,0,0,SXF_TRANSFERPOINTERS|32)
	Goto End
	TNT1 A 5 A_SpawnItemEx("UACGuyRepeater",0,0,0,0,0,0,0,SXF_TRANSFERPOINTERS|32)
	Goto End
	TNT1 A 5 A_SpawnItemEx("UACGuyPlasmaCaster",0,0,0,0,0,0,0,SXF_TRANSFERPOINTERS|32)
	Goto End
	TNT1 A 5 A_SpawnItemEx("UACGuyRailgun",0,0,0,0,0,0,0,SXF_TRANSFERPOINTERS|32)
	Goto End
	TNT1 A 5 A_SpawnItemEx("UACGuyDTRifle",0,0,0,0,0,0,0,SXF_TRANSFERPOINTERS|32)
	Goto End
    TNT1 A 5 A_SpawnItemEx("UACGuyDTRailgun",0,0,0,0,0,0,0,SXF_TRANSFERPOINTERS|32)
	Goto End
}
}

ACTOR BarrelBeaconItem : CustomInventory
{
Inventory.MaxAmount 4
Inventory.Icon "ITM3R0"
Inventory.PickupMessage "\c[z4]Barrel Beacon"
Inventory.PickupSound "soulgenerator/pickup"
Tag "Barrel Beacon"
Scale 0.8
+INVBAR
States
{
  Spawn:
	BEAC E -1
    Stop
  Use:
    TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(3100,0,0,0) == 1 ,"Nope")
    TNT1 A 1 A_JumpIfInventory("HasSpreadRune",1,2)
	TNT1 A 1 A_SpawnItemEx("BarrelBeacon",0,0,16,8,0,4,0)
	Stop
	TNT1 A 1 A_SpawnItemEx("BarrelBeacon",0,0,16,8,0,4,0)
	TNT1 A 1 A_SpawnItemEx("BarrelBeacon",0,0,16,8,-4,4,0)
 	TNT1 A 1 A_SpawnItemEx("BarrelBeacon",0,0,16,8,4,4,0)
	Stop
  Nope:
	TNT1 A 0 A_Print("Can't use this inventory now!")
	Fail
}
}

ACTOR BarrelBeacon : MarineBeacon
{
States
{
  Spawn:
    BEAC E 10
	BEAC EEE 35 A_PlaySound("world/alarm1")
    BEAC E 35 ACS_NamedExecuteAlways("Barrel Beacon",0,0,0,0)
	BEAC E 1
    Wait
}
}

ACTOR SentryBox : CustomInventory
{
+COUNTITEM
+INVENTORY.INVBAR
Inventory.MaxAmount 2 
Inventory.Icon "ITM3T0" //"ITM2C0"
Inventory.PickupMessage "\c[w3]Heavy Sentry Gun"
Inventory.PickupSound "sentry/beep"
States
{
  Spawn:
    SENB A -1
    Stop
  Use:
    TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(3100,0,0,0) == 1 ,"Nope")
    TNT1 A 1 A_JumpIfInventory("HasSpreadRune",1,2)
    TNT1 A 1 A_SpawnItemEx("HeavySentryGun2",56,0,8,0,0,0,0,1)
    Stop
    TNT1 A 1 A_SpawnItemEx("HeavySentryGun2",56,-48,8,0,0,0,0,1)
    TNT1 A 1 A_SpawnItemEx("HeavySentryGun2",56,48,8,0,0,0,0,1)
    TNT1 A 1 A_SpawnItemEx("HeavySentryGun2",56,0,8,0,0,0,0,1)
    Stop
  Nope:
	TNT1 A 0 A_Print("Can't use this inventory now!")
	Fail
}
}

ACTOR TimeBomb : CustomInventory
{
Inventory.MaxAmount 4
Inventory.Icon "ITM2D0"
Inventory.PickupMessage "\c[C4]Timed Bomb"
Inventory.PickupSound "timebomb/start"
Tag "Timed Nuclear Bomb"
Scale 0.8
+INVBAR
States
{
  Spawn:
	YERO D -1
    Stop
  Use:
    TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(3100,0,0,0) == 1 ,"Nope")
    TNT1 A 1 A_JumpIfInventory("HasSpreadRune",1,2)
	TNT1 A 1 A_SpawnItemEx("TimedBomb",0,0,16,8,0,4,0)
	Stop
	TNT1 A 1 A_SpawnItemEx("TimedBomb",0,0,16,8,0,4,0)
	TNT1 A 1 A_SpawnItemEx("TimedBomb",0,0,16,8,-12,4,0)
 	TNT1 A 1 A_SpawnItemEx("TimedBomb",0,0,16,8,12,4,0)
	Stop
  Nope:
	TNT1 A 0 A_Print("Can't use this inventory now!")
	Fail
}
}

Actor TimedBomb
{
Monster
Radius 12
Height 18
+NOBLOCKMAP
+FORCERADIUSDMG
+FRIENDLY
+AMBUSH
+THRUACTORS
+INVULNERABLE
+NOTARGET
+NEVERTARGET
-SHOOTABLE
-SOLID
Mass 9999999
DamageType "Marine"
var int user_delay;
var int user_done;
var int user_ready;
MeleeRange 76
States
{
  Spawn:
	YERO D 0
	YERB D 0 A_JumpIf(user_done == 1,"Detonate")
	YERO D 6 A_PlaySound("timebomb/start",5,0.8,0,1)
	YERO CBA 2
	YERB A 5
	YERO D 0 A_PlaySound("timebomb/loop",6,0.7,1,1)
	YERB AA 4 A_SpawnItemEx("TBombParticle",0,0,8,FRandom(9.0,8.5),0,FRandom(-9.0,9.0),Random(0,359),128)
	YERB AAA 3 A_SpawnItemEx("TBombParticle",0,0,8,FRandom(9.0,8.5),0,FRandom(-9.0,9.0),Random(0,359),128)
	YERB BBBCCCDDDEEEFFF 1 A_SpawnItemEx("TBombParticle",0,0,8,FRandom(9.0,8.5),0,FRandom(-9.0,9.0),Random(0,359),128)
  Waiting:
	YERB B 0 A_JumpIf(user_ready >= 6,"Detonate")
	YERB B 0 A_SetUserVar("user_ready",user_ready+1)
	YERB BBBCCCDDDEEEFFF 1 A_SpawnItemEx("TBombParticle",0,0,8,FRandom(9.0,8.5),0,FRandom(-9.0,9.0),Random(0,359),128)
	Loop
  Detonate:
	YERB B 0 A_JumpIf(user_delay >= 525,"Boom")
	YERB B 0 A_SetUserVar("user_delay",user_delay+1)
	YERB B 0 A_Look
	YERB B 0 A_SetUserVar("user_done",1)
	YERB B 1 A_SpawnItemEx("TBombParticle",0,0,8,FRandom(9.0,8.5),0,FRandom(-9.0,9.0),Random(0,359),128)
	Loop
  See:
    YERB B 0 A_JumpIf(user_delay >= 525,"Boom")
	YERB B 0 A_SetUserVar("user_delay",user_delay+5)
    YERB B 0 A_Chase
	YERB B 1 A_SpawnItemEx("TBombParticle",0,0,8,FRandom(9.0,8.5),0,FRandom(-9.0,9.0),Random(0,359),128)
	YERB C 0 A_Chase
	YERB C 1 A_SpawnItemEx("TBombParticle",0,0,8,FRandom(9.0,8.5),0,FRandom(-9.0,9.0),Random(0,359),128)
	YERB D 0 A_Chase
	YERB D 1 A_SpawnItemEx("TBombParticle",0,0,8,FRandom(9.0,8.5),0,FRandom(-9.0,9.0),Random(0,359),128)
	YERB E 0 A_Chase
	YERB E 1 A_SpawnItemEx("TBombParticle",0,0,8,FRandom(9.0,8.5),0,FRandom(-9.0,9.0),Random(0,359),128)
	YERB F 0 A_Chase
	YERB F 1 A_SpawnItemEx("TBombParticle",0,0,8,FRandom(9.0,8.5),0,FRandom(-9.0,9.0),Random(0,359),128)
	YERB F 0 A_ClearTarget
	Goto Detonate
  Melee:
  Boom:
	YERO F 0 A_StopSound(6)
	YERB FFFEEEDDDCCC 1 A_SpawnItemEx("TBombParticle",0,0,8,FRandom(9.0,8.5),0,FRandom(-9.0,9.0),Random(0,359),128)
	YERO D 0 A_PlaySound("timebomb/stop",5,0.9,0,1)
	YERB BBBAAA 1 A_SpawnItemEx("TBombParticle",0,0,8,FRandom(9.0,8.5),0,FRandom(-9.0,9.0),Random(0,359),128)
	YERO ABCD 2
	YERO D 35
	TNT1 A 0 A_CustomMissile("TimedBombExplode",24,0,0,CMF_AIMDIRECTION)
	//TNT1 A 0 A_CustomMissile("HugeExplosion",0,0,random(80,100),2,random(80,100))
    //TNT1 AAAA 0 A_SpawnItemEx("Debris",0,0,0,random(4,-4),random(4,-4),random(4,8),0,128)
	TNT1 A 1 A_SpawnItemEx("FusionNukeExplosion")//A_SpawnItem("HugeRocketEx")
	Stop
	}
}

Actor TimedBombExplode
{
Projectile
Speed 0
Damage 0
+NOCLIP
DamageType "Marine"
States
{
  Spawn:
	TNT1 A 0
	TNT1 A 0 A_Explode(128,512,0)
	TNT1 A 0 A_Explode(384,1024,0)
	TNT1 A 0 A_Explode(764,1584,0)
	//TNT1 A 0 A_Explode(484,684,0)
    Stop
}
}

ACTOR FlameTurret : CustomInventory
{
Inventory.MaxAmount 4
Inventory.Icon "ITM2F0"
Inventory.PickupMessage "\c[Z4]Flame Trap"
Inventory.PickupSound "hectebus/flameready"
Tag "Flame Trap"
Scale 0.8
+INVBAR
States
{
  Spawn:
	FLTR D -1
    Stop
  Use:
    TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(3100,0,0,0) == 1 ,"Nope")
    TNT1 A 1 A_JumpIfInventory("HasSpreadRune",1,2)
	TNT1 A 1 A_ThrowGrenade("FlameTurretSet",4,8,3,0)
	Stop
	TNT1 A 1 A_ThrowGrenade("FlameTurretSet",4,8,3,0)
	TNT1 A 1 A_SpawnItemEx("FlameTurretSet",0,0,16,8,-12,4,0)
 	TNT1 A 1 A_SpawnItemEx("FlameTurretSet",0,0,16,8,12,4,0)
	Stop
  Nope:
	TNT1 A 0 A_Print("Can't use this inventory now!")
	Fail
}
}

ACTOR FlameTurretSet
{
   Radius 12
   Height 8
   Speed 15
   +MISSILE
   +DROPOFF
   +CANBOUNCEWATER
   DONTHURTSHOOTER
   States
   {
   Spawn:
      FLTR A 1 Bright
	  Loop
   Death:
      FLTR A 1 Bright
      TNT1 A 0 A_SpawnItemEx("FlameTurretEngage",0,0,0,0,0,0,0,32)
	  TNT1 A 0 A_SpawnItemEx("FlameTurretDummy",0,0,0,0,0,0,0,32)
      Stop
   }
}

ACTOR FlameTurretEngage
{
   Radius 12
   Height 40
   Health 100
   Mass 25
   -SHOOTABLE
   +NOBLOOD
   +INVULNERABLE
   +NOTARGET
   +MOVEWITHSECTOR
   +BRIGHT
   States
   {
   Spawn:
      FLTR A 2
	  TNT1 A 0 A_PlaySound("hectebus/flameready")
	  FLTR BCDE 2
	  TNT1 A 0
	  TNT1 A 0
      Goto See
   See:
      FLTR E 1630
	  GoTo Death
   Missile:
      Stop
   Death:
      TNT1 A 0
      FLTR EDCB 2
	  FLTR AAA 5
      TNT1 AAAAA 0 A_CustomMissile("Kaboom",0,0,random(0,360),2,random(0,360))
      Stop
   }
}

ACTOR FlameTurretDummy
{
Radius 12
Height 3
-SHOOTABLE
-SOLID
+NOBLOCKMAP
+NOTARGET
+NEVERTARGET
+MOVEWITHSECTOR
+BRIGHT
+THRUACTORS
+INVULNERABLE
+FRIENDLY
ReactionTime 15
Mass 9999999
Monster
States
{
   Spawn:
      TNT1 A 20
	  TNT1 A 0 A_Countdown
	  FLTR E 0 A_PlaySound("monsters/fatsofire")
	  FLTR E 3 A_CustomMissile("TrapFlame",28,0,0,CMF_AIMDIRECTION)
	  FLTR E 0 A_CustomMissile("TrapFlame",28,0,0,CMF_AIMDIRECTION)
      FLTR E 3 A_CustomMissile("TrapFlame",28,0,10,CMF_AIMDIRECTION)
	  FLTR E 0 A_CustomMissile("TrapFlame",28,0,-180,CMF_AIMDIRECTION)
      FLTR E 3 A_CustomMissile("TrapFlame",28,0,20,CMF_AIMDIRECTION)
	  FLTR E 0 A_CustomMissile("TrapFlame",28,0,-170,CMF_AIMDIRECTION)
      FLTR E 3 A_CustomMissile("TrapFlame",28,0,30,CMF_AIMDIRECTION)
	  FLTR E 0 A_CustomMissile("TrapFlame",28,0,-160,CMF_AIMDIRECTION)
      FLTR E 3 A_CustomMissile("TrapFlame",28,0,40,CMF_AIMDIRECTION)
	  FLTR E 0 A_CustomMissile("TrapFlame",28,0,-150,CMF_AIMDIRECTION)
      FLTR E 3 A_CustomMissile("TrapFlame",28,0,50,CMF_AIMDIRECTION)
	  FLTR E 0 A_CustomMissile("TrapFlame",28,0,-140,CMF_AIMDIRECTION)
      FLTR E 3 A_CustomMissile("TrapFlame",28,0,60,CMF_AIMDIRECTION)
	  FLTR E 0 A_CustomMissile("TrapFlame",28,0,-130,CMF_AIMDIRECTION)
      FLTR E 3 A_CustomMissile("TrapFlame",28,0,70,CMF_AIMDIRECTION)
	  FLTR E 0 A_CustomMissile("TrapFlame",28,0,-120,CMF_AIMDIRECTION)
      FLTR E 3 A_CustomMissile("TrapFlame",28,0,80,CMF_AIMDIRECTION)
	  FLTR E 0 A_CustomMissile("TrapFlame",28,0,-100,CMF_AIMDIRECTION)
      FLTR E 3 A_CustomMissile("TrapFlame",28,0,90,CMF_AIMDIRECTION)
	  FLTR E 0 A_CustomMissile("TrapFlame",28,0,-90,CMF_AIMDIRECTION)
	  FLTR E 0 A_PlaySound("monsters/fatsofire")
      FLTR E 3 A_CustomMissile("TrapFlame",28,0,100,CMF_AIMDIRECTION)
	  FLTR E 0 A_CustomMissile("TrapFlame",28,0,-80,CMF_AIMDIRECTION)
      FLTR E 3 A_CustomMissile("TrapFlame",28,0,110,CMF_AIMDIRECTION)
	  FLTR E 0 A_CustomMissile("TrapFlame",28,0,-70,CMF_AIMDIRECTION)
      FLTR E 3 A_CustomMissile("TrapFlame",28,0,120,CMF_AIMDIRECTION)
	  FLTR E 0 A_CustomMissile("TrapFlame",28,0,-60,CMF_AIMDIRECTION)
      FLTR E 3 A_CustomMissile("TrapFlame",28,0,130,CMF_AIMDIRECTION)
	  FLTR E 0 A_CustomMissile("TrapFlame",28,0,-50,CMF_AIMDIRECTION)
      FLTR E 3 A_CustomMissile("TrapFlame",28,0,140,CMF_AIMDIRECTION)
	  FLTR E 0 A_CustomMissile("TrapFlame",28,0,-40,CMF_AIMDIRECTION)
      FLTR E 3 A_CustomMissile("TrapFlame",28,0,150,CMF_AIMDIRECTION)
	  FLTR E 0 A_CustomMissile("TrapFlame",28,0,-30,CMF_AIMDIRECTION)
      FLTR E 3 A_CustomMissile("TrapFlame",28,0,160,CMF_AIMDIRECTION)
	  FLTR E 0 A_CustomMissile("TrapFlame",28,0,-20,CMF_AIMDIRECTION)
	  FLTR E 3 A_CustomMissile("TrapFlame",28,0,170,CMF_AIMDIRECTION)
	  FLTR E 0 A_CustomMissile("TrapFlame",28,0,-10,CMF_AIMDIRECTION)
      FLTR E 3 A_CustomMissile("TrapFlame",28,0,180,CMF_AIMDIRECTION)
	  FLTR E 0 A_PlaySound("monsters/fatsofire")
	  FLTR E 0 A_CustomMissile("TrapFlame",28,0,-0,CMF_AIMDIRECTION)
      FLTR E 3 A_CustomMissile("TrapFlame",28,0,190,CMF_AIMDIRECTION)
	  FLTR E 0 A_CustomMissile("TrapFlame",28,0,10,CMF_AIMDIRECTION)
      FLTR E 3 A_CustomMissile("TrapFlame",28,0,200,CMF_AIMDIRECTION)
	  FLTR E 0 A_CustomMissile("TrapFlame",28,0,20,CMF_AIMDIRECTION)
      FLTR E 3 A_CustomMissile("TrapFlame",28,0,210,CMF_AIMDIRECTION)
	  FLTR E 0 A_CustomMissile("TrapFlame",28,0,30,CMF_AIMDIRECTION)
      FLTR E 3 A_CustomMissile("TrapFlame",28,0,220,CMF_AIMDIRECTION)
	  FLTR E 0 A_CustomMissile("TrapFlame",28,0,40,CMF_AIMDIRECTION)
      FLTR E 3 A_CustomMissile("TrapFlame",28,0,230,CMF_AIMDIRECTION)
	  FLTR E 0 A_CustomMissile("TrapFlame",28,0,50,CMF_AIMDIRECTION)
      FLTR E 3 A_CustomMissile("TrapFlame",28,0,240,CMF_AIMDIRECTION)
	  FLTR E 0 A_CustomMissile("TrapFlame",28,0,60,CMF_AIMDIRECTION)
      FLTR E 3 A_CustomMissile("TrapFlame",28,0,250,CMF_AIMDIRECTION)
	  FLTR E 0 A_CustomMissile("TrapFlame",28,0,70,CMF_AIMDIRECTION)
      FLTR E 3 A_CustomMissile("TrapFlame",28,0,260,CMF_AIMDIRECTION)
	  FLTR E 0 A_CustomMissile("TrapFlame",28,0,80,CMF_AIMDIRECTION)
      FLTR E 3 A_CustomMissile("TrapFlame",28,0,270,CMF_AIMDIRECTION)
	  FLTR E 0 A_PlaySound("monsters/fatsofire")
	  FLTR E 0 A_CustomMissile("TrapFlame",28,0,90,CMF_AIMDIRECTION)
      FLTR E 3 A_CustomMissile("TrapFlame",28,0,280,CMF_AIMDIRECTION)
	  FLTR E 0 A_CustomMissile("TrapFlame",28,0,100,CMF_AIMDIRECTION)
      FLTR E 3 A_CustomMissile("TrapFlame",28,0,290,CMF_AIMDIRECTION)
	  FLTR E 0 A_CustomMissile("TrapFlame",28,0,110,CMF_AIMDIRECTION)
      FLTR E 3 A_CustomMissile("TrapFlame",28,0,300,CMF_AIMDIRECTION)
	  FLTR E 0 A_CustomMissile("TrapFlame",28,0,120,CMF_AIMDIRECTION)
      FLTR E 3 A_CustomMissile("TrapFlame",28,0,310,CMF_AIMDIRECTION)
	  FLTR E 0 A_CustomMissile("TrapFlame",28,0,130,CMF_AIMDIRECTION)
      FLTR E 3 A_CustomMissile("TrapFlame",28,0,320,CMF_AIMDIRECTION)
	  FLTR E 0 A_CustomMissile("TrapFlame",28,0,140,CMF_AIMDIRECTION)
      FLTR E 3 A_CustomMissile("TrapFlame",28,0,330,CMF_AIMDIRECTION)
	  FLTR E 0 A_CustomMissile("TrapFlame",28,0,150,CMF_AIMDIRECTION)
      FLTR E 3 A_CustomMissile("TrapFlame",28,0,340,CMF_AIMDIRECTION)
	  FLTR E 0 A_CustomMissile("TrapFlame",28,0,160,CMF_AIMDIRECTION)
      FLTR E 3 A_CustomMissile("TrapFlame",28,0,350,CMF_AIMDIRECTION)
	  FLTR E 0 A_CustomMissile("TrapFlame",28,0,170,CMF_AIMDIRECTION)
      Goto Spawn+1
   Death:
      TNT1 A 0
      Stop
   }
}

ACTOR TrapFlame : PoisonSoulCloud
{
    Radius 10
    Height 10
	Scale 0.55
	Speed 8
	DamageType "Marine"
	Species "Player"
	PROJECTILE
	+THRUSPECIES
	-THRUACTORS
	-SKYEXPLODE
	Decal Scorch
    States
    {
    Spawn:
        FIR1 LKJIHGFEDCB 2 Bright A_Explode(3,68)
	Death:
		FIR1 AA 2 Bright A_FadeOut(0.25)
	    Stop
		}
}

ACTOR PoisonTurret : CustomInventory
{
Inventory.MaxAmount 2
Inventory.Icon "ITM2G0"
Inventory.PickupMessage "\c[G4]Poison Trap"
Inventory.PickupSound "hectebus/flameready"
Tag "Poison Trap"
Scale 0.8
+INVBAR
States
{
  Spawn:
	PLTR D -1
    Stop
  Use:
    TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(3100,0,0,0) == 1 ,"Nope")
    TNT1 A 1 A_JumpIfInventory("HasSpreadRune",1,2)
	TNT1 A 1 A_ThrowGrenade("PoisonTurretSet",4,8,3,0)
	Stop
	TNT1 A 1 A_ThrowGrenade("PoisonTurretSet",4,8,3,0)
	TNT1 A 1 A_SpawnItemEx("PoisonTurretSet",0,0,16,8,-12,4,0)
 	TNT1 A 1 A_SpawnItemEx("PoisonTurretSet",0,0,16,8,12,4,0)
	Stop
  Nope:
	TNT1 A 0 A_Print("Can't use this inventory now!")
	Fail
}
}

ACTOR PoisonTurretSet
{
   Radius 12
   Height 8
   Speed 15
   +MISSILE
   +DROPOFF
   +CANBOUNCEWATER
   DONTHURTSHOOTER
   States
   {
   Spawn:
      PLTR A 1 Bright
	  Loop
   Death:
      PLTR A 1 Bright
      TNT1 A 0 A_SpawnItemEx("PoisonTurretEngage",0,0,0,0,0,0,0,32)
	  TNT1 A 0 A_SpawnItemEx("PoisonTurretDummy",0,0,0,0,0,0,0,32)
      Stop
   }
}

ACTOR PoisonTurretEngage
{
   Radius 12
   Height 40
   Health 100
   Mass 25
   -SHOOTABLE
   +NOBLOOD
   +INVULNERABLE
   +NOTARGET
   +MOVEWITHSECTOR
   +BRIGHT
   States
   {
   Spawn:
      PLTR A 2
	  TNT1 A 0 A_PlaySound("hectebus/flameready")
	  PLTR BCDE 2
	  TNT1 A 0
	  TNT1 A 0
      Goto See
   See:
      PLTR E 2445
	  GoTo Death
   Missile:
      Stop
   Death:
      TNT1 A 0
      PLTR EDCB 2
	  PLTR AAA 5
      TNT1 AAAAA 0 A_CustomMissile("Kaboom",0,0,random(0,360),2,random(0,360))
      Stop
   }
}

ACTOR PoisonTurretDummy : FlameTurretDummy
{
   ReactionTime 23
   States
   {
   Spawn:
      TNT1 A 20
	  TNT1 A 0 A_Countdown
	  PLTR E 0 A_PlaySound("Daedabus/Chem")
	  PLTR E 3 A_CustomMissile("TrapPoison",28,0,0,CMF_AIMDIRECTION)
	  PLTR E 0 A_CustomMissile("TrapPoison",28,0,0,CMF_AIMDIRECTION)
      PLTR E 3 A_CustomMissile("TrapPoison",28,0,10,CMF_AIMDIRECTION)
	  PLTR E 0 A_CustomMissile("TrapPoison",28,0,-180,CMF_AIMDIRECTION)
      PLTR E 3 A_CustomMissile("TrapPoison",28,0,20,CMF_AIMDIRECTION)
	  PLTR E 0 A_CustomMissile("TrapPoison",28,0,-170,CMF_AIMDIRECTION)
      PLTR E 3 A_CustomMissile("TrapPoison",28,0,30,CMF_AIMDIRECTION)
	  PLTR E 0 A_CustomMissile("TrapPoison",28,0,-160,CMF_AIMDIRECTION)
      PLTR E 3 A_CustomMissile("TrapPoison",28,0,40,CMF_AIMDIRECTION)
	  PLTR E 0 A_CustomMissile("TrapPoison",28,0,-150,CMF_AIMDIRECTION)
      PLTR E 3 A_CustomMissile("TrapPoison",28,0,50,CMF_AIMDIRECTION)
	  PLTR E 0 A_CustomMissile("TrapPoison",28,0,-140,CMF_AIMDIRECTION)
      PLTR E 3 A_CustomMissile("TrapPoison",28,0,60,CMF_AIMDIRECTION)
	  PLTR E 0 A_CustomMissile("TrapPoison",28,0,-130,CMF_AIMDIRECTION)
      PLTR E 3 A_CustomMissile("TrapPoison",28,0,70,CMF_AIMDIRECTION)
	  PLTR E 0 A_CustomMissile("TrapPoison",28,0,-120,CMF_AIMDIRECTION)
      PLTR E 3 A_CustomMissile("TrapPoison",28,0,80,CMF_AIMDIRECTION)
	  PLTR E 0 A_CustomMissile("TrapPoison",28,0,-100,CMF_AIMDIRECTION)
      PLTR E 3 A_CustomMissile("TrapPoison",28,0,90,CMF_AIMDIRECTION)
	  PLTR E 0 A_CustomMissile("TrapPoison",28,0,-90,CMF_AIMDIRECTION)
	  PLTR E 0 A_PlaySound("Daedabus/Chem")
      PLTR E 3 A_CustomMissile("TrapPoison",28,0,100,CMF_AIMDIRECTION)
	  PLTR E 0 A_CustomMissile("TrapPoison",28,0,-80,CMF_AIMDIRECTION)
      PLTR E 3 A_CustomMissile("TrapPoison",28,0,110,CMF_AIMDIRECTION)
	  PLTR E 0 A_CustomMissile("TrapPoison",28,0,-70,CMF_AIMDIRECTION)
      PLTR E 3 A_CustomMissile("TrapPoison",28,0,120,CMF_AIMDIRECTION)
	  PLTR E 0 A_CustomMissile("TrapPoison",28,0,-60,CMF_AIMDIRECTION)
      PLTR E 3 A_CustomMissile("TrapPoison",28,0,130,CMF_AIMDIRECTION)
	  PLTR E 0 A_CustomMissile("TrapPoison",28,0,-50,CMF_AIMDIRECTION)
      PLTR E 3 A_CustomMissile("TrapPoison",28,0,140,CMF_AIMDIRECTION)
	  PLTR E 0 A_CustomMissile("TrapPoison",28,0,-40,CMF_AIMDIRECTION)
      PLTR E 3 A_CustomMissile("TrapPoison",28,0,150,CMF_AIMDIRECTION)
	  PLTR E 0 A_CustomMissile("TrapPoison",28,0,-30,CMF_AIMDIRECTION)
      PLTR E 3 A_CustomMissile("TrapPoison",28,0,160,CMF_AIMDIRECTION)
	  PLTR E 0 A_CustomMissile("TrapPoison",28,0,-20,CMF_AIMDIRECTION)
	  PLTR E 3 A_CustomMissile("TrapPoison",28,0,170,CMF_AIMDIRECTION)
	  PLTR E 0 A_CustomMissile("TrapPoison",28,0,-10,CMF_AIMDIRECTION)
      PLTR E 3 A_CustomMissile("TrapPoison",28,0,180,CMF_AIMDIRECTION)
	  PLTR E 0 A_PlaySound("Daedabus/Chem")
	  PLTR E 0 A_CustomMissile("TrapPoison",28,0,-0,CMF_AIMDIRECTION)
      PLTR E 3 A_CustomMissile("TrapPoison",28,0,190,CMF_AIMDIRECTION)
	  PLTR E 0 A_CustomMissile("TrapPoison",28,0,10,CMF_AIMDIRECTION)
      PLTR E 3 A_CustomMissile("TrapPoison",28,0,200,CMF_AIMDIRECTION)
	  PLTR E 0 A_CustomMissile("TrapPoison",28,0,20,CMF_AIMDIRECTION)
      PLTR E 3 A_CustomMissile("TrapPoison",28,0,210,CMF_AIMDIRECTION)
	  PLTR E 0 A_CustomMissile("TrapPoison",28,0,30,CMF_AIMDIRECTION)
      PLTR E 3 A_CustomMissile("TrapPoison",28,0,220,CMF_AIMDIRECTION)
	  PLTR E 0 A_CustomMissile("TrapPoison",28,0,40,CMF_AIMDIRECTION)
      PLTR E 3 A_CustomMissile("TrapPoison",28,0,230,CMF_AIMDIRECTION)
	  PLTR E 0 A_CustomMissile("TrapPoison",28,0,50,CMF_AIMDIRECTION)
      PLTR E 3 A_CustomMissile("TrapPoison",28,0,240,CMF_AIMDIRECTION)
	  PLTR E 0 A_CustomMissile("TrapPoison",28,0,60,CMF_AIMDIRECTION)
      PLTR E 3 A_CustomMissile("TrapPoison",28,0,250,CMF_AIMDIRECTION)
	  PLTR E 0 A_CustomMissile("TrapPoison",28,0,70,CMF_AIMDIRECTION)
      PLTR E 3 A_CustomMissile("TrapPoison",28,0,260,CMF_AIMDIRECTION)
	  PLTR E 0 A_CustomMissile("TrapPoison",28,0,80,CMF_AIMDIRECTION)
      PLTR E 3 A_CustomMissile("TrapPoison",28,0,270,CMF_AIMDIRECTION)
	  PLTR E 0 A_PlaySound("Daedabus/Chem")
	  PLTR E 0 A_CustomMissile("TrapPoison",28,0,90,CMF_AIMDIRECTION)
      PLTR E 3 A_CustomMissile("TrapPoison",28,0,280,CMF_AIMDIRECTION)
	  PLTR E 0 A_CustomMissile("TrapPoison",28,0,100,CMF_AIMDIRECTION)
      PLTR E 3 A_CustomMissile("TrapPoison",28,0,290,CMF_AIMDIRECTION)
	  PLTR E 0 A_CustomMissile("TrapPoison",28,0,110,CMF_AIMDIRECTION)
      PLTR E 3 A_CustomMissile("TrapPoison",28,0,300,CMF_AIMDIRECTION)
	  PLTR E 0 A_CustomMissile("TrapPoison",28,0,120,CMF_AIMDIRECTION)
      PLTR E 3 A_CustomMissile("TrapPoison",28,0,310,CMF_AIMDIRECTION)
	  PLTR E 0 A_CustomMissile("TrapPoison",28,0,130,CMF_AIMDIRECTION)
      PLTR E 3 A_CustomMissile("TrapPoison",28,0,320,CMF_AIMDIRECTION)
	  PLTR E 0 A_CustomMissile("TrapPoison",28,0,140,CMF_AIMDIRECTION)
      PLTR E 3 A_CustomMissile("TrapPoison",28,0,330,CMF_AIMDIRECTION)
	  PLTR E 0 A_CustomMissile("TrapPoison",28,0,150,CMF_AIMDIRECTION)
      PLTR E 3 A_CustomMissile("TrapPoison",28,0,340,CMF_AIMDIRECTION)
	  PLTR E 0 A_CustomMissile("TrapPoison",28,0,160,CMF_AIMDIRECTION)
      PLTR E 3 A_CustomMissile("TrapPoison",28,0,350,CMF_AIMDIRECTION)
	  PLTR E 0 A_CustomMissile("TrapPoison",28,0,170,CMF_AIMDIRECTION)
      Goto Spawn+1
   Death:
      TNT1 A 0
      Stop
   }
}

ACTOR TrapPoison : PoisonEleBreath
{
    Radius 10
    Height 10
	Scale 0.6
	Speed 18
	Species "Player"
	DamageType "Marine"
    +THRUSPECIES
	States
    {
    Spawn:
        TRPS ABCDEFGDFEG 3 A_Explode(18,68)
    Death:
		TRPS CCBBAA 1 A_FadeOut(0.15)
        Stop
		}
}

ACTOR ChaosSphere : CustomInventory
{
  +FLOATBOB
  +COUNTITEM
  -FLOAT
  Inventory.PickupSound "powerups/chaos"
  Inventory.PickupMessage "\c[a6]Chaos Sphere"
  States
  {
  Spawn:
     TNT1 A 0 A_CustomMissile ("GreenSparkleSpawner", 0, 0, random(0,-360), 2, random(0,360))
     CHSP AAAABBBB 1 Bright A_SpawnItem("GreenSphereFlare",0,38)
     TNT1 A 0 A_CustomMissile ("GreenSparkleSpawner", 0, 0, random(0,-360), 2, random(0,360))
     CHSP CCCCDDDD 1 Bright A_SpawnItem("GreenSphereFlare",0,38)
     Loop
  Pickup:
	 TNT1 A 0 A_GiveInventory("ChaosSphereProtection",1)
	 TNT1 A 0 A_GiveInventory("ChaosSpherePlayerGlow",1)
	 Stop
}
}

Actor ChaosSphereProtection : PowerProtection{DamageFactor "Normal", 0.25 +NORADIUSDMG Powerup.Duration -8}

ACTOR ProtectionSphere : CustomInventory
{
  +FLOATBOB
  +COUNTITEM
  -FLOAT
  Inventory.PickupSound "powerups/protection"
  Inventory.PickupMessage "Protection Sphere"
  States
  {
  Spawn:
     TNT1 A 0 A_CustomMissile ("YellowSparkleSpawner", 0, 0, random(0,-360), 2, random(0,360))
     LFS9 AAAABBBBCCCC 1 Bright A_SpawnItem("YellowSphereFlare",0,38)
     TNT1 A 0 A_CustomMissile ("YellowSparkleSpawner", 0, 0, random(0,-360), 2, random(0,360))
     LFS9 DDDDEEEEFFFF 1 Bright A_SpawnItem("YellowSphereFlare",0,38)
     Loop
  Pickup:
	 TNT1 A 0 A_GiveInventory("ProtectionGiver",1)
	 Stop
     }
}

Actor ProtectionEffect : PowerProtection{DamageFactor "Normal", 0.25 +NORADIUSDMG}

Actor ProtectionGiver: PowerupGiver
{
  Inventory.MaxAmount 0
  Powerup.Type ProtectionEffect
  Powerup.Color Orange 0.15
  Powerup.Duration -30
  +INVENTORY.AUTOACTIVATE
  +INVENTORY.ALWAYSPICKUP
  States
  {
  Spawn:
    NULL A 1 Bright
    Loop
  }
}

ACTOR NewDoomSphere : CustomInventory
{
  +FLOATBOB
  +COUNTITEM
  -FLOAT
  Inventory.PickupSound "powerups/damage"
  Inventory.PickupMessage "\c[d4]Doom Sphere"
  States
  {
  Spawn:
     TNT1 A 0 A_CustomMissile ("RedSparkleSpawner", 0, 0, random(0,-360), 2, random(0,360))
     D00M AAAABBBB 1 Bright A_SpawnItem("RedSphereFlare",0,38)
     TNT1 A 0 A_CustomMissile ("RedSparkleSpawner", 0, 0, random(0,-360), 2, random(0,360))
     D00M CCCCDDDD 1 Bright A_SpawnItem("RedSphereFlare",0,38)
     Loop
  Pickup:
	 TNT1 A 0 A_GiveInventory("PowerNewDoomSphere",1)
	 Stop
     }
}

Actor PowerNewDoomSphere : PowerDamage
{
DamageFActor "Normal", 4.0
Powerup.Duration -25
Powerup.Color RedMap
}

ACTOR ThunderSphere : CustomInventory
{
  +FLOATBOB
  +COUNTITEM
  -FLOAT
  Inventory.PickupSound "powerups/thunder"
  Inventory.PickupMessage "\c[l4]Thunder Sphere"
  States
  {
  Spawn:
     TNT1 A 0 A_CustomMissile ("YellowSparkleSpawner", 0, 0, random(0,-360), 2, random(0,360))
     THDS AAAABBBB 1 Bright A_SpawnItem("YellowSphereFlare",0,38)
     TNT1 A 0 A_CustomMissile ("YellowSparkleSpawner", 0, 0, random(0,-360), 2, random(0,360))
     THDS CCCCDDDD 1 Bright A_SpawnItem("YellowSphereFlare",0,38)
     Loop
  Pickup:
     TNT1 A 0
	 TNT1 A 0 //ACS_NamedExecute("Thunder Sphere Attack",0,0,0,0)
	 TNT1 A 0 A_GiveInventory("PowerThunderSphere",1)
	 Stop
     }
}

Actor PowerThunderSphere : PowerDamage
{
DamageFactor "Normal",1.0
Powerup.Duration -20
Powerup.Color GoldMap
}

ACTOR HolySphere : CustomInventory
{
  +FLOATBOB
  +COUNTITEM
  -FLOAT
  Inventory.PickupSound "powerups/holy"
  Inventory.PickupMessage "\c[t5]Holy Sphere"
  States
  {
  Spawn:
     TNT1 A 0 A_CustomMissile ("WhiteSparkleSpawner", 0, 0, random(0,-360), 2, random(0,360))
     HOLY AAAABBBB 1 Bright A_SpawnItem("WhiteSphereFlare",0,38)
     TNT1 A 0 A_CustomMissile ("WhiteSparkleSpawner", 0, 0, random(0,-360), 2, random(0,360))
     HOLY CCCCDDDD 1 Bright A_SpawnItem("WhiteSphereFlare",0,38)
     Loop
  Pickup:
     TNT1 A 0
	 TNT1 A 0 A_GiveInventory("UltraSphereHealth",1)
     TNT1 A 0 A_GiveInventory("RedArmorPickup",1)
	 TNT1 A 0 A_GiveInventory("PowerHolySphereDamage",1)
	 TNT1 A 0 A_GiveInventory("PowerHolySphereInvul",1)
	 Stop
     }
}

Actor PowerHolySphereDamage : PowerDamage
{
DamageFactor "Normal",4.0
Powerup.Duration -30
}

ACTOR PowerHolySphereInvul : PowerupGiver
{
	 +INVENTORY.AUTOACTIVATE
	 +INVENTORY.ALWAYSPICKUP
	 Inventory.MaxAmount 0
	 Powerup.Duration -30
	 Powerup.Type "Invulnerable"
	 Powerup.Mode Reflective
	 Powerup.Color InverseMap
}

ACTOR TerrorSphere : CustomInventory
{
  +FLOATBOB
  +COUNTITEM
  -FLOAT
  Inventory.PickupSound "powerups/terror"
  Inventory.PickupMessage "\c[n6]Terror Sphere"
  States
  {
  Spawn:
     TNT1 A 0 A_CustomMissile ("PurpleSparkleSpawner", 0, 0, random(0,-360), 2, random(0,360))
     TRSP AAAABBBB 1 Bright A_SpawnItem("PurpleSphereFlare",0,38)
     TNT1 A 0 A_CustomMissile ("PurpleSparkleSpawner", 0, 0, random(0,-360), 2, random(0,360))
     TRSP CCCC 1 Bright A_SpawnItem("PurpleSphereFlare",0,38)
     Loop
  Pickup:
     TNT1 A 0
	 TNT1 A 0 A_JumpIfInventory("HasConfusionRune",1,"Nope")
	 TNT1 A 0 A_GiveInventory("PowerTerrorSphere",1)
	 Stop
  Nope:
	 TRSP A 1 Bright
	 Stop
     }
}

Actor PowerTerrorSphere : PowerupGiver
{
  Inventory.MaxAmount 0
  Powerup.Color Purple 0.35
  Powerup.Duration -30
  Powerup.Type Frightener
  +INVENTORY.AUTOACTIVATE
  +INVENTORY.ALWAYSPICKUP
  States
  {
  Spawn:
    ROWL A 1 Bright
    Loop
  }
}

ACTOR FateSphere : CustomInventory
{
  +FLOATBOB
  +COUNTITEM
  -FLOAT
  Inventory.PickupSound "powerups/fate"
  Inventory.PickupMessage "\c[o7]Fate Sphere"
  States
  {
  Spawn:
     TNT1 A 0 A_CustomMissile ("BlueSparkleSpawner", 0, 0, random(0,-360), 2, random(0,360))
     FASP AAAABBBB 1 Bright A_SpawnItem("BlueSphereFlare",0,38)
     TNT1 A 0 A_CustomMissile ("BlueSparkleSpawner", 0, 0, random(0,-360), 2, random(0,360))
     FASP CCCCDDDD 1 Bright A_SpawnItem("BlueSphereFlare",0,38)
     Loop
  Pickup:
     TNT1 A 0
	 TNT1 A 0 A_JumpIfInventory("HasAbsorptionRune",1,2)
	 TNT1 A 0 A_GiveInventory("PowerFateSphere",1)
	 TNT1 A 0 A_GiveInventory("PowerFateSphereInvul",1)
	 TNT1 A 0 A_GiveInventory("PowerFateSphereProtect",1)
	 Stop
}
}

Actor PowerFateSphere : PowerReflection
{
Powerup.Duration -35
}

ACTOR PowerFateSphereInvul : PowerupGiver
{
+INVENTORY.AUTOACTIVATE
+INVENTORY.ALWAYSPICKUP
Inventory.MaxAmount 0
Powerup.Duration -35
Powerup.Type "Invulnerable"
Powerup.Color BlueMap
}

Actor PowerFateSphereProtect : PowerProtection
{
	DamageFactor "Normal", 5.0
	Powerup.Duration -35
}

ACTOR RevengeSphere : CustomInventory
{
  +FLOATBOB
  +COUNTITEM
  -FLOAT
  Inventory.PickupSound "powerups/revenge"
  Inventory.PickupMessage "\c[l6]Revenge Sphere"
  States
  {
  Spawn:
     TNT1 A 0 A_CustomMissile ("YellowSparkleSpawner", 0, 0, random(0,-360), 2, random(0,360))
     RVSP AAAABBBB 1 Bright A_SpawnItem("YellowSphereFlare",0,38)
     TNT1 A 0 A_CustomMissile ("YellowSparkleSpawner", 0, 0, random(0,-360), 2, random(0,360))
     RVSP CCCCDDDD 1 Bright A_SpawnItem("YellowSphereFlare",0,38)
     Loop
  Pickup:
     TNT1 A 0
	 TNT1 A 0 A_JumpIfInventory("HasRevengeRune",1,"Nope")
	 TNT1 A 0 A_GiveInventory("PowerRevengeSphere",1)
	 Stop
  Nope:
	 RVSP A 1 Bright
	 Stop
     }
}

Actor PowerRevengeSphere : PowerDamage
{
DamageFactor "Normal",1.0
Powerup.Duration -30
Powerup.Color Orange 0.35
}

Actor PowerRevengeProtection1 : PowerProtection
{
	DamageFactor Normal, 0.75
	+INVENTORY.HUBPOWER
	+INVENTORY.PERSISTENTPOWER
	Powerup.Duration 0x7FFFFFFF
}

Actor PowerRevengeProtection2 : PowerRevengeProtection1
{
	DamageFactor Normal, 0.45
}

Actor PowerRevengeProtection3 : PowerRevengeProtection1
{
	DamageFactor Normal, 0.15
	+NORADIUSDMG
}

ACTOR AnnihilationSphere : CustomInventory
{
  +FLOATBOB
  +COUNTITEM
  -FLOAT
  Inventory.PickupSound "powerups/annihilation"
  Inventory.PickupMessage "\c[r5]Annihilation Sphere"
  States
  {
  Spawn:
     TNT1 A 0 A_CustomMissile ("WhiteSparkleSpawner", 0, 0, random(0,-360), 2, random(0,360))
     ANSP AAAABBBB 1 Bright A_SpawnItem("WhiteSphereFlare",0,38)
     TNT1 A 0 A_CustomMissile ("WhiteSparkleSpawner", 0, 0, random(0,-360), 2, random(0,360))
     ANSP CCCCDDDD 1 Bright A_SpawnItem("WhiteSphereFlare",0,38)
     Loop
  Pickup:
     TNT1 A 0
	 TNT1 A 0 A_GiveInventory("PowerAnnihilationSphere",1)
	 Stop
     }
}

Actor PowerAnnihilationSphere : PowerDamage
{
DamageFactor "Normal",1.0
Powerup.Duration -35
Powerup.Color Black 0.5
}

ACTOR EpicSphere : CustomInventory
{
  +FLOATBOB
  +COUNTITEM
  -FLOAT
  Inventory.PickupSound "powerups/epic"
  Inventory.PickupMessage "\c[m6]Epic Sphere"
  States
  {
  Spawn:
     TNT1 A 0 A_CustomMissile ("RedSparkleSpawner", 0, 0, random(0,-360), 2, random(0,360))
     EPSP AAAABBBB 1 Bright A_SpawnItem("RedSphereFlare",0,38)
     TNT1 A 0 A_CustomMissile ("RedSparkleSpawner", 0, 0, random(0,-360), 2, random(0,360))
     EPSP CCCCDDDD 1 Bright A_SpawnItem("RedSphereFlare",0,38)
     Loop
  Pickup:
     TNT1 A 0
	 TNT1 A 1 A_JumpIf(ACS_NamedExecuteWithResult("Epic Sphere Pickup Conditions",0,0,0) == 1 ,"Nope")
	 TNT1 A 0 A_GiveInventory("EpicBlade",1)
	 TNT1 A 0 ACS_NamedExecuteAlways("Epic Sphere Blade Selection",0,0,0,0)
	 TNT1 A 0 A_GiveInventory("PowerEpicSphere",1)
	 TNT1 A 0 A_GiveInventory("PowerEpicSphereRegen",1)
	 Stop
  Nope:
	 EPSP A 1 Bright
	 Stop
     }
}

Actor PowerEpicSphere : PowerProtection
{
DamageFactor "Normal",0.44
Powerup.Duration -55
Powerup.Color Red 0.5
+NORADIUSDMG
}

Actor PowerEpicSphereRegen : PowerRegeneration { Powerup.Duration -55 }

ACTOR WickedSphere : CustomInventory
{
  +FLOATBOB
  +COUNTITEM
  -FLOAT
  Inventory.PickupSound "powerups/wicked"
  Inventory.PickupMessage "\c[m4]Wicked Sphere"
  States
  {
  Spawn:
     TNT1 A 0 A_CustomMissile ("GreenSparkleSpawner", 0, 0, random(0,-360), 2, random(0,360))
     WKSP AAAABBBB 1 Bright A_SpawnItem("GreenSphereFlare",0,38)
     TNT1 A 0 A_CustomMissile ("GreenSparkleSpawner", 0, 0, random(0,-360), 2, random(0,360))
     WKSP CCCCDDDD 1 Bright A_SpawnItem("GreenSphereFlare",0,38)
     Loop
  Pickup:
     TNT1 A 0
	 TNT1 A 0 A_GiveInventory("PowerWickedSphere",1)
	 TNT1 A 0 A_JumpIfInventory("HasAbsorptionRune",1,2)
	 TNT1 A 0 A_GiveInventory("PowerWickedSphereDrain",1)
	 TNT1 A 0
	 Stop
     }
}

Actor PowerWickedSphereDrain : PowerDrain
{
	Powerup.Duration -35
	Powerup.Color Green 0.20
}

Actor PowerWickedSphere : PowerProtection
{
	DamageFactor "Normal", 1.00
	Powerup.Duration -35
	Powerup.Color Green 0.20
}

ACTOR LuckSphere : CustomInventory
{
  +FLOATBOB
  +COUNTITEM
  -FLOAT
  Inventory.PickupSound "powerups/luck"
  Inventory.PickupMessage "\c[e9]Luck Sphere"
  States
  {
  Spawn:
     TNT1 A 0 A_CustomMissile ("YellowSparkleSpawner", 0, 0, random(0,-360), 2, random(0,360))
     LUSP AAAABBBB 1 Bright A_SpawnItem("YellowSphereFlare",0,38)
     TNT1 A 0 A_CustomMissile ("YellowSparkleSpawner", 0, 0, random(0,-360), 2, random(0,360))
     LUSP CCCCDDDD 1 Bright A_SpawnItem("YellowSphereFlare",0,38)
     Loop
  Pickup:
     TNT1 A 0
	 TNT1 A 0 A_JumpIfInventory("LuckRune",1,"Nope")
	 TNT1 A 0 A_GiveInventory("PowerLuckSphere",1)
	 Stop
  Nope:
	 LUSP A 1
	 Stop
     }
}

Actor PowerLuckSphere : PowerDamage
{
DamageFactor "Normal",1.0
Powerup.Duration -30
Powerup.Color Yellow 0.5
}

ACTOR IgnoranceSphere : CustomInventory
{
  +FLOATBOB
  +COUNTITEM
  -FLOAT
  Inventory.PickupSound "powerups/ignorance"
  Inventory.PickupMessage "\c[f1]Ignorance Sphere"
  States
  {
  Spawn:
     TNT1 A 0 A_CustomMissile ("WhiteSparkleSpawner", 0, 0, random(0,-360), 2, random(0,360))
     INSP AAAABBBB 1 Bright A_SpawnItem("WhiteSphereFlare",0,38)
     TNT1 A 0 A_CustomMissile ("WhiteSparkleSpawner", 0, 0, random(0,-360), 2, random(0,360))
     INSP CCCCDDDD 1 Bright A_SpawnItem("WhiteSphereFlare",0,38)
     Loop
  Pickup:
     TNT1 A 0
	 TNT1 A 0 A_GiveInventory("PowerIgnoranceSphere",1)
	 Stop
     }
}

Actor PowerIgnoranceSphere : PowerInvisibility
{
+GHOST
+CANTSEEK
Powerup.Strength 100
Powerup.Duration -30
}

ACTOR TerminatorSphere : CustomInventory
{
+FLOATBOB
+COUNTITEM
-FLOAT
Inventory.PickupSound "powerups/terminator"
Inventory.PickupMessage "\c[i8]Terminator Sphere"
States
{
  Spawn:
	TNT1 A 0 A_CustomMissile ("CyanSparkleSpawner", 0, 0, random(0,-360), 2, random(0,360))
	TCSE AAAABBBB 1 Bright A_SpawnItem("TerminatorSphereFlare",0,38)
	TNT1 A 0 A_CustomMissile ("CyanSparkleSpawner", 0, 0, random(0,-360), 2, random(0,360))
	TCSE CCCCDDDD 1 Bright A_SpawnItem("TerminatorSphereFlare",0,38)
	Loop
  Pickup:
	TNT1 A 0 A_GiveInventory("PowerTerminatorSphere",1)
	Stop
}
}

Actor PowerTerminatorSphere : PowerDamage
{
DamageFactor "Normal",1.0
Powerup.Duration -20
Powerup.Color Cyan 0.2
}

ACTOR SpreadSphere : CustomInventory
{
  +FLOATBOB
  +COUNTITEM
  -FLOAT
  Inventory.PickupSound "powerups/spread"
  Inventory.PickupMessage "\c[i7]Spread Sphere"
  States
  {
  Spawn:
     TNT1 A 0 A_CustomMissile ("RedSparkleSpawner", 0, 0, random(0,-360), 2, random(0,360))
     RGSP AAAABBBB 1 Bright A_SpawnItem("RedSphereFlare",0,38)
     TNT1 A 0 A_CustomMissile ("RedSparkleSpawner", 0, 0, random(0,-360), 2, random(0,360))
     RGSP CCCCDDDD 1 Bright A_SpawnItem("RedSphereFlare",0,38)
     TNT1 A 0 A_CustomMissile ("RedSparkleSpawner", 0, 0, random(0,-360), 2, random(0,360))
     RGSP CCCCBBBB 1 Bright A_SpawnItem("RedSphereFlare",0,38)
     Loop
  Pickup:
     TNT1 A 0
	 TNT1 A 0 A_JumpIfInventory("HasSpreadRune",1,"Nope")
	 TNT1 A 0 A_GiveInventory("PowerSpreadSphere",1)
	 Stop
  Nope:
	 RGSP A 1 Bright
	 Stop
}
}

Actor PowerSpreadSphere : PowerSpread
{
	Powerup.Duration -25
	Powerup.Color DarkRed 0.5
}

ACTOR RandomSphere : CustomInventory
{
  +FLOATBOB
  +COUNTITEM
  -FLOAT
  +INVENTORY.ALWAYSPICKUP
  Inventory.PickupSound "powerups/random"
  Inventory.PickupMessage "Random Sphere"
  //Scale 0.76
  States
  {
  Spawn:
     TRSP AAAAA 1 Bright A_SpawnItem("PurpleSphereFlare",0,38)//Terror Sphere
	 FASP AAAAA 1 Bright A_SpawnItem("BlueSphereFlare",0,38)//Fate Sphere
	 HOLY AAAAA 1 Bright A_SpawnItem("WhiteSphereFlare",0,38)//Holy Sphere
	 THDS AAAAA 1 Bright A_SpawnItem("YellowSphereFlare",0,38)//Thunder Sphere
	 D00M AAAAA 1 Bright A_SpawnItem("RedSphereFlare",0,38)//Doom Sphere
	 PINS AAAAA 1 Bright A_SpawnItem("BlueSphereFlare",0,38)//Blur Sphere
	 RVSP AAAAA 1 Bright A_SpawnItem("YellowSphereFlare",0,38)//Revenge Sphere
	 CARN AAAAA 1 Bright A_SpawnItem("RedSphereFlare",0,38)//Unbelieveability Sphere
	 PINV AAAAA 1 Bright A_SpawnItem("GreenSphereFlare",0,38)//Invulnerability Sphere
	 LFS9 AAAAA 1 Bright A_SpawnItem("YellowSphereFlare",0,38)//Protection Sphere
	 SOUL AAAAA 1 Bright A_SpawnItem("BlueSphereFlare",0,38)//Soul Sphere
	 MEGA AAAAA 1 Bright A_SpawnItem("MegaSphereFlare",0,38)// Mega Sphere
	 ARSP AAAAA 1 Bright A_SpawnItem("PurpleSphereFlare",0,38)//Ultra Sphere
	 SINV AAAAA 1 Bright A_SpawnItem("YellowSphereFlare",0,38)// Haste Sphere
	 LISP AAAAA 1 Bright A_SpawnItem("BlueSphereFlare",0,38)//Life Sphere
	 ANSP AAAAA 1 Bright A_SpawnItem("WhiteSphereFlare",0,38)//Annihilation Sphere
	 EPSP AAAAA 1 Bright A_SpawnItem("RedSphereFlare",0,38)//Epic Sphere
	 WKSP AAAAA 1 Bright A_SpawnItem("GreenSphereFlare",0,38)//Wicked Sphere
	 LUSP AAAAA 1 Bright A_SpawnItem("YellowSphereFlare",0,38)// Luck Sphere
     INSP AAAAA 1 Bright A_SpawnItem("WhiteSphereFlare",0,38)// Ignorance Sphere
     TCSE AAAAA 1 Bright A_SpawnItem("TerminatorSphereFlare",0,38)// Terminator Sphere
     RGSP AAAAA 1 Bright A_SpawnItem("RedSphereFlare",0,38)// Spread Sphere
	 CHSP AAAAA 1 Bright A_SpawnItem("GreenSphereFlare",0,38)//Chaos Sphere
     ISSP AAAAA 1 Bright A_SpawnItem("RedSphereFlare",0,38)// Insanity Sphere
	 F2SP AAAAA 1 Bright A_SpawnItem("PurpleSphereFlare",0,38)//Flight Sphere
	 R2SP AAAAA 1 Bright A_SpawnItem("OrangeSphereFlare",0,38)//Rage Sphere
	 RDSP AAAAA 1 Bright A_SpawnItem("GreenSphereFlare",0,38)//BFG Sphere
	 AM2P AAAAA 1 Bright A_SpawnItem("PurpleSphereFlare",0,38)//Armor Sphere
	 RLSP AAAAA 1 Bright A_SpawnItem("OrangeSphereFlare",0,38)//Explosion Sphere
	 SVSP AAAAA 1 Bright A_SpawnItem("RedSphereFlare",0,38)//Survival Sphere 
	 CHMP AAAAA 1 Bright A_SpawnItem("GreenSphereFlare",0,38)//Chemical Sphere
	 PS0B KKKKK 1 Bright A_SpawnItem("BlueSphereFlare",0,38)//Summon Sphere
     Loop
  Pickup:
     TNT1 A 0
	 TNT1 A 0 ACS_NamedExecute("Random Sphere",0,0,0,0)
	 Stop
}
}

ACTOR ProfaneSpiritActivated
{
   Radius 0
   Height 0
   +NOGRAVITY
   +NOCLIP
   Obituary "%o was damaged by %k's Profane Spirit."
   RenderStyle None
   States
   {
   Spawn:
      PRFS A 16
      PRFS A 0 A_BFGSpray("ProfaneSpiritAttack",48,10)
      Stop
   }
}

ACTOR ProfaneSpiritAttack
{
   Radius 20
   Height 16
   +NOGRAVITY
   +NOCLIP
   RenderStyle SoulTrans
   Alpha 0.6
   States
   {
   Spawn:
      PRFS C 7 Bright
      PRFS D 6 Bright
      PRFS EFGHI 5 Bright
      Stop
   }
}

Actor ConfusionRuneTerror : PowerFrightener
{
	+INVENTORY.HUBPOWER
	+INVENTORY.PERSISTENTPOWER
	Powerup.Duration 0x7FFFFFFF
	Powerup.Color Purple 0.15
}

Actor ConfusionRuneIgnorance : PowerInvisibility
{
	+GHOST
	+CANTSEEK
	+INVENTORY.HUBPOWER
	+INVENTORY.PERSISTENTPOWER
	Powerup.Duration 0x7FFFFFFF
	Powerup.Strength 100
	Powerup.Color Pink 0.15
}

Actor NewHighJumpRune : PowerHighJump
{
	+INVENTORY.HUBPOWER
	+INVENTORY.PERSISTENTPOWER
	Powerup.Duration 0x7FFFFFFF
}

Actor NewStrengthRune : PowerDamage
{
	DamageFactor "Normal", 2.5
	+INVENTORY.HUBPOWER
	+INVENTORY.PERSISTENTPOWER
	Powerup.Duration 0x7FFFFFFF
}

Actor NewRageRune : PowerDoubleFiringSpeed
{
	+INVENTORY.HUBPOWER
	+INVENTORY.PERSISTENTPOWER
	Powerup.Duration 0x7FFFFFFF
}

Actor NewResistanceRune : PowerProtection
{
	DamageFactor Normal, 0.4
	+NORADIUSDMG
	+INVENTORY.HUBPOWER
	+INVENTORY.PERSISTENTPOWER
	Powerup.Duration 0x7FFFFFFF
}

Actor NewSpreadRune : PowerSpread
{
	+INVENTORY.HUBPOWER
	+INVENTORY.PERSISTENTPOWER
	Powerup.Duration 0x7FFFFFFF
}

Actor NewHasteRune: PowerSpeed
{
	Speed 1.65
	+INVENTORY.HUBPOWER
	+INVENTORY.PERSISTENTPOWER
	Powerup.Duration 0x7FFFFFFF
}

Actor AbsorptionDrain: PowerDrain
{
	+INVENTORY.HUBPOWER
	+INVENTORY.PERSISTENTPOWER
	Powerup.Duration 0x7FFFFFFF
	//Powerup.Strength 0.05 not working
}

Actor AbsorptionReflection: PowerReflection
{
	+INVENTORY.HUBPOWER
	+INVENTORY.PERSISTENTPOWER
	Powerup.Duration 0x7FFFFFFF
}

Actor ProsperityRuneArmor : NewMaxArmorBonus 
{
Inventory.Amount 1
Armor.MaxSaveAmount 1000
Inventory.PickupMessage ""
DamageFactor "Explosion", 0.5
Inventory.Icon "ARPRA0"
Armor.SavePercent 98
Armor.SaveAmount 1
States
{
  Spawn:
	TNT1 A 1
    Stop
}
}

Actor ProsperityRuneAmmunition : CustomInventory
{  
Inventory.Amount 1
Inventory.MaxAmount 0
+ALWAYSPICKUP
States
{
  Spawn:
    TNT1 A 1
    Stop
  Pickup:
  	NULL A 1
	NULL A 1 A_GiveInventory("BulletMag",30)
	NULL A 1 A_GiveInventory("NewShell",12)
	NULL A 1 A_GiveInventory("Missile",6)
	NULL A 1 A_GiveInventory("NewCell",45)
	NULL A 1 A_GiveInventory("DemonAmmo",20)
	NULL A 1 A_GiveInventory("EradicationCell",2)
	NULL A 1 A_GiveInventory("HandGrenadeAmmo",1)
	NULL A 1 A_GiveInventory("MineAmmo",1)
	NULL A 1 A_GiveInventory("LDemonAmmo",6)
	NULL A 1 A_GiveInventory("LegendaryBulletMag",4)
	NULL A 1 A_GiveInventory("LegendaryShell",2)
	NULL A 1 A_GiveInventory("DCell",1)
	NULL A 1 A_GiveInventory("UtilityAmmo",15)
	NULL A 1 A_GiveInventory("FieldCommandAmmo",6)
	NULL A 1 A_GiveInventory("LegendaryChainsawAmmo",15)
	//Weapon Magazines
	NULL A 1 A_GiveInventory("PistolMagazine",8)
	NULL A 1 A_GiveInventory("DTPistolMagazine",10)
	NULL A 1 A_GiveInventory("ShotgunMagazine",4)
	NULL A 1 A_GiveInventory("SSGShell",2)
	NULL A 1 A_GiveInventory("QuadShell",4)
	NULL A 1 A_GiveInventory("HexaShell",6)
	NULL A 1 A_GiveInventory("ExpSSGShell",2)
	NULL A 1 A_GiveInventory("V25ShotgunDrum",8)
	NULL A 1 A_GiveInventory("ARMagazine",24)
	NULL A 1 A_GiveInventory("MP40Mag",16)
	NULL A 1 A_GiveInventory("NewRocketDrum",3)
	NULL A 1 A_GiveInventory("NewGrenadeDrum",3)
	NULL A 1 A_GiveInventory("DTRocketDrum",4)
	NULL A 1 A_GiveInventory("NewPlasmaCell",20)
	NULL A 1 A_GiveInventory("LightningRifleCell",20)
	NULL A 1 A_GiveInventory("NewCellCharge",20)
	NULL A 1 A_GiveInventory("DemonMagazine",24)
	NULL A 1 A_GiveInventory("DemonAmmoCharge",20)
	NULL A 1 A_GiveInventory("EXPCellCharge",15)
	NULL A 1 A_GiveInventory("SniperRifleAmmo",3)
	Stop
}
}

ACTOR LuckRuneItem : CustomInventory
{
+FLOATBOB
+COUNTITEM
-FLOAT
Inventory.PickupSound ""
Inventory.PickupMessage "\c[m4]Luck Rune"
var int user_timer;
States
{
  Spawn:
	TNT1 A 0 A_JumpIf(user_timer >= 210,"Gone")
	TNT1 A 0 A_SetUserVar("user_timer",user_timer+1)
	TNT1 A 0 A_CustomMissile("RedSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 A 10 Bright
	TNT1 A 0 A_CustomMissile("GreenSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 A 10 Bright
	Loop
  Pickup:
	TNT1 A 0
	TNT1 A 0 A_JumpIfInventory("HasRune",1,"Nope")
	TNT1 A 0 ACS_NamedExecuteAlways("Rune Pickup",0,0,0,0)
	Stop
  Nope:
	LUSP A 1
	Stop
  Gone:
	TNT1 A 0
	TNT1 A 1 A_SpawnItemEx("TeleportFog")
	Stop
}
}

ACTOR LuckRuneItemMap : LuckRuneItem
{
States
{
  Spawn:
	TNT1 A 0 A_CustomMissile("RedSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 A 10 Bright
	TNT1 A 0 A_CustomMissile("GreenSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 A 10 Bright
	Loop
}
}

ACTOR RegenerationRuneItem : LuckRuneItem
{
Inventory.PickupMessage "\c[I7]Regeneration Rune"
Scale 0.8
States
{
  Spawn:
	TNT1 A 0 A_JumpIf(user_timer >= 210,"Gone")
	TNT1 A 0 A_SetUserVar("user_timer",user_timer+1)
	TNT1 A 0 A_CustomMissile("RedSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 B 10 Bright
	TNT1 A 0 A_CustomMissile("GreenSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 B 10 Bright
	Loop
  Pickup:
	TNT1 A 0
	TNT1 A 0 A_JumpIfInventory("HasRune",1,"Nope")
	TNT1 A 0 ACS_NamedExecuteAlways("Rune Pickup",0,1,0,0)
	Stop

}
}

ACTOR RegenerationRuneItemMap : RegenerationRuneItem
{
States
{
  Spawn:
	TNT1 A 0 A_CustomMissile("RedSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 B 10 Bright
	TNT1 A 0 A_CustomMissile("GreenSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 B 10 Bright
	Loop
}
}

ACTOR StrengthRuneItem : LuckRuneItem
{
Inventory.PickupMessage "\c[Q3]Strength Rune"
Scale 1.0
States
{
  Spawn:
	TNT1 A 0 A_JumpIf(user_timer >= 210,"Gone")
	TNT1 A 0 A_SetUserVar("user_timer",user_timer+1)
	TNT1 A 0 A_CustomMissile("RedSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 C 10 Bright
	TNT1 A 0 A_CustomMissile("GreenSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 C 10 Bright
	Loop
  Pickup:
	TNT1 A 0
	TNT1 A 0 A_JumpIfInventory("HasRune",1,"Nope")
	TNT1 A 0 ACS_NamedExecuteAlways("Rune Pickup",0,2,0,0)
	Stop
}
}

ACTOR StrengthRuneItemMap : StrengthRuneItem
{
States
{
  Spawn:
	TNT1 A 0 A_CustomMissile("RedSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 C 10 Bright
	TNT1 A 0 A_CustomMissile("GreenSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 C 10 Bright
	Loop
}
}

ACTOR ResistanceRuneItem : LuckRuneItem
{
Inventory.PickupMessage "\c[Z4]Resistance Rune"
Scale 1.0
States
{
  Spawn:
	TNT1 A 0 A_JumpIf(user_timer >= 210,"Gone")
	TNT1 A 0 A_SetUserVar("user_timer",user_timer+1)
	TNT1 A 0 A_CustomMissile("RedSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 D 10 Bright
	TNT1 A 0 A_CustomMissile("GreenSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 D 10 Bright
	Loop
  Pickup:
	TNT1 A 0
	TNT1 A 0 A_JumpIfInventory("HasRune",1,"Nope")
	TNT1 A 0 ACS_NamedExecuteAlways("Rune Pickup",0,3,0,0)
	Stop
}
}

ACTOR ResistanceRuneItemMap : ResistanceRuneItem
{
States
{
  Spawn:
	TNT1 A 0 A_CustomMissile("RedSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 D 10 Bright
	TNT1 A 0 A_CustomMissile("GreenSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 D 10 Bright
	Loop
}
}

ACTOR RageRuneItem : LuckRuneItem
{
Inventory.PickupMessage "\c[C4]Rage Rune"
Scale 1.0
States
{
  Spawn:
	TNT1 A 0 A_JumpIf(user_timer >= 210,"Gone")
	TNT1 A 0 A_SetUserVar("user_timer",user_timer+1)
	TNT1 A 0 A_CustomMissile("RedSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 E 10 Bright
	TNT1 A 0 A_CustomMissile("GreenSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 E 10 Bright
	Loop
  Pickup:
	TNT1 A 0
	TNT1 A 0 A_JumpIfInventory("HasRune",1,"Nope")
	TNT1 A 0 ACS_NamedExecuteAlways("Rune Pickup",0,4,0,0)
	Stop
}
}

ACTOR RageRuneItemMap : RageRuneItem
{
States
{
  Spawn:
	TNT1 A 0 A_CustomMissile("RedSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 E 10 Bright
	TNT1 A 0 A_CustomMissile("GreenSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 E 10 Bright
	Loop
}
}

ACTOR HasteRuneItem : LuckRuneItem
{
Inventory.PickupMessage "\c[V1]Haste Rune"
Scale 1.0
States
{
  Spawn:
	TNT1 A 0 A_JumpIf(user_timer >= 210,"Gone")
	TNT1 A 0 A_SetUserVar("user_timer",user_timer+1)
	TNT1 A 0 A_CustomMissile("RedSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 F 10 Bright
	TNT1 A 0 A_CustomMissile("GreenSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 F 10 Bright
	Loop
  Pickup:
	TNT1 A 0
	TNT1 A 0 A_JumpIfInventory("HasRune",1,"Nope")
	TNT1 A 0 ACS_NamedExecuteAlways("Rune Pickup",0,5,0,0)
	Stop
}
}

ACTOR HasteRuneItemMap : HasteRuneItem
{
States
{
  Spawn:
	TNT1 A 0 A_CustomMissile("RedSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 F 10 Bright
	TNT1 A 0 A_CustomMissile("GreenSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 F 10 Bright
	Loop
}
}

ACTOR SpreadRuneItem : LuckRuneItem
{
Inventory.PickupMessage "\c[K8]Spread Rune"
Scale 1.0
States
{
  Spawn:
	TNT1 A 0 A_JumpIf(user_timer >= 210,"Gone")
	TNT1 A 0 A_SetUserVar("user_timer",user_timer+1)
	TNT1 A 0 A_CustomMissile("RedSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 H 10 Bright
	TNT1 A 0 A_CustomMissile("GreenSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 H 10 Bright
	Loop
  Pickup:
	TNT1 A 0
	TNT1 A 0 A_JumpIfInventory("HasRune",1,"Nope")
	TNT1 A 0 ACS_NamedExecuteAlways("Rune Pickup",0,6,0,0)
	Stop
}
}

ACTOR SpreadRuneItemMap : SpreadRuneItem
{
States
{
  Spawn:
	TNT1 A 0 A_CustomMissile("RedSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 H 10 Bright
	TNT1 A 0 A_CustomMissile("GreenSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 H 10 Bright
	Loop
}
}

ACTOR RevengeRuneItem : LuckRuneItem
{
Inventory.PickupMessage "\c[L6]Revenge Rune"
Scale 0.5
States
{
  Spawn:
	TNT1 A 0 A_JumpIf(user_timer >= 210,"Gone")
	TNT1 A 0 A_SetUserVar("user_timer",user_timer+1)
	TNT1 A 0 A_CustomMissile("RedSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 K 10 Bright
	TNT1 A 0 A_CustomMissile("GreenSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 K 10 Bright
	Loop
  Pickup:
	TNT1 A 0
	TNT1 A 0 A_JumpIfInventory("HasRune",1,"Nope")
	TNT1 A 0 ACS_NamedExecuteAlways("Rune Pickup",0,7,0,0)
	Stop
}
}

ACTOR RevengeRuneItemMap : RevengeRuneItem
{
States
{
  Spawn:
	TNT1 A 0 A_CustomMissile("RedSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 K 10 Bright
	TNT1 A 0 A_CustomMissile("GreenSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 K 10 Bright
	Loop
}
}

ACTOR SummonerRuneItem : LuckRuneItem
{
Inventory.PickupMessage "\c[D4]Summoner Rune"
Scale 0.75
States
{
  Spawn:
	TNT1 A 0 A_JumpIf(user_timer >= 210,"Gone")
	TNT1 A 0 A_SetUserVar("user_timer",user_timer+1)
	TNT1 A 0 A_CustomMissile("RedSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 L 10 Bright
	TNT1 A 0 A_CustomMissile("GreenSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 L 10 Bright
	Loop
  Pickup:
	TNT1 A 0
	TNT1 A 0 A_JumpIfInventory("HasRune",1,"Nope")
	TNT1 A 0 ACS_NamedExecuteAlways("Rune Pickup",0,8,0,0)
	Stop
}
}

ACTOR SummonerRuneItemMap : SummonerRuneItem
{
States
{
  Spawn:
	TNT1 A 0 A_CustomMissile("RedSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 L 10 Bright
	TNT1 A 0 A_CustomMissile("GreenSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 L 10 Bright
	Loop
}
}

ACTOR HighJumpRuneItem : LuckRuneItem
{
Inventory.PickupMessage "\c[Y2]High Jump Rune"
Scale 1.0
States
{
  Spawn:
	TNT1 A 0 A_JumpIf(user_timer >= 210,"Gone")
	TNT1 A 0 A_SetUserVar("user_timer",user_timer+1)
	TNT1 A 0 A_CustomMissile("RedSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 M 10 Bright
	TNT1 A 0 A_CustomMissile("GreenSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 M 10 Bright
	Loop
  Pickup:
	TNT1 A 0
	TNT1 A 0 A_JumpIfInventory("HasRune",1,"Nope")
	TNT1 A 0 ACS_NamedExecuteAlways("Rune Pickup",0,9,0,0)
	Stop
}
}

ACTOR HighJumpRuneItemMap : HighJumpRuneItem
{
States
{
  Spawn:
	TNT1 A 0 A_CustomMissile("RedSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 M 10 Bright
	TNT1 A 0 A_CustomMissile("GreenSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 M 10 Bright
	Loop
}
}

ACTOR TimeRunePickup : LuckRuneItem
{
Inventory.PickupMessage "\c[R5]Time Rune"
Scale 0.66
States
{
  Spawn:
	TNT1 A 0 A_JumpIf(user_timer >= 210,"Gone")
	TNT1 A 0 A_SetUserVar("user_timer",user_timer+1)
	TNT1 A 0 A_CustomMissile("RedSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 P 10 Bright
	TNT1 A 0 A_CustomMissile("GreenSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 P 10 Bright
	Loop
  Pickup:
	TNT1 A 0
	TNT1 A 0 A_JumpIfInventory("HasRune",1,"Nope")
	TNT1 A 0 ACS_NamedExecuteAlways("Rune Pickup",0,10,0,0)
	Stop
}
}

ACTOR TimeRunePickupMap : TimeRunePickup
{
States
{
  Spawn:
	TNT1 A 0 A_CustomMissile("RedSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 P 10 Bright
	TNT1 A 0 A_CustomMissile("GreenSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 P 10 Bright
	Loop
}
}

ACTOR ProsperityRuneItem : LuckRuneItem
{
Inventory.PickupMessage "\c[K5]Prosperity Rune"
Scale 1.0
States
{
  Spawn:
	TNT1 A 0 A_JumpIf(user_timer >= 210,"Gone")
	TNT1 A 0 A_SetUserVar("user_timer",user_timer+1)
	TNT1 A 0 A_CustomMissile("RedSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 O 10 Bright
	TNT1 A 0 A_CustomMissile("GreenSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 O 10 Bright
	Loop
  Pickup:
	TNT1 A 0
	TNT1 A 0 A_JumpIfInventory("HasRune",1,"Nope")
	TNT1 A 0 ACS_NamedExecuteAlways("Rune Pickup",0,13,0,0)
	Stop
}
}

ACTOR ProsperityRuneItemMap : ProsperityRuneItem
{
States
{
  Spawn:
	TNT1 A 0 A_CustomMissile("RedSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 O 10 Bright
	TNT1 A 0 A_CustomMissile("GreenSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 O 10 Bright
	Loop
}
}

ACTOR AbsorptionRuneItem : LuckRuneItem
{
Inventory.PickupMessage "\c[c4]Absorption Rune"
Scale 1.0
States
{
  Spawn:
	TNT1 A 0 A_JumpIf(user_timer >= 210,"Gone")
	TNT1 A 0 A_SetUserVar("user_timer",user_timer+1)
	TNT1 A 0 A_CustomMissile("RedSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 R 10 Bright
	TNT1 A 0 A_CustomMissile("GreenSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 R 10 Bright
	Loop
  Pickup:
	TNT1 A 0
	TNT1 A 0 A_JumpIfInventory("HasRune",1,"Nope")
	TNT1 A 0 ACS_NamedExecuteAlways("Rune Pickup",0,16,0,0)
	Stop
}
}

ACTOR AbsorptionRuneItemMap : AbsorptionRuneItem
{
States
{
  Spawn:
	TNT1 A 0 A_CustomMissile("RedSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 R 10 Bright
	TNT1 A 0 A_CustomMissile("GreenSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 R 10 Bright
	Loop
}
}

ACTOR ConfusionRuneItem : LuckRuneItem
{
Inventory.PickupMessage "\c[I3]Confusion Rune"
Scale 1.0
States
{
  Spawn:
	TNT1 A 0 A_JumpIf(user_timer >= 210,"Gone")
	TNT1 A 0 A_SetUserVar("user_timer",user_timer+1)
	TNT1 A 0 A_CustomMissile("RedSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 J 10 Bright
	TNT1 A 0 A_CustomMissile("GreenSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 J 10 Bright
	Loop
  Pickup:
	TNT1 A 0
	TNT1 A 0 A_JumpIfInventory("HasRune",1,"Nope")
	TNT1 A 0 ACS_NamedExecuteAlways("Rune Pickup",0,17,0,0)
	Stop
}
}

ACTOR ConfusionRuneItemMap : ConfusionRuneItem
{
States
{
  Spawn:
	TNT1 A 0 A_CustomMissile("RedSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 J 10 Bright
	TNT1 A 0 A_CustomMissile("GreenSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 J 10 Bright
	Loop
}
}

ACTOR LootingRuneItem : LuckRuneItem
{
Inventory.PickupMessage "\c[E2]Looting Rune"
Scale 1.0
States
{
  Spawn:
	TNT1 A 0 A_JumpIf(user_timer >= 210,"Gone")
	TNT1 A 0 A_SetUserVar("user_timer",user_timer+1)
	TNT1 A 0 A_CustomMissile("RedSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 S 10 Bright
	TNT1 A 0 A_CustomMissile("GreenSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 S 10 Bright
	Loop
  Pickup:
	TNT1 A 0
	TNT1 A 0 A_JumpIfInventory("HasRune",1,"Nope")
	TNT1 A 0 ACS_NamedExecuteAlways("Rune Pickup",0,18,0,0)
	Stop
}
}

ACTOR LootingRuneItemMap : LootingRuneItem
{
States
{
  Spawn:
	TNT1 A 0 A_CustomMissile("RedSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 S 10 Bright
	TNT1 A 0 A_CustomMissile("GreenSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 S 10 Bright
	Loop
}
}

ACTOR VeterancyRuneItem : LuckRuneItem
{
Inventory.PickupMessage "\c[W4]Veterancy Rune"
Scale 1.0
States
{
  Spawn:
	TNT1 A 0 A_JumpIf(user_timer >= 210,"Gone")
	TNT1 A 0 A_SetUserVar("user_timer",user_timer+1)
	TNT1 A 0 A_CustomMissile("RedSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 T 10 Bright
	TNT1 A 0 A_CustomMissile("GreenSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 T 10 Bright
	Loop
  Pickup:
	TNT1 A 0
	TNT1 A 0 A_JumpIfInventory("HasRune",1,"Nope")
	TNT1 A 0 ACS_NamedExecuteAlways("Rune Pickup",0,19,0,0)
	Stop
}
}

ACTOR VeterancyRuneItemMap : VeterancyRuneItem
{
States
{
  Spawn:
	TNT1 A 0 A_CustomMissile("RedSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 T 10 Bright
	TNT1 A 0 A_CustomMissile("GreenSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 T 10 Bright
	Loop
}
}

Actor AgilityRuneItem : LuckRuneItem 
{
Inventory.PickupMessage "\c[M5]Agility Rune"
States 
{
  Spawn:
	TNT1 A 0 A_CustomMissile("BlueSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 U 10 Bright
	TNT1 A 0 A_CustomMissile("BlueSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 U 10 Bright
	Loop
  Pickup:
	TNT1 A 0
	TNT1 A 0 A_JumpIfInventory("HasRune",1,"Nope")
	TNT1 A 0 ACS_NamedExecuteAlways("Rune Pickup",0,20,0,0)
	Stop
}
}

ACTOR AgilityRuneItemMap : AgilityRuneItem
{
States
{
  Spawn:
	TNT1 A 0 A_CustomMissile("RedSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 U 10 Bright
	TNT1 A 0 A_CustomMissile("GreenSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 U 10 Bright
	Loop
}
}

ACTOR LegendaryRunePickup : LuckRuneItem
{
ActiveSound "Pickups/Legruneidle"
Inventory.PickupMessage "\c[z3]Legendary Rune"
States
{
  Spawn:
	TNT1 A 0 A_JumpIf(user_timer >= 42,"Gone")
	TNT1 A 0 A_SetUserVar("user_timer",user_timer+1)
    TNT1 A 0 A_CustomMissile ("YellowSparkleSpawner", 0, 0, random(0,-360), 2, random(0,360))
    TNT1 A 0 A_LoopActiveSound
	LGRN AAAAAA 10 Bright A_CustomMissile ("LegendaryRuneFlameSpawner", -20, 0, random(0,-360), 2, random(0,360)) 
    Loop
  Pickup:
	TNT1 A 0
	TNT1 A 0 A_JumpIfInventory("HasRune",1,"Nope")
	TNT1 A 0 ACS_NamedExecuteAlways("Rune Pickup",0,11,0,0)
	Stop
}
}

ACTOR LegendaryRunePickupMap : LegendaryRunePickup
{
States
{
  Spawn:
    TNT1 A 0 A_CustomMissile ("YellowSparkleSpawner", 0, 0, random(0,-360), 2, random(0,360))
    TNT1 A 0 A_LoopActiveSound
	LGRN AAAAAA 10 Bright A_CustomMissile ("LegendaryRuneFlameSpawner", -20, 0, random(0,-360), 2, random(0,360)) 
    Loop
}
}

ACTOR PowerupRuneItem : LuckRuneItem
{
Inventory.PickupMessage "Powerup Rune"
States
{
  Spawn:
	TNT1 A 0 A_JumpIf(user_timer >= 210,"Gone")
	TNT1 A 0 A_SetUserVar("user_timer",user_timer+1)
	TNT1 A 0 A_CustomMissile("BlueSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 N 10 Bright
	TNT1 A 0 A_CustomMissile("BlueSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 N 10 Bright
	Loop
  Pickup:
	TNT1 A 0
	TNT1 A 0 A_JumpIfInventory("HasRune",1,"Nope")
	TNT1 A 0 ACS_NamedExecuteAlways("Rune Pickup",0,12,0,0)
	Stop
}
}

ACTOR PowerupRuneItemMap : PowerupRuneItem
{
States
{
  Spawn:
	TNT1 A 0 A_CustomMissile("BlueSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 N 10 Bright
	TNT1 A 0 A_CustomMissile("BlueSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	RUN3 N 10 Bright
	Loop
}
}

Actor AwakenedLegendaryRune : CustomInventory
{
Tag "\c[z3]Awakened Legendary Rune"
Inventory.PickupMessage "\c[z3]Awakened Legendary Rune!"
Inventory.PickupSound "AwakenedLegendaryRune/PickUp"
ActiveSound "AwakenedLegendaryRune/Idle"
+FLOATBOB
+NOTIMEFREEZE
Inventory.Amount 0
Inventory.MaxAmount 1
States
{
  Spawn:
    TNT1 A 0 A_CustomMissile("YellowSparkleSpawner",0,0,random(0,-360),2,random(0,360))
    TNT1 A 0 A_LoopActiveSound
	AGRN AAAAAA 10 Bright A_CustomMissile("LegendaryRuneFlameSpawner",-20,0,random(0,-360),2,random(0,360)) 
    TNT1 A 0 A_CustomMissile("BlueSparkleSpawner",0,0,random(0,-360),2,random(0,360))
    TNT1 A 0 A_LoopActiveSound
	AGRN AAAAAA 10 Bright A_CustomMissile("TrueLegendaryRuneFlameSpawner",-20,0,random(0,-360),2,random(0,360))
    Loop
  Pickup:
	TNT1 A 0
	TNT1 A 0 A_JumpIfInventory("HasRune",1,"Nope")
	TNT1 A 0 A_JumpIfInventory("IsWorthyOfTheAwakenedLegendaryRune",1,2)
	TNT1 A 0 A_Jump(256,"Cant")
	TNT1 A 0 ACS_NamedExecuteAlways("Rune Pickup",0,14,0,0)
	Stop
  Cant:
	AGRN A 1 A_Print("You are not worthy of the awakened legendary rune!")
	Stop
  Nope:
	AGRN A 1
	Stop
}
}

Actor TrueLegendaryRune : CustomInventory
{
Tag "\c[l5]True Legendary Rune"
Inventory.PickupMessage "\c[l5]True Legendary Rune!"
Inventory.PickupSound "TrueLegendaryRune/PickUp"
ActiveSound "TrueLegendaryRune/Idle"
+FLOATBOB
+NOTIMEFREEZE
Inventory.Amount 0
Inventory.MaxAmount 1
States
{
  Spawn:
    TNT1 A 0 A_CustomMissile("BlueSparkleSpawner",0,0,random(0,-360),2,random(0,360))
    TNT1 A 0 A_LoopActiveSound
	TLRN AAAAAA 10 Bright A_CustomMissile("TrueLegendaryRuneFlameSpawner",-20,0,random(0,-360),2,random(0,360))
    Loop
  Pickup:
	TNT1 A 0
	TNT1 A 0 A_JumpIfInventory("HasRune",1,"Nope")
	TNT1 A 0 A_JumpIfInventory("IsWorthyOfTheTrueLegendaryRune",1,2)
	TNT1 A 0 A_Jump(256,"Cant")
	TNT1 A 0 ACS_NamedExecuteAlways("Rune Pickup",0,15,0,0)
	Stop
  Cant:
	AGRN A 1 A_Print("You are not worthy of the true legendary rune!")
	Stop
  Nope:
	TGRN A 1
	Stop
}
}

Actor AwakenedLegendaryRuneDamage : PowerDamage
{
	DamageFactor "Normal", 2.5
	+INVENTORY.HUBPOWER
	+INVENTORY.PERSISTENTPOWER
	Powerup.Duration 0x7FFFFFFF
}

Actor AwakenedLegendaryRuneProtection : PowerProtection
{
	DamageFactor Normal, 0.4
	+NORADIUSDMG
	+INVENTORY.HUBPOWER
	+INVENTORY.PERSISTENTPOWER
	Powerup.Duration 0x7FFFFFFF
}

Actor AwakenedLegendaryRuneSpeed : PowerSpeed
{
	Speed 1.65
	+INVENTORY.HUBPOWER
	+INVENTORY.PERSISTENTPOWER
	Powerup.Duration 0x7FFFFFFF
}

Actor TrueLegendaryRuneDamage : PowerDamage
{
	DamageFactor "Normal", 3.0
	+INVENTORY.HUBPOWER
	+INVENTORY.PERSISTENTPOWER
	Powerup.Duration 0x7FFFFFFF
}

Actor TrueLegendaryRuneProtection : PowerProtection
{
	DamageFactor Normal, 0.25
	+NORADIUSDMG
	+INVENTORY.HUBPOWER
	+INVENTORY.PERSISTENTPOWER
	Powerup.Duration 0x7FFFFFFF
}

Actor TrueLegendaryRuneSpeed : PowerSpeed
{
	Speed 1.80
	+INVENTORY.HUBPOWER
	+INVENTORY.PERSISTENTPOWER
	Powerup.Duration 0x7FFFFFFF
}

Actor TrueLegendaryRuneReflection : PowerReflection
{
	+INVENTORY.HUBPOWER
	+INVENTORY.PERSISTENTPOWER
	Powerup.Duration 0x7FFFFFFF
}

Actor TrueLegendaryRuneDrain : PowerDrain
{
	+INVENTORY.HUBPOWER
	+INVENTORY.PERSISTENTPOWER
	Powerup.Duration 0x7FFFFFFF
}

Actor FullRefilePack : CustomInventory
{
+COUNTITEM
Inventory.PickupMessage "\c[W3]Full Refill Pack"
Inventory.PickupSound "fullpack/pickup"
States
{
  Spawn:
    BPK0 A -1
    Stop
  Pickup:
	TNT1 A 0 A_GiveInventory("ModdedBackpack",1)
	TNT1 A 0 A_GiveInventory("BulletMag",1600)
    TNT1 A 0 A_GiveInventory("NewShell",400)
	TNT1 A 0 A_GiveInventory("Missile",400)
    TNT1 A 0 A_GiveInventory("NewCell",1800)
    TNT1 A 0 A_GiveInventory("EradicationCell",1800)
	TNT1 A 0 A_GiveInventory("DemonAmmo",1800)
	TNT1 A 0 A_GiveInventory("HandGrenadeAmmo",32)
	TNT1 A 0 A_GiveInventory("MineAmmo",32)
	TNT1 A 0 A_GiveInventory("LDemonAmmo",100)
	TNT1 A 0 A_GiveInventory("LegendaryShell",20)
	TNT1 A 0 A_GiveInventory("LegendaryBulletMag",100)
	TNT1 A 0 A_GiveInventory("DCell",5)
    Stop
  }
}

Actor CombatBackpack : CustomInventory
{
Inventory.PickupMessage "\c[A1]Combat Backpack"
Inventory.PickupSound "items/pack"
+ALWAYSPICKUP
States
{
  Spawn:
    CBP2 A -1
    Stop
  Pickup:
	TNT1 A 0 A_GiveInventory("ModdedBackpack",1)
    TNT1 A 0 ACS_NamedExecuteAlways("Combat Backpack Upgrate",0,0,0,0)
    Stop
  }
}

Actor UltimateCombatBackpack : CustomInventory
{
Scale 1.3
Inventory.PickupMessage "\c[A1]Ultimate Combat Backpack"
Inventory.PickupSound "items/pack"
+ALWAYSPICKUP
States
{
  Spawn:
    CBP2 A -1
    Stop
  Pickup:
	TNT1 A 0 A_GiveInventory("ModdedBackpack",1)
    TNT1 A 0 ACS_NamedExecuteAlways("Combat Backpack Upgrate Ultimate",0,0,0,0)
    Stop
  }
}

ACTOR MinerDrone : CustomInventory
{
+COUNTITEM
+INVENTORY.INVBAR
Inventory.MaxAmount 4
Inventory.Icon "ITM2I0"
Inventory.PickupMessage "\c[W3]Mine Field Drone"
Tag "Mine Field Drone"
Inventory.PickupSound "drone/see"
Scale 0.5
States
{
  Spawn:
    DRAN Z -1
    Stop
  Use:
    TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(3100,0,0,0) == 1 ,"Nope")
    //TNT1 A 1 A_JumpIfInventory("HasSpreadRune",1,2)
	TNT1 A 1 A_SpawnItemEx("MineDrone",48,0,8,0,0,0,0,1)
	Stop
	TNT1 A 1 A_SpawnItemEx("MineDrone",48,0,8,0,0,0,0,1)
	TNT1 A 1 A_SpawnItemEx("MineDrone",48,-30,8,0,0,0,0,1)
 	TNT1 A 1 A_SpawnItemEx("MineDrone",48,30,8,0,0,0,0,1)
	Stop
  Nope:
	TNT1 A 0 A_Print("Can't use this inventory now!")
	Fail
  }
}

Actor SupplyBox : CustomInventory
{
Inventory.PickupMessage "\c[M3]Supply Box"
Inventory.Icon "ITM2H0"
Inventory.MaxAmount 1
Tag "Supply Box"
+INVBAR
+COUNTITEM
States
{
  Use:
    TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(3100,0,0,0) == 1 ,"Nope")
	TNT1 A 0 A_SpawnItemEx("MegaSupplyBoxMarker01",32)
    Stop
  Nope:
	TNT1 A 0 A_Print("Can't use this inventory now!")
    Fail
  Spawn:
	SUPB Z -1 Bright
	Stop
  }
}

ACTOR MegaSupplyBox
{
Radius 90
Height 70
Health 800
Mass 99999
Species "Hell"
DamageFactor "Hell", 0.0
Scale 5
+FLOORCLIP
+NOCLIP
+NORADIUSDMG
+NOBLOOD
+SHOOTABLE
+FRIENDLY
-COUNTKILL
-SOLID
var int user_timer;
States
{
   Spawn:
	SUPB A 1 Bright
    Loop
   Death:
  	SUPB A 0
	SUPB A 1 Bright A_PlaySound("mega/supply",CHAN_BODY|CHAN_NOPAUSE,1.0,TRUE,ATTN_NONE)
   Items:
    SUPB A 0
	SUPB A 0 A_JumpIf(user_timer >= 50,"Done")
    SUPB A 0 A_SetUserVar("user_timer",user_timer+1)
    SUPB A 0 A_SpawnItemEx("PresentCrate",random(-40,40),random(-40,40),60,random(4,11),0,random(10,30),random(1,359),32)
	SUPB A 4 Bright A_Recoil(10)
    SUPB A 0 A_SpawnItemEx("PresentCrate",random(-40,40),random(-40,40),60,random(4,11),0,random(10,30),random(1,359),32)
	SUPB A 4 Bright A_Recoil(-10)
	Loop
   Done:
    SUPB A 0 A_FadeOut(0.1)
	SUPB A 4 A_Recoil(-10)
    SUPB A 0 A_FadeOut(0.1)
	SUPB A 4 A_Recoil(10)
    SUPB A 0 A_FadeOut(0.1)
	SUPB A 4 A_Recoil(-10)
    SUPB A 0 A_FadeOut(0.1)
	SUPB A 4 A_Recoil(10)
    SUPB A 0 A_FadeOut(0.1)
	SUPB A 4 A_Recoil(-10)
    SUPB A 0 A_FadeOut(0.1)
	SUPB A 4 A_Recoil(10)
    SUPB A 0 A_FadeOut(0.1)
	SUPB A 4 A_Recoil(-10)
    SUPB A 0 A_FadeOut(0.1)
	SUPB A 4 A_Recoil(10)
    SUPB A 0 A_FadeOut(0.1)
	SUPB A 4 A_Recoil(-10)
	SUPB A 4 A_Recoil(10)
	TNT1 A 350
	TNT1 A 1 A_StopSound(CHAN_BODY)
    Stop
  }
}

Actor PresentCrate
{
Radius 20
Height 32
Scale 0.3
-SOLID
States
 {
  Spawn:
	UCRT Z 1 Bright A_CheckFloor("Done")
	Loop
  Done:
    UCRT Z 0
	UCRT Z 0 A_Jump(2,6)
	UCRT Z 1 A_Jump(256,1,2,3,4)
	Stop
	UCRT Z 1 A_SpawnItemEx("PresentAmmo")
	Stop
	UCRT Z 1 A_SpawnItemEx("PresentArmor")
	Stop
	UCRT Z 1 A_SpawnItemEx("PresentPowerup")
	Stop
	UCRT Z 1 A_SpawnItemEx("PresentWeapon")
	Stop
	UCRT Z 1 A_SpawnItemEx("PresentSuit")
	Stop
  }
}

ACTOR PresentAmmo
{
-SOLID
States
{
   Spawn:
    TNT1 A 0
	TNT1 A 0 A_Jump(28,9)
	TNT1 A 0 A_Jump(100,3,4,5,6,7)
	TNT1 A 1 A_Jump(256,1)
	Stop
	TNT1 A 1 A_SpawnItemEx("ModdedBackpack")
	Stop
	TNT1 A 1 A_SpawnItemEx("LegendaryBulletBox")
	Stop
	TNT1 A 1 A_SpawnItemEx("LegendaryShellBox")
	Stop
	TNT1 A 1 A_SpawnItemEx("LDemonAmmoBox")
	Stop
	TNT1 A 1 A_SpawnItemEx("DemonAmmoBox")
	Stop
	TNT1 A 1 A_SpawnItemEx("DCellPack")
	Stop
	TNT1 A 1 A_SpawnItemEx("FullRefilePack")
	Stop
	}
}

ACTOR PresentWeapon : PresentAmmo
{
States
{
   Spawn:
    TNT1 A 0
	TNT1 A 1 A_Jump(256,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39)
	Stop
	TNT1 A 1 A_SpawnItemEx("Chainsaw  ")
	Stop
	TNT1 A 1 A_SpawnItemEx("Freezer Rifle")
	Stop
	TNT1 A 1 A_SpawnItemEx("Rocket Launcher ")
	Stop
	TNT1 A 1 A_SpawnItemEx("Grenade Launcher ")
	Stop
	TNT1 A 1 A_SpawnItemEx("Behemoth Cannon")
	Stop
	TNT1 A 1 A_SpawnItemEx("Plasma Rifle ")
	Stop
	TNT1 A 1 A_SpawnItemEx("LightningRifle")
	Stop
	TNT1 A 1 A_SpawnItemEx("Demon Tech Rifle  ")
	Stop
	TNT1 A 1 A_SpawnItemEx("Railgun  ")
	Stop
	TNT1 A 1 A_SpawnItemEx("Explosive Minigun ")
	Stop
	TNT1 A 1 A_SpawnItemEx("Combat Shotgun ")
	Stop
	TNT1 A 1 A_SpawnItemEx("Assault Shotgun  ")
	Stop
	TNT1 A 1 A_SpawnItemEx("Double Barrel Shotgun ")
	Stop
	TNT1 A 1 A_SpawnItemEx("Quad Barrel Shotgun ")
	Stop
	TNT1 A 1 A_SpawnItemEx("Hexa-Shotgun ")
	Stop
	TNT1 A 1 A_SpawnItemEx("PulseShotgun")
	Stop
	TNT1 A 1 A_SpawnItemEx("TechVulcan")
	Stop
	TNT1 A 1 A_SpawnItemEx("HomingRocketLauncher")
	Stop
	TNT1 A 1 A_SpawnItemEx("DoubleGrenadeLauncher")
	Stop
	TNT1 A 1 A_SpawnItemEx("PlasmaRepeater")
	Stop
	TNT1 A 1 A_SpawnItemEx("TechVulcan")
	Stop
	TNT1 A 1 A_SpawnItemEx("SniperRifle")
	Stop
	TNT1 A 1 A_SpawnItemEx("TechErasus")
	Stop
	TNT1 A 1 A_SpawnItemEx("M79GrenadeLauncher")
	Stop
	TNT1 A 1 A_SpawnItemEx("QuadRocketLauncher")
	Stop
	TNT1 A 1 A_SpawnItemEx("Demon Tech Minigun")
	Stop
	TNT1 A 1 A_SpawnItemEx("Demon Tech Railgun")
	Stop
	TNT1 A 1 A_SpawnItemEx("Demon Tech Rocket Launcher")
	Stop
	TNT1 A 1 A_SpawnItemEx("Demon Tech Ballista")
	Stop
	TNT1 A 1 A_SpawnItemEx("Demon Tech Pistol")
	Stop
	TNT1 A 1 A_SpawnItemEx("Demon Tech Pistol")
	Stop
	TNT1 A 1 A_SpawnItemEx("MineLauncher")
	Stop
	TNT1 A 1 A_SpawnItemEx("PlasmaCaster")
	Stop
	TNT1 A 1 A_SpawnItemEx("ExplosiveSSG")
	Stop
	TNT1 A 1 A_SpawnItemEx("ExplosiveRailgun")
	Stop
 	TNT1 A 1 A_SpawnItemEx("Demon Tech Repeater")
	Stop
 	TNT1 A 1 A_SpawnItemEx("Perforator")
	Stop
 	TNT1 A 1 A_SpawnItemEx("RapidShotgun")
	Stop
 	TNT1 A 1 A_SpawnItemEx("RapidRocketLauncher")
	Stop
 	TNT1 A 1 A_SpawnItemEx("ErazorShotgun")
	Stop

}
}

ACTOR PresentArmor : PresentAmmo
{
States
{
   Spawn:
    TNT1 A 0
	TNT1 A 0 A_Jump(48,6)
	TNT1 A 0 A_Jump(100,4)
	TNT1 A 1 A_Jump(256,1,2)
	Stop
	TNT1 A 1 A_SpawnItemEx("ModdedGreenArmorPickup")
	Stop
	TNT1 A 1 A_SpawnItemEx("NewExtraArmor")
	Stop
	TNT1 A 1 A_SpawnItemEx("ModdedBlueArmorPickup")
	Stop
	TNT1 A 1 A_SpawnItemEx("RedArmorPickup")
	Stop
	}
}

ACTOR PresentPowerup : PresentAmmo
{
States
{
   Spawn:
    TNT1 A 0
	TNT1 A 0 A_Jump(8,"VeryRare")
	TNT1 A 0 A_Jump(36,"Rare")
	TNT1 A 0 A_Jump(100,"Often")
  Common:
    TNT1 A 0 A_Jump(256,1,2,3,4)
	TNT1 A 1 A_SpawnItemEx("ModdedSoulSphere")
	Stop
	TNT1 A 1 A_SpawnItemEx("ModdedBlurSphere")
	Stop
	TNT1 A 1 A_SpawnItemEx("HasteSphere")
	Stop
	TNT1 A 1 A_SpawnItemEx("LifeSphere2")
	Stop
  Often:
    TNT1 A 0 A_Jump(256,1,2,3,4,5,6)
  	TNT1 A 1 A_SpawnItemEx("ModdedMegaSphere2")
	Stop
	TNT1 A 1 A_SpawnItemEx("ProtectionSphere")
	Stop
	TNT1 A 1 A_SpawnItemEx("UltraSphere2")
	Stop
	TNT1 A 1 A_SpawnItemEx("RandomSphere")
	Stop
	TNT1 A 1 A_SpawnItemEx("RageSphere")
	Stop
	TNT1 A 1 A_SpawnItemEx("ArmorSphere")
	Stop
  Rare:
    TNT1 A 0 A_Jump(256,1,2,3,4,5,6,7,8,9,10)
	TNT1 A 1 A_SpawnItemEx("ModdedInvulnerabilitySphere")
	Stop
	TNT1 A 1 A_SpawnItemEx("TerrorSphere")
	Stop
	TNT1 A 1 A_SpawnItemEx("ThunderSphere")
	Stop
	TNT1 A 1 A_SpawnItemEx("EpicSphere")
	Stop
	TNT1 A 1 A_SpawnItemEx("WickedSphere")
	Stop
	TNT1 A 1 A_SpawnItemEx("IgnoranceSphere")
	Stop
	TNT1 A 1 A_SpawnItemEx("SummonSphere")
	Stop
	TNT1 A 1 A_SpawnItemEx("ExplosionSphere")
	Stop
	TNT1 A 1 A_SpawnItemEx("ChemicalSphere")
	Stop
	TNT1 A 1 A_SpawnItemEx("SummonSphere")
	Stop
  VeryRare:
    TNT1 A 0 A_Jump(256,1,2,3,4,5,6,7,8)
	TNT1 A 1 A_SpawnItemEx("UnbelieveabilitySphere")
	Stop
	TNT1 A 1 A_SpawnItemEx("NewDoomSphere")
	Stop
	TNT1 A 1 A_SpawnItemEx("RevengeSphere")
	Stop
	TNT1 A 1 A_SpawnItemEx("AnnihilationSphere")
	Stop
	TNT1 A 1 A_SpawnItemEx("SpreadSphere")
	Stop
	TNT1 A 1 A_SpawnItemEx("InsanitySphere")
	Stop
	TNT1 A 1 A_SpawnItemEx("FlightSphere")
	Stop
	TNT1 A 1 A_SpawnItemEx("BFGSphere")
	Stop
  Legendary:
    TNT1 A 0 A_Jump(256,1,2,3,4,5,6)
	TNT1 A 1 A_SpawnItemEx("HolySphere")
	Stop
	TNT1 A 1 A_SpawnItemEx("FateSphere")
	Stop
	TNT1 A 1 A_SpawnItemEx("LuckSphere")
	Stop
	TNT1 A 1 A_SpawnItemEx("TerminatorSphere")
	Stop
	TNT1 A 1 A_SpawnItemEx("ChaosSphere")
	Stop
	TNT1 A 1 A_SpawnItemEx("SurvivalSphere")
	Stop
}
}

ACTOR PresentSuit : PresentAmmo
{
States
{
   Spawn:
    TNT1 A 0
	TNT1 A 1 A_Jump(256,1,2)
	Stop
	TNT1 A 1 A_SpawnItemEx("JetTrooper")
	Stop
	TNT1 A 1 A_SpawnItemEx("MaxSoldier")
	Stop
	TNT1 A 1 A_SpawnItemEx("Enforcer")
	Stop
	}
}

Actor LegendarySupplyBox : CustomInventory
{
Tag "Legendary Supply Box"
Inventory.PickupMessage "\c[z3]Legendary Supply Box"
Inventory.Icon "ITM2L0"
Inventory.MaxAmount 1
+INVBAR
+COUNTITEM
States
{
  Use:
    TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(3100,0,0,0) == 1 ,"Nope")
	TNT1 A 0 A_SpawnItemEx("LegendaryMegaSupplyBoxMarker01",32)
    Stop
  Nope:
	TNT1 A 0 A_Print("Can't use this inventory now!")
    Fail
  Spawn:
	SUPB X -1 Bright
	Stop
  }
}

ACTOR LegendaryMegaSupplyBox : MegaSupplyBox
{
+NOTIMEFREEZE
States
{
   Spawn:
	SUPB B 1 Bright
    Loop
   Death:
  	SUPB B 0
	SUPB B 1 Bright A_PlaySound("mega/supply",CHAN_BODY|CHAN_NOPAUSE,1.0,TRUE,ATTN_NONE)
   Items:
    SUPB B 0
	SUPB B 0 A_JumpIf(user_timer >= 50,"Done")
    SUPB B 0 A_SetUserVar("user_timer",user_timer+1)
    SUPB B 0 A_SpawnItemEx("LegendaryPresentCrate",random(-40,40),random(-40,40),60,random(4,11),0,random(10,30),random(1,359),32)
	SUPB B 4 Bright A_Recoil(10)
    SUPB B 0 A_SpawnItemEx("LegendaryPresentCrate",random(-40,40),random(-40,40),60,random(4,11),0,random(10,30),random(1,359),32)
	SUPB B 4 Bright A_Recoil(-10)
	Loop
   Done:
    SUPB B 0 A_FadeOut(0.1)
	SUPB B 4 A_Recoil(-10)
    SUPB B 0 A_FadeOut(0.1)
	SUPB B 4 A_Recoil(10)
    SUPB B 0 A_FadeOut(0.1)
	SUPB B 4 A_Recoil(-10)
    SUPB B 0 A_FadeOut(0.1)
	SUPB B 4 A_Recoil(10)
    SUPB B 0 A_FadeOut(0.1)
	SUPB B 4 A_Recoil(-10)
    SUPB B 0 A_FadeOut(0.1)
	SUPB B 4 A_Recoil(10)
    SUPB B 0 A_FadeOut(0.1)
	SUPB B 4 A_Recoil(-10)
    SUPB B 0 A_FadeOut(0.1)
	SUPB B 4 A_Recoil(10)
    SUPB B 0 A_FadeOut(0.1)
	SUPB B 4 A_Recoil(-10)
	SUPB B 4 A_Recoil(10)
	TNT1 A 350
	TNT1 A 1 A_StopSound(CHAN_BODY)
    Stop
  }
}

Actor LegendaryPresentCrate : PresentCrate
{
+NOTIMEFREEZE
States
 {
  Spawn:
	UCRT A 1 Bright A_CheckFloor("Done")
	Loop
  Done:
    UCRT A 0
	UCRT A 0 A_Jump(32,5)
	UCRT A 1 A_Jump(48,3)
	UCRT A 1 A_Jump(256,1)
	Stop
	UCRT A 1 A_SpawnItemEx("LegendaryPresentAmmo")
	Stop
	UCRT A 1 A_SpawnItemEx("LegendaryPresentPowerup")
	Stop
	UCRT A 1 A_SpawnItemEx("LegendaryPresentWeapon")
	Stop
  }
}

ACTOR LegendaryPresentAmmo
{
+NOTIMEFREEZE
-SOLID
States
{
   Spawn:
    TNT1 A 0
	TNT1 A 1 A_Jump(64,5,6,7,8)
	TNT1 A 1 A_Jump(256,1,2,3)
	Stop
	TNT1 A 1 A_SpawnItemEx("LDemonAmmoBox")
	Stop
	TNT1 A 1 A_SpawnItemEx("LegendaryShellBox")
	Stop
	TNT1 A 1 A_SpawnItemEx("LegendaryBulletBox")
	Stop
	TNT1 A 1 A_SpawnItemEx("LegendaryPowerSphere")
	Stop
	TNT1 A 1 A_SpawnItemEx("LegendaryPowerShard")
	Stop
	TNT1 A 1 A_SpawnItemEx("LegendarySalvationSphere")
	Stop
	TNT1 A 1 A_SpawnItemEx("LegendaryJudgmentSphere")
	Stop
	}
}

ACTOR LegendaryPresentWeapon : PresentAmmo
{
+NOTIMEFREEZE
States
{
   Spawn:
    TNT1 A 0
	TNT1 A 1 A_Jump(256,1,2,3,4,5,6,7,8)
	Stop
	TNT1 A 1 A_SpawnItemEx("Legendary Plasmatic Rifle ")
	Stop
	TNT1 A 1 A_SpawnItemEx("Legendary Plasmatic Cannon")
	Stop
	TNT1 A 1 A_SpawnItemEx("Legendary Assault Shotgun ")
	Stop
	TNT1 A 1 A_SpawnItemEx("Legendary AK-47")
	Stop
	TNT1 A 1 A_SpawnItemEx("Legendary Gauss Cannon")
	Stop
	TNT1 A 1 A_SpawnItemEx("Legendary Quad Shotgun")
	Stop
	TNT1 A 1 A_SpawnItemEx("LegendaryChainsaw")
	Stop
	TNT1 A 1 A_SpawnItemEx("LegendaryPulverizer")
	Stop
}
}

ACTOR LegendaryPresentPowerup : PresentAmmo
{
+NOTIMEFREEZE
States
{
   Spawn:
    TNT1 A 0
	TNT1 A 0 A_Jump(32,8,9)
	TNT1 A 0 A_Jump(88,5,6)
	TNT1 A 1 A_Jump(256,1,2,3)
	Stop
	TNT1 A 1 A_SpawnItemEx("LegendaryArmorPickup")
	Stop
	TNT1 A 1 A_SpawnItemEx("LegendarySphere2")
	Stop
	TNT1 A 1 A_SpawnItemEx("LegAmmoSphere")
	Stop
	TNT1 A 1 A_SpawnItemEx("LegendaryUltraSphere2")
	Stop
	TNT1 A 1 A_SpawnItemEx("LegTimeFreezeSphere")
	Stop
	TNT1 A 1 A_SpawnItemEx("LegendaryDemonRuneItem")
	Stop
	TNT1 A 1 A_SpawnItemEx("LegendaryCrystal")
	Stop
}
}

ACTOR DemonRune : CustomInventory
{
  RenderStyle Add
  Alpha 0.8
  Scale 0.6
  +FLOATBOB
  +COUNTITEM
  -FLOAT
  Inventory.PickupSound "powerups/protection"
  Inventory.PickupMessage "\c[Q2]Demonic Relic"
  States
  {
  Spawn:
     DRUN A 0 A_CustomMissile ("YellowSparkleSpawner", 0, 0, random(0,-360), 2, random(0,360))
	 DRUN AAAA 3 Bright A_SpawnItemEx("YellowPowerLineSpawner",0,0,16,0,0,0,0,128)
     Loop
  Pickup:
	 NULL A 1
	 NULL A 1 A_JumpIf(ACS_ExecuteWithResult(3703,0,0,0) == 1 ,"Nope")
	 NULL A 1 ACS_ExecuteAlways(2994,0,0,0,0)
	 NULL A 1 A_Jump(256,1,2,3,4,5,6)
	 Stop
     NULL A 1 A_GiveInventory("CydestoryerGiver")
	 NULL A 1 A_GiveInventory("BombElementalGiver")
	 NULL A 1 A_GiveInventory("BelphegorGiver")
	 NULL A 1 A_GiveInventory("BabyDarkDemolisherGiver")
	 NULL A 1 A_GiveInventory("DiabolistGiver")
	 NULL A 1 A_GiveInventory("SpecilosGiver")
	 Stop
  Nope:
	 DRUN E 1
	 Stop
     }
}

ACTOR DemonRuneItem : CustomInventory
{
  RenderStyle Add
  Alpha 0.8
  Scale 0.6
  +COUNTITEM
  +INVENTORY.INVBAR
  Inventory.MaxAmount 1
  Inventory.Icon "ITM2J0"
  Inventory.PickupSound "powerups/protection"
  Inventory.PickupMessage "\c[Q2]Demonic Relic"
  Tag "Demonic Relic"
  States
  {
  Spawn:
    DRUN A 0 A_CustomMissile ("YellowSparkleSpawner", 0, 0, random(0,-360), 2, random(0,360))
	DRUN AAAA 3 Bright A_SpawnItemEx("YellowPowerLineSpawner",0,0,16,0,0,0,0,128)
    Loop
  Use:
    TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(3703,0,0,0) == 1 ,"Nope")
	TNT1 A 1 ACS_ExecuteAlways(2994,0,0,0,0)
	TNT1 A 1 A_Jump(256,1,2,3,4,5,6)
	Stop
    TNT1 A 1 A_GiveInventory("CydestoryerGiver")
	TNT1 A 1 A_GiveInventory("BombElementalGiver")
	TNT1 A 1 A_GiveInventory("BelphegorGiver")
	TNT1 A 1 A_GiveInventory("BabyDarkDemolisherGiver")
	TNT1 A 1 A_GiveInventory("DiabolistGiver")
    TNT1 A 1 A_GiveInventory("SpecilosGiver")
	Stop
  Nope:
	TNT1 A 0 A_Print("Can't use this inventory now!")
	Fail
  }
}

ACTOR RuneOfTheAbomination : CustomInventory
{
  RenderStyle Add
  Alpha 0.8
  Scale 0.25
  +FLOATBOB
  +COUNTITEM
  -FLOAT
  Inventory.PickupSound "powerups/protection"
  Inventory.PickupMessage "\c[Q2]Relic of the Abomination!"
  States
  {
  Spawn:
     DRUN B 0 A_CustomMissile ("YellowSparkleSpawner", 0, 0, random(0,-360), 2, random(0,360))
	 DRUN BBBB 3 Bright A_SpawnItemEx("YellowPowerLineSpawner",0,0,16,0,0,0,0,128)
     Loop
  Pickup:
	 NULL A 1
	 NULL A 1 A_JumpIf(ACS_ExecuteWithResult(3703,0,0,0) == 1 ,"Nope")
	 NULL A 1 ACS_ExecuteAlways(2994,0,0,0,0)
	 NULL A 1 A_Jump(256,1,2,3,4)
	 Stop
     NULL A 1 A_GiveInventory("CardihilatorGiver")
	 NULL A 1 A_GiveInventory("InfernoDemonGiver")
	 NULL A 1 A_GiveInventory("CerebralCommanderGiver")
	 NULL A 1 A_GiveInventory("HellishAvatarGiver")
	 Stop
  Nope:
	 DRUN B 1
	 Stop
     }
}

ACTOR RuneOfTheAbominationItem : CustomInventory
{
  RenderStyle Add
  Alpha 0.8
  Scale 0.25
  +COUNTITEM
  +INVENTORY.INVBAR
  Inventory.MaxAmount 1
  Inventory.Icon "ITM3C0"
  Inventory.PickupSound "powerups/protection"
  Inventory.PickupMessage "\c[Q2]Relic of the Abomination!"
  Tag "Relic of the Abomination"
  States
  {
  Spawn:
    DRUN B 0 A_CustomMissile ("YellowSparkleSpawner", 0, 0, random(0,-360), 2, random(0,360))
	DRUN BBBB 3 Bright A_SpawnItemEx("YellowPowerLineSpawner",0,0,16,0,0,0,0,128)
    Loop
  Use:
    TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(3703,0,0,0) == 1 ,"Nope")
	TNT1 A 0 ACS_ExecuteAlways(2994,0,0,0,0)
	NULL A 1 A_Jump(256,1,2,3,4)
	Stop
    NULL A 1 A_GiveInventory("CardihilatorGiver")
	NULL A 1 A_GiveInventory("InfernoDemonGiver")
	NULL A 1 A_GiveInventory("CerebralCommanderGiver")
	NULL A 1 A_GiveInventory("HellishAvatarGiver")
	Stop
  Nope:
	TNT1 A 0 A_Print("Can't use this inventory now!")
	Fail
  }
}

ACTOR LegendaryDemonRune : CustomInventory
{
  +FLOATBOB
  +COUNTITEM
  -FLOAT
  Inventory.PickupSound "powerups/protection"
  Inventory.PickupMessage "\c[l5]Legendary Demonic Relic"
  States
  {
  Spawn:
	 TNT1 A 0 A_PlaySound("legdemonrune/idle",6,5.0)
	 TNT1 A 0 Bright A_SpawnItemEx("LegDemonRuneParticleSpawner",0,0,32,0,0,0,0,128)
	 TNT1 AAAAAAAAAAAAA 0 Bright A_SpawnItemEx("ArmorParticleBlue",Random(-12,12),Random(-12,12),Random(16,40),Random(-2,2),Random(-2,2),Random(-2,2),Random(-20,20),128)
	 LDRN ABCDEFGJHIJKL 5 Bright A_CustomMissile("LegendaryDRuneFlameSpawner",-20,0,random(0,-360),2,random(0,360))
	 Loop
  Pickup:
	 NULL A 1
	 NULL A 1 //A_StopSound
	 NULL A 1 A_JumpIf(ACS_ExecuteWithResult(3703,0,0,0) == 1 ,"Nope")
	 NULL A 1 ACS_ExecuteAlways(2994,0,0,0,0)
	 NULL A 1 A_Jump(256,1,2,3,4,5)
	 Stop
     NULL A 1 A_GiveInventory("LegendaryRevenantGiver")
	 NULL A 1 A_GiveInventory("LegendaryBehemothGiver")
	 NULL A 1 A_GiveInventory("LegendaryCyberNobleGiver")
	 NULL A 1 A_GiveInventory("LegendaryRedeemerGiver")
	 NULL A 1 A_GiveInventory("LegendaryTormentorGiver")
	 Stop
  Nope:
	 DRUN E 1
	 Stop
     }
}

ACTOR LegendaryDemonRuneItem : CustomInventory replaces LegDemonRune
{
  +COUNTITEM
  +INVENTORY.INVBAR
  Inventory.MaxAmount 1
  Inventory.Icon "LDRNM0"
  Inventory.PickupSound "legendarypowersphere/pickup"
  Inventory.PickupMessage "\c[l5]Legendary Demonic Relic"
  Tag "Legendary Demonic Relic"
  States
  {
  Spawn:
	 TNT1 A 0 A_PlaySound("legdemonrune/idle",6,5.0)
	 TNT1 A 0 Bright A_SpawnItemEx("LegDemonRuneParticleSpawner",0,0,32,0,0,0,0,128)
	 TNT1 AAAAAAAAAAAAA 0 Bright A_SpawnItemEx("ArmorParticleBlue",Random(-12,12),Random(-12,12),Random(16,40),Random(-2,2),Random(-2,2),Random(-2,2),Random(-20,20),128)
	 LDRN ABCDEFGJHIJKL 5 Bright A_CustomMissile("LegendaryDRuneFlameSpawner",-20,0,random(0,-360),2,random(0,360))
	 Loop
  Use:
     TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(3703,0,0,0) == 1 ,"Nope")
	 TNT1 A 0 ACS_ExecuteAlways(2994,0,0,0,0)
	 NULL A 1 A_Jump(256,1,2,3,4,5)
	 Stop
     NULL A 1 A_GiveInventory("LegendaryRevenantGiver")
	 NULL A 1 A_GiveInventory("LegendaryBehemothGiver")
	 NULL A 1 A_GiveInventory("LegendaryCyberNobleGiver")
	 NULL A 1 A_GiveInventory("LegendaryRedeemerGiver")
	 NULL A 1 A_GiveInventory("LegendaryTormentorGiver")
	 Stop
   Pickup:
	 NULL A 1
	 NULL A 1 A_StopSound
	 Stop
  Nope:
	TNT1 A 0 A_Print("Can't use this inventory now!")
	Fail
  }
}

ACTOR BonusCrateDrop : RandomSpawner
{
DropItem "Nothing", 256, 312
DropItem "BonusCrate", 256, 254
DropItem "EpicCratePickup", 256, 1
}

Actor EpicCrate : CustomInventory
{
  Inventory.MaxAmount 3
  Inventory.Icon "ITM2X0"
  Inventory.PickupMessage "Epic Crate"
  Inventory.PickupSound "EpicCrate/Pickup"
  Scale 0.3
  +INVBAR
  +FLOATBOB
  States
  {
  Spawn:
    UCRT X 0 A_JumpIf(ACS_ExecuteWithResult(3705,0,0,0) == FALSE,"Nope")
    UCRT XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX 1 Bright A_SpawnItemEx("BluePowerLine",random(16,-16),random(16,-16),0,0,0,2,0,128,0)
	UCRT XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX 1 Bright A_SpawnItemEx("BluePowerLine",random(16,-16),random(16,-16),0,0,0,2,0,128,0)
	UCRT X 0 A_CustomMissile("LegendaryDRuneFlameSpawner",-20,0,random(0,-360),2,random(0,360))
	UCRT XXXX 1 Bright A_SpawnItemEx("BluePowerLine",random(16,-16),random(16,-16),0,0,0,2,0,128,0)
	UCRT X 0 A_CustomMissile("LegendaryDRuneFlameSpawner",-20,0,random(0,-360),2,random(0,360))
	UCRT XXXX 1 Bright A_SpawnItemEx("BluePowerLine",random(16,-16),random(16,-16),0,0,0,2,0,128,0)
	UCRT X 0 A_CustomMissile("LegendaryDRuneFlameSpawner",-20,0,random(0,-360),2,random(0,360))
	UCRT XXXX 1 Bright A_SpawnItemEx("BluePowerLine",random(16,-16),random(16,-16),0,0,0,2,0,128,0)
	UCRT X 0 A_CustomMissile("LegendaryDRuneFlameSpawner",-20,0,random(0,-360),2,random(0,360))
	UCRT XXXX 1 Bright A_SpawnItemEx("BluePowerLine",random(16,-16),random(16,-16),0,0,0,2,0,128,0)
	Loop
  Nope:
    UCRT X 1 Bright
	Stop
  Use:
	TNT1 A 1 ACS_ExecuteAlways(3710,0,0,0,0)
	Stop
  }
}

Actor EpicCratePickup : CustomInventory
{
Inventory.PickupMessage "Epic Crate"
Inventory.PickupSound "EpicCrate/Pickup"
Scale 0.3
Radius 20
Height 32
Speed 1
+FLOATBOB
+AMBUSH
+LOOKALLAROUND
+NOBLOCKMONST
+NOTELEPORT
+NOFEAR
-SHOOTABLE
var int user_delay;
var int user_chasing;
States
{
  Spawn:
  	UCRT X 0 A_JumpIf(user_delay >= 4,"Follow")
	UCRT X 0 A_SetUserVar("user_delay",user_delay+1)
    UCRT X 0 A_JumpIf(ACS_ExecuteWithResult(3705,0,0,0) == FALSE,"Nope")
    UCRT XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX 1 Bright A_SpawnItemEx("BluePowerLine",random(16,-16),random(16,-16),0,0,0,2,0,128,0)
	UCRT XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX 1 Bright A_SpawnItemEx("BluePowerLine",random(16,-16),random(16,-16),0,0,0,2,0,128,0)
	UCRT X 0 A_CustomMissile("LegendaryDRuneFlameSpawner",-20,0,random(0,-360),2,random(0,360))
	UCRT XXXX 1 Bright A_SpawnItemEx("BluePowerLine",random(16,-16),random(16,-16),0,0,0,2,0,128,0)
	UCRT X 0 A_CustomMissile("LegendaryDRuneFlameSpawner",-20,0,random(0,-360),2,random(0,360))
	UCRT XXXX 1 Bright A_SpawnItemEx("BluePowerLine",random(16,-16),random(16,-16),0,0,0,2,0,128,0)
	UCRT X 0 A_CustomMissile("LegendaryDRuneFlameSpawner",-20,0,random(0,-360),2,random(0,360))
	UCRT XXXX 1 Bright A_SpawnItemEx("BluePowerLine",random(16,-16),random(16,-16),0,0,0,2,0,128,0)
	UCRT X 0 A_CustomMissile("LegendaryDRuneFlameSpawner",-20,0,random(0,-360),2,random(0,360))
	UCRT XXXX 1 Bright A_SpawnItemEx("BluePowerLine",random(16,-16),random(16,-16),0,0,0,2,0,128,0)
	Loop
  Nope:
    UCRT X 1
	Stop
  Follow:
    UCRT X 0 A_ChangeFlag("FLOAT",1)
	UCRT X 0 A_ChangeFlag("NOGRAVITY",1)
	UCRT X 0 A_JumpIf(ACS_ExecuteWithResult(3705,0,0,0) == FALSE,"Nope")
	UCRT X 0 A_Look
	UCRT XXXXXXXXXXX 1 Bright A_SpawnItemEx("BluePowerLine",random(16,-16),random(16,-16),0,0,0,2,0,128,0)
	Loop
  See:
  	UCRT X 0 A_JumpIfTargetInlos(3)
	UCRT X 0 A_ClearTarget
	UCRT X 1 Bright A_SpawnItemEx("BluePowerLine",random(16,-16),random(16,-16),0,0,0,2,0,128,0)
	Goto Follow
  	UCRT X 0 A_JumpIf(user_chasing >= 70,4)
	UCRT X 0 A_SetUserVar("user_chasing",user_chasing+1)
	UCRT X 0 A_Chase
	UCRT X 1 Bright A_SpawnItemEx("BluePowerLine",random(16,-16),random(16,-16),0,0,0,2,0,128,0)
	Loop
	UCRT X 0 A_SetUserVar("user_chasing",0)
	UCRT X 0 A_Chase
	UCRT X 0 A_CustomMissile("LegendaryDRuneFlameSpawner",-20,0,random(0,-360),2,random(0,360))
	UCRT XXXX 1 Bright A_SpawnItemEx("BluePowerLine",random(16,-16),random(16,-16),0,0,0,2,0,128,0)
	UCRT X 0 A_Chase
	UCRT X 0 A_CustomMissile("LegendaryDRuneFlameSpawner",-20,0,random(0,-360),2,random(0,360))
	UCRT XXXX 1 Bright A_SpawnItemEx("BluePowerLine",random(16,-16),random(16,-16),0,0,0,2,0,128,0)
	UCRT X 0 A_Chase
	UCRT X 0 A_CustomMissile("LegendaryDRuneFlameSpawner",-20,0,random(0,-360),2,random(0,360))
	UCRT XXXX 1 Bright A_SpawnItemEx("BluePowerLine",random(16,-16),random(16,-16),0,0,0,2,0,128,0)
	UCRT X 0 A_Chase
	UCRT X 0 A_CustomMissile("LegendaryDRuneFlameSpawner",-20,0,random(0,-360),2,random(0,360))
	UCRT XXXX 1 Bright A_SpawnItemEx("BluePowerLine",random(16,-16),random(16,-16),0,0,0,2,0,128,0)
	Loop
  Pickup:
    NULL A 0
	NULL A 0 ACS_ExecuteAlways(3099,0,0,1,0)
    NULL A 0 A_GiveInventory("EpicCrate",1)
	Stop
  }
}

Actor EpicCrateGiver : CustomInventory
{
  +Inventory.ALWAYSPICKUP
  +Inventory.AUTOACTIVATE
  States
  {
  Pickup:
    NULL AAA 0
    NULL A 0 ACS_ExecuteAlways(3099,0,1,0,0)
	Stop
  }
}

Actor EpicCrateStrongGiver : CustomInventory
{
  +Inventory.ALWAYSPICKUP
  +Inventory.AUTOACTIVATE
  States
  {
  Pickup:
    NULL AAA 0
    NULL A 0 ACS_ExecuteAlways(3099,0,3,0,0)
	Stop
  }
}

Actor BonusCratePickup : CustomInventory
{
Inventory.PickupMessage "\cfBonus Crate"
Inventory.PickupSound "crate/pickup"
Scale 0.3
States
{
  Spawn:
    UCRT A 0 A_JumpIf(ACS_ExecuteWithResult(3705,0,0,0) == FALSE,"Nope")
	UCRT ABCDEFGHIJKLMABCDEFGHIJKLM 3 Bright
	Loop
  Nope:
    UCRT A 1
	Stop
  Pickup:
    NULL A 0
    NULL A 0 A_GiveInventory("BonusCrate",1)
	Stop
  }
}

Actor RandomWeaponGiver : CustomInventory
{
  +Inventory.ALWAYSPICKUP
  +Inventory.AUTOACTIVATE
  States
  {
  Spawn:
    TNT1 A 1
    Stop
  Pickup:
    NULL A 0 ACS_ExecuteAlways(3108,0,0,0,0)
	Stop
  }
}

Actor PlayerBoostDamage : PowerDamage { DamageFactor "Normal", 1.35 Powerup.Duration 0x7FFFFFFF }
Actor PlayerBoostProtection : PowerProtection { Powerup.Duration 0x7FFFFFFF DamageFactor "Normal", 0.6 }
Actor PlayerTemporalProtection : PowerProtection { Powerup.Color 48 48 52 0.15 Powerup.Duration -6 DamageFactor "Normal", 0.10 }

Actor LagWarning : CustomInventory
{
  +Inventory.ALWAYSPICKUP
  +Inventory.AUTOACTIVATE
  States
  {
  Spawn:
    TNT1 A 1
    Stop
  Pickup:
    NULL A 0
    NULL A 0 ACS_ExecuteAlways(9001,0,0,0,0)
	Stop
  }
}

Actor SlotMachine : CustomInventory
{
Inventory.PickupMessage "\c[W3]Slot Machine"
Inventory.Icon "ITM2M0"
Inventory.MaxAmount 1
Tag "Slot Machine"
+FLOATBOB
+INVBAR
+COUNTITEM
States
{
  Use:
	TNT1 A 0 ACS_ExecuteAlways(15859,0,0,0,0)
    Stop
  Spawn:
     TNT1 A 1
     Stop
  }
}

Actor LegendaryBFGItem : CustomInventory
{
  Inventory.MaxAmount 1
  Inventory.Icon "ITM3A0"
  Inventory.PickupMessage "Legendarv=y BFG"
  Inventory.PickupSound "misc/w_pkup"
  +INVBAR
  States
  {
  Spawn:
	GRMG X -1 Bright
	Loop
  Use:
	TNT1 A 1
	TNT1 A 1 A_GiveInventory("Legendary BFG ",1)
	TNT1 A 1 ACS_ExecuteAlways(3224,0,2,0,0)
	Stop
  }
}

ACTOR CrateParty
{
Radius 1
Height 1
+FLOORCLIP
+NOCLIP
-COUNTKILL
-SOLID
States
{
   Spawn:
	TNT1 A 0
	TNT1 A 1 A_SpawnItemEx("PresentPartyCrate",random(-10,10),random(-10,10),24,random(2,6),0,random(3,12),random(1,359),32)
    Stop
  }
}

Actor PresentPartyCrate : PresentCrate
{
States
{
  Spawn:
	UCRT A 1 Bright A_CheckFloor("Done")
	Loop
  Done:
    UCRT A 0
	UCRT A 1 A_SpawnItemEx("BonusCratePickup")
	Stop
  }
}

ACTOR EpicCrateParty : CrateParty
{
States
{
   Spawn:
	TNT1 A 0
	TNT1 A 1 A_SpawnItemEx("PresentPartyEpicCrate",random(-10,10),random(-10,10),24,random(2,6),0,random(3,12),random(1,359),32)
    Stop
  }
}

Actor PresentPartyEpicCrate : PresentCrate
{
Scale 0.3
States
{
  Spawn:
	UCRT X 1 Bright A_CheckFloor("Done")
	Loop
  Done:
    UCRT X 0
	UCRT X 1 A_SpawnItemEx("EpicCrate")
	Stop
  }
}

ACTOR DemonRuneParty : CrateParty
{
States
{
   Spawn:
	TNT1 A 0
	TNT1 A 1 A_SpawnItemEx("PresentPartyDemonRune",random(-10,10),random(-10,10),24,random(2,6),0,random(3,12),random(1,359),32)
    Stop
  }
}

Actor PresentPartyDemonRune : PresentCrate
{
Alpha 0.8
Scale 0.6
RenderStyle Add
States
{
  Spawn:
	DRUN A 1 Bright A_CheckFloor("Done")
	Loop
  Done:
    DRUN A 0
	DRUN A 1 A_SpawnItemEx("DemonRune")
	Stop
  }
}

ACTOR LegDemonRuneParty : CrateParty
{
States
{
   Spawn:
	TNT1 A 0
	TNT1 A 1 A_SpawnItemEx("PresentPartyLegDemonRune",random(-10,10),random(-10,10),24,random(2,6),0,random(3,12),random(1,359),32)
    Stop
  }
}

Actor PresentPartyLegDemonRune : PresentCrate
{
Scale 1.0
States
{
  Spawn:
	LDRN A 1 Bright A_CheckFloor("Done")
	Loop
  Done:
    LDRN A 0
	LDRN A 1 A_SpawnItemEx("LegendaryDemonRune")
	Stop
  }
}

ACTOR AbominationRuneParty : CrateParty
{
States
{
   Spawn:
	TNT1 A 0
	TNT1 A 1 A_SpawnItemEx("PresentPartyAbominationRune",random(-10,10),random(-10,10),24,random(2,6),0,random(3,12),random(1,359),32)
    Stop
  }
}

Actor PresentPartyAbominationRune : PresentCrate
{
Alpha 0.8
Scale 0.25
RenderStyle Add
States
{
  Spawn:
	DRUN B 1 Bright A_CheckFloor("Done")
	Loop
  Done:
    DRUN B 0
	DRUN B 1 A_SpawnItemEx("RuneOfTheAbomination")
	Stop
  }
}

ACTOR WeaponParty : CrateParty
{
States
{
   Spawn:
	TNT1 A 0
	TNT1 A 1 A_SpawnItemEx("PresentPartyWeapon",random(-10,10),random(-10,10),24,random(2,6),0,random(3,12),random(1,359),32)
    Stop
  }
}

Actor PresentPartyWeapon : PresentCrate
{
Scale 0.3
States
{
  Spawn:
	UCRT Z 1 Bright A_CheckFloor("Done")
	Loop
  Done:
    UCRT Z 0
	UCRT Z 1 A_SpawnItemEx("PresentWeapon")
	Stop
  }
}

ACTOR PowerupParty : CrateParty
{
States
{
   Spawn:
	TNT1 A 0
	TNT1 A 1 A_SpawnItemEx("PresentPartyPowerup",random(-10,10),random(-10,10),24,random(2,6),0,random(3,12),random(1,359),32)
    Stop
  }
}

Actor PresentPartyPowerup : PresentPartyWeapon
{
States
{
  Spawn:
	UCRT Z 1 Bright A_CheckFloor("Done")
	Loop
  Done:
    UCRT Z 0
	UCRT Z 1 A_SpawnItemEx("PresentPowerup")
	Stop
  }
}

ACTOR UtilityGunParty : CrateParty
{
Scale 1.35
States
{
   Spawn:
	TNT1 A 0
	TNT1 A 1 A_SpawnItemEx("UtilityGunPartyPack",random(-10,10),random(-10,10),24,random(2,6),0,random(3,12),random(1,359),32)
    Stop
  }
}

Actor UtilityGunPartyPack : PresentPartyWeapon
{
Scale 1.35
States
{
  Spawn:
	BKPK A 1 Bright A_CheckFloor("Done")
	Loop
  Done:
    BKPK A 0
	BKPK A 1 A_SpawnItemEx("NewUtilityPack")
	Stop
  }
}

ACTOR TeleportedStrikeBeacon : CustomInventory
{
Tag "Teleported Strike Beacon"
Inventory.MaxAmount 1
Inventory.Icon "ITM3E0"
Inventory.PickupMessage "\c[I7]Teleported Strike Beacon"
Inventory.PickupSound "ASmarker/on2"
+INVBAR
States
{
  Spawn:
	TBEC A -1
    Stop
  Use:
    TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(3100,0,0,0) == 1 ,"Nope")
    //TNT1 A 1 A_JumpIfInventory("HasSpreadRune",1,2)
	TNT1 A 1 A_SpawnItemEx("TStrikeBeacon",0,0,16,8,0,4,0,SXF_TRANSFERPOINTERS)
	Stop
	TNT1 A 1 A_SpawnItemEx("TStrikeBeacon",0,0,16,8,0,4,0)
	TNT1 A 1 A_SpawnItemEx("TStrikeBeacon",0,0,16,8,25,4,0)
 	TNT1 A 1 A_SpawnItemEx("TStrikeBeacon",0,0,16,8,-25,4,0)
	Stop
  Nope:
	TNT1 A 0 A_Print("Can't use this inventory now!")
	Fail
}
}

Actor TStrikeBeacon
{
Radius 8
Height 8
+NOBLOCKMAP
+NOTARGET
+NEVERTARGET
+MOVEWITHSECTOR
+THRUACTORS
+INVULNERABLE
+FRIENDLY
-SHOOTABLE
-SOLID
//ReactionTime 15
Mass 9999999
Monster
States
{
  Spawn:
    TBEC A 1
    TBEC A 20 Bright
	TBEC B 15 Bright A_PlaySound("ASmarker/on1",255)
	TBEC CDEF 15 Bright
	TBEC G 30 Bright
	TBEC H 1 Bright A_PlaySound("ASmarker/on2",255)
	TBEC IJKL 1 Bright
	TBEC MMMMMM 35 Bright A_CustomMissile("TStrikeBeaconMarker",0,0,random(0,359),CMF_AIMDIRECTION)
	TBEC M 1050 Bright
	TNT1 A 0
	TNT1 A 0 A_SpawnItemEx("OrangeParticleSpawner", 0, 0, 0, 0, 0, 0, 0, 128)
    TNT1 AAA 0 A_CustomMissile("Kaboom3", 0, 0, random(0,360), 2, random(0,360))
	TNT1 AAA 0 A_CustomMissile("SmokeFX2", 0, 0, random(0,360), 2, random(0,360))
    TNT1 AAAA 0 A_SpawnItemEx("Debris",0,0,0,Random(4,-4),Random(4,-4),Random(4,8),0,128)
    TNT1 A 0 A_PlaySound("weapons/rocklx")
    TNT1 A 1 A_SpawnItem("RocketEx")
    Stop
}
}

Actor DeployableShield : CustomInventory
{
Inventory.MaxAmount 6
Inventory.Icon "ITM3D0"
Inventory.PickupMessage "\c[M4]Deployable Shield"
Inventory.PickupSound "ForceBarrier/Off"
Tag "Deployable Shield"
+INVBAR
States
{
  Spawn:
    DEPS A -1
	Stop
  Use:
    TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(3100,0,0,0) == 1 ,"Nope")
    TNT1 A 1 A_JumpIfInventory("HasSpreadRune",1,2)
	TNT1 A 1 A_SpawnItemEx("ActiveShield",56,0,8,0,0,0,0,1)
	Stop
	TNT1 A 1 A_SpawnItemEx("ActiveShield",56,0,8,0,0,0,0,1)
	TNT1 A 1 A_SpawnItemEx("ActiveShield",56,25,8,0,0,0,0,1)
 	TNT1 A 1 A_SpawnItemEx("ActiveShield",56,-25,8,0,0,0,0,1)
	Stop
  Nope:
    TNT1 A 0 A_Print("Can't use this inventory now!")
    Fail
  }
}

Actor ActiveShield
{
  -SOLID
  -SHOOTABLE
  var int user_delay;
  States
  {
  Spawn:
    TNT1 A 1
	TNT1 A 0 A_PlaySound("ForceBarrier/On")
	DEPS A 35
	Goto See
  See:
    DEPS B 1
	TNT1 A 0 A_PlaySound("ForceBarrier/Loop")
	TNT1 A 0 A_SpawnItemEx("ShieldSpawner2")
    DEPS B 2
	TNT1 A 0 A_JumpIf(user_delay >= 360,2)
    TNT1 A 0 A_SetUserVar("user_delay",user_delay+1)
    Loop
  Death:
    DESP C 0 A_PlaySound("ForceBarrier/Off")
	DEPS CCC 35
	TNT1 A 0
	TNT1 A 0 A_SpawnItemEx("OrangeParticleSpawner", 0, 0, 0, 0, 0, 0, 0, 128)
    TNT1 AAA 0 A_CustomMissile("Kaboom3", 0, 0, random(0,360), 2, random(0,360))
	TNT1 AAA 0 A_CustomMissile("SmokeFX2", 0, 0, random(0,360), 2, random(0,360))
    TNT1 AAAA 0 A_SpawnItemEx("Debris",0,0,0,Random(4,-4),Random(4,-4),Random(4,8),0,128)
    TNT1 A 0 A_PlaySound("weapons/rocklx")
    TNT1 A 1 A_SpawnItem("RocketEx")
    Stop
  }
}

Actor HolographicDecoy : CustomInventory
{
Inventory.MaxAmount 4
Inventory.Icon "ITM3F0"
Inventory.PickupMessage "\c[V3]Holographic Decoy"
Inventory.PickupSound "drone/act"
Tag "Holographic Decoy"
+INVBAR
States
{
  Spawn:
    DECH A -1
	Stop
  Use:
    TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(3100,0,0,0) == 1 ,"Nope")
	TNT1 A 1 A_SpawnItemEx("ActiveDecoy",16)
	Stop
  Nope:
	 TNT1 A 0 A_Print("Can't use this inventory now!")
	 Fail
  }
}

Actor ActiveDecoy
{
-SOLID
-SHOOTABLE
var int user_delay;
States
{
  Spawn:
    DECH A 5
	DECH A 5 Bright Light("DecoyHologram")
	TNT1 A 0 A_SpawnItemEx("HoloMarine",0,0,24)
	TNT1 A 0 A_PlaySound("DecHol/use",0,16)
	Goto See
  See:
    TNT1 A 0 A_SetUserVar("user_delay",user_delay+1)
	DECH BCBCBCBC 3 Bright Light("DecoyHologram")
	TNT1 A 0 A_JumpIf(user_delay >= 20,2)
	Loop
  Death:
    DECH BCBC 3
	DECH AA 35
	TNT1 A 0
	TNT1 A 0 A_SpawnItemEx("OrangeParticleSpawner", 0, 0, 0, 0, 0, 0, 0, 128)
    TNT1 AAA 0 A_CustomMissile("Kaboom3", 0, 0, random(0,360), 2, random(0,360))
	TNT1 AAA 0 A_CustomMissile("SmokeFX2", 0, 0, random(0,360), 2, random(0,360))
    TNT1 AAAA 0 A_SpawnItemEx("Debris",0,0,0,Random(4,-4),Random(4,-4),Random(4,8),0,128)
    TNT1 A 0 A_PlaySound("weapons/rocklx")
    TNT1 A 1 A_SpawnItem("RocketEx")
	Stop
  }
}

Actor HoloMarine
{
Radius 16
Height 56
Speed 0
Health 50
Mass 999999
+FRIENDLY
+NOCLIP
+FLOAT
+NOGRAVITY
+SHOOTABLE
+INVULNERABLE
+NOBLOOD
+NOPAIN
Species "Player"
RenderStyle "Add"
Alpha 0.90
var int user_delay;
States
{
  Spawn:
	TNT1 A 0
	TNT1 A 0 A_GiveInventory("IsHoloMarine",1)
  Looping:
	TNT1 A 0 A_RadiusGive("HoloMarineMonsterEffect",684,RGF_MONSTERS,1)
	TNT1 A 0 A_RadiusGive("HoloMarinePlayerEffect",684,RGF_PLAYERS,1)
	TNT1 A 0 NoiseAlert(0,0)
    PLAY A 3 Bright Light("DecoyHologram")
	TNT1 A 0 A_RadiusGive("HoloMarineMonsterEffect",684,RGF_MONSTERS,1)
	TNT1 A 0 A_RadiusGive("HoloMarinePlayerEffect",684,RGF_PLAYERS,1)
	TNT1 A 0 NoiseAlert(0,0)
	PLAY B 3 Bright Light("DecoyHologram")
	TNT1 A 0 A_RadiusGive("HoloMarineMonsterEffect",684,RGF_MONSTERS,1)
	TNT1 A 0 A_RadiusGive("HoloMarinePlayerEffect",684,RGF_PLAYERS,1)
	TNT1 A 0 NoiseAlert(0,0)
	PLAY C 3 Bright Light("DecoyHologram")
	TNT1 A 0 A_RadiusGive("HoloMarineMonsterEffect",684,RGF_MONSTERS,1)
	TNT1 A 0 A_RadiusGive("HoloMarinePlayerEffect",684,RGF_PLAYERS,1)
	TNT1 A 0 NoiseAlert(0,0)
	PLAY D 3 Bright Light("DecoyHologram")
	TNT1 A 0 A_SetUserVar("user_delay",user_delay+1)
	TNT1 A 0 A_JumpIf(user_delay >= 40,2)
	Loop
  Death:
    PLAY ABCDABCDA 3 A_FadeOut(1.0)
    Stop
  }
}

Actor SuperHealthBonus : NewMaxHealthBonus
{
Scale 0.8
Inventory.Amount 50
Inventory.PickupMessage "Mysterious Health Bonus filled with Super Energy"
Inventory.MaxAmount 500
States
{
  Spawn:
	TNT1 AAA 0 A_SpawnItemEx("RedPowerLineSpawner", 0, 0, 0, 0, 0, 0, 0, 128)
	EHLZ A 5 Bright
	Loop
}
}

Actor SuperArmorBonus : NewMaxArmorBonus 
{
Scale 0.8
Inventory.PickupMessage "Mysterious Armor Bonus Filled with Super Energy"
Inventory.Icon "ARM3B0"
Armor.MaxSaveAmount 500
Armor.SavePercent 68
Armor.SaveAmount 50
DamageFactor "Explosion", 0.5
States
{
  Spawn:
	TNT1 AAA 0 A_SpawnItemEx("RedPowerLineSpawner", 0, 0, 0, 0, 0, 0, 0, 128)
	EHLX A 5 Bright
	Loop
}
}

ACTOR LootBoxItem : CustomInventory
{
Inventory.MaxAmount 21
Inventory.Icon "ITM3G0"
Inventory.PickupMessage "\c[O1]Loot Box"
Inventory.PickupSound "lootbox/open"
Tag "Loot Box"
Scale 0.5
+INVBAR
States
{
  Spawn:
	LTBX A -1
    Stop
  Use:
    TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(3100,0,0,0) == 1 ,"Nope")
    TNT1 A 1 A_JumpIfInventory("HasSpreadRune",1,4)
    TNT1 A 1 A_JumpIfInventory("LuckRune",1,2)
	TNT1 A 1 A_SpawnItemEx("LootBox",0,0,16,8,0,4,0)
	Stop
	TNT1 A 1 A_SpawnItemEx("LuckyLootBox",0,0,16,8,0,4,0)
	Stop
    TNT1 A 1 A_JumpIfInventory("LuckRune",1,4)
	TNT1 A 1 A_SpawnItemEx("LootBox",0,0,16,8,0,4,0)
	TNT1 A 1 A_SpawnItemEx("LootBox",0,0,16,8,-4,4,0)
 	TNT1 A 1 A_SpawnItemEx("LootBox",0,0,16,8,4,4,0)
	Stop
	TNT1 A 1 A_SpawnItemEx("LuckyLootBox",0,0,16,8,0,4,0)
	TNT1 A 1 A_SpawnItemEx("LuckyLootBox",0,0,16,8,-4,4,0)
 	TNT1 A 1 A_SpawnItemEx("LuckyLootBox",0,0,16,8,4,4,0)
	Stop
  Nope:
	TNT1 A 0 A_Print("Can't use this inventory now!")
	Fail
}
}

ACTOR LootBox
{
var int user_script;
Scale 0.75
States
{
  Spawn:
    LTBX A 10 Bright
	LTBX A 5 Bright A_PlaySound("lootbox/open")
	LTBX BCDE 5 Bright
	LTBX E 35 Bright
	TNT1 A 0 A_Jump(8,"RandomKey")
	TNT1 A 0 A_Jump(16,"Legendary")
    TNT1 A 0 A_Jump(24,"PowerupItem")
	TNT1 A 0 A_Jump(8,"Rune","UtilityPack")
	TNT1 A 0 A_Jump(100,"Armor","LootBoxItem","Powerup","BonusCrate","InventoryItem","Weapon")
	TNT1 A 0 A_Jump(88,"FullRefilePack","DCell","LootBoxItem")
	TNT1 A 0 A_Jump(3,"EpicCrate","TrueLegendary","TrueLegendary","TrueLegendary")
	TNT1 A 0 A_Jump(128,"Ammo")
	TNT1 A 0 A_Jump(128,"HealthArmorItem")
  HealthArmorBonus:
	TNT1 A 0 A_PlaySound("lootbox/sound")
	TNT1 AAAAAAAA 0 A_SpawnItemEx("LootBoxParticle",random(-12,12),random(-12,12),random(0,24),random(-4,4),random(-4,4),random(2,6),random(-20,20))
	LTBX EEEEEEEEEEEEEEEEEEEEEEEEEEEEEE 0 A_SpawnItemEx("LootHealthArmorBonusSpawner",0,0,1,random(1,8),0,random(8,15),random(0,360),0,64)
	Goto Death
  HealthArmorItem:
	TNT1 A 0 A_PlaySound("lootbox/sound")
	TNT1 AAAAAAAA 0 A_SpawnItemEx("LootBoxParticle",random(-12,12),random(-12,12),random(0,24),random(-4,4),random(-4,4),random(2,6),random(-20,20))
	LTBX EEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEE 0 A_SpawnItemEx("LootHealthArmorItemSpawner",0,0,1,random(1,8),0,random(8,15),random(0,360),0,64)
	Goto Death
  Ammo:
	TNT1 A 0 A_PlaySound("lootbox/sound")
	TNT1 AAAAAAAA 0 A_SpawnItemEx("LootBoxParticle",random(-12,12),random(-12,12),random(0,24),random(-4,4),random(-4,4),random(2,6),random(-20,20))
	LTBX EEEEEEEEEEEEEEEEEEEEEEEEEEEEEE 0 A_SpawnItemEx("LootAmmoSpawner",0,0,1,random(1,8),0,random(8,15),random(0,360),0,64)
	Goto Death
  Armor:
	TNT1 A 0 A_PlaySound("lootbox/sound")
	TNT1 AAAAAAAA 0 A_SpawnItemEx("LootBoxParticle",random(-12,12),random(-12,12),random(0,24),random(-4,4),random(-4,4),random(2,6),random(-20,20))
	LTBX E 0 A_SpawnItemEx("LootArmorSpawner",0,0,1,random(1,8),0,random(8,15),random(0,360))
	Goto Death
  LootBoxItem:
	TNT1 A 0 A_PlaySound("lootbox/sound")
	TNT1 AAAAAAAA 0 A_SpawnItemEx("LootBoxParticle",random(-12,12),random(-12,12),random(0,24),random(-4,4),random(-4,4),random(2,6),random(-20,20))
	LTBX E 0 A_SpawnItemEx("LootBoxItemSpawner",0,0,1,random(1,8),0,random(8,15),random(0,360))
	Goto Death
  Powerup:
	TNT1 A 0 A_PlaySound("lootbox/sound")
	TNT1 AAAAAAAA 0 A_SpawnItemEx("LootBoxParticle",random(-12,12),random(-12,12),random(0,24),random(-4,4),random(-4,4),random(2,6),random(-20,20))
	LTBX E 0 A_SpawnItemEx("LootPowerupSpawner",0,0,1,random(1,8),0,random(8,15),random(0,360))
	Goto Death
  BonusCrate:
	TNT1 A 0 A_PlaySound("lootbox/sound")
	TNT1 AAAAAAAA 0 A_SpawnItemEx("LootBoxParticle",random(-12,12),random(-12,12),random(0,24),random(-4,4),random(-4,4),random(2,6),random(-20,20))
	LTBX E 0 A_SpawnItemEx("BonusCrate",0,0,1,random(1,8),0,random(8,15),random(0,360))
	Goto Death
  Weapon:
	TNT1 A 0 A_PlaySound("lootbox/sound")
	TNT1 AAAAAAAA 0 A_SpawnItemEx("LootBoxParticle",random(-12,12),random(-12,12),random(0,24),random(-4,4),random(-4,4),random(2,6),random(-20,20))
	LTBX E 0 A_SpawnItemEx("LootWeaponSpawner")
	Goto Death
  PowerupItem:
	TNT1 A 0 A_PlaySound("lootbox/sound")
	TNT1 AAAAAAAA 0 A_SpawnItemEx("LootBoxParticle",random(-12,12),random(-12,12),random(0,24),random(-4,4),random(-4,4),random(2,6),random(-20,20))
	LTBX E 0 A_SpawnItemEx("LootPowerupItemSpawner",0,0,1,random(1,8),0,random(8,15),random(0,360))
	Goto Death
  DCell:
	TNT1 A 0 A_PlaySound("lootbox/sound")
	TNT1 AAAAAAAA 0 A_SpawnItemEx("LootBoxParticle",random(-12,12),random(-12,12),random(0,24),random(-4,4),random(-4,4),random(2,6),random(-20,20))
	LTBX EEEEEEEEEEEEEEE 0 A_SpawnItemEx("LootDCellSpawner",0,0,1,random(1,8),0,random(8,15),random(0,360),0,64)
	Goto Death
  FullRefilePack:
	TNT1 A 0 A_PlaySound("lootbox/sound")
	TNT1 AAAAAAAA 0 A_SpawnItemEx("LootBoxParticle",random(-12,12),random(-12,12),random(0,24),random(-4,4),random(-4,4),random(2,6),random(-20,20))
	LTBX E 0 A_SpawnItemEx("BackPackItemSpawner",0,0,1,random(1,8),0,random(8,15),random(0,360))
	Goto Death
  InventoryItem:
	TNT1 A 0 A_PlaySound("lootbox/sound")
	TNT1 AAAAAAAA 0 A_SpawnItemEx("LootBoxParticle",random(-12,12),random(-12,12),random(0,24),random(-4,4),random(-4,4),random(2,6),random(-20,20))
	LTBX E 0 A_SpawnItemEx("LootInventoryItemSpawner",0,0,1,random(1,8),0,random(8,15),random(0,360))
	Goto Death
  RandomKey:
	TNT1 A 0 A_PlaySound("lootbox/sound")
	TNT1 AAAAAAAA 0 A_SpawnItemEx("LootBoxParticle",random(-12,12),random(-12,12),random(0,24),random(-4,4),random(-4,4),random(2,6),random(-20,20))
	LTBX E 0 A_SpawnItemEx("LootRandomKeySpawner",0,0,1,random(1,8),0,random(8,15),random(0,360))
	Goto Death
  UtilityPack:
	TNT1 A 0 A_PlaySound("lootbox/sound")
	TNT1 AAAAAAAA 0 A_SpawnItemEx("LootBoxParticle",random(-12,12),random(-12,12),random(0,24),random(-4,4),random(-4,4),random(2,6),random(-20,20))
	LTBX E 0 A_SpawnItemEx("NewUtilityPack",0,0,1,random(1,8),0,random(8,15),random(0,360))
	Goto Death
  Legendary:
	LTBX E 35 Bright
	TNT1 AAAAAAAA 0 A_CustomMissile("LegendarySphereFlameSpawner",-20,0,random(0,-360),2,random(0,360)) 
	LTBX E 70 Bright A_PlaySound("legendarysphere/idle")
	TNT1 AAAAAAAA 0 A_CustomMissile("LegendarySphereFlameSpawner",-20,0,random(0,-360),2,random(0,360)) 
	LTBX E 70 Bright A_PlaySound("legendarysphere/idle")
	TNT1 A 0 A_PlaySound("legtime/pickup")
	TNT1 AAAAAAAAAAAAAAAA 0 A_SpawnItemEx("LegArmorSpark",random(-12,12),random(-12,12),random(0,24),random(-4,4),random(-4,4),random(2,6),random(-20,20))
	LTBX E 0 A_SpawnItemEx("LootLegendarySpawner",0,0,1,random(1,8),0,random(8,15),random(0,360))
	Goto Death
  TrueLegendary:
	LTBX E 35 Bright
	TNT1 AAAAAAAA 0 A_CustomMissile("TrueLegendarySphereFlameSpawner",-20,0,random(0,-360),2,random(0,360)) 
	LTBX E 70 Bright A_PlaySound("TrueLegendaryItem/Chosen")
	TNT1 AAAAAAAA 0 A_CustomMissile("TrueLegendarySphereFlameSpawner",-20,0,random(0,-360),2,random(0,360)) 
	LTBX E 70 Bright A_PlaySound("TrueLegendaryItem/Chosen")
	TNT1 A 0 A_PlaySound("TrueLegendaryItem/Drop")
	TNT1 AAAAAAAAAAAAAAAA 0 A_SpawnItemEx("TrueLegSpark",random(-12,12),random(-12,12),random(0,24),random(-4,4),random(-4,4),random(2,6),random(-20,20))
	LTBX E 0 A_SpawnItemEx("LootTrueLegendarySpawner",0,0,1,random(1,8),0,random(8,15),random(0,360))
	Goto Death
  EpicCrate:
	LTBX E 35 Bright
	TNT1 AAAAAAAA 0 A_CustomMissile("LegendaryDRuneFlameSpawner",-20,0,random(0,-360),2,random(0,360)) 
	LTBX E 70 Bright
	TNT1 AAAAAAAA 0 A_CustomMissile("LegendaryDRuneFlameSpawner",-20,0,random(0,-360),2,random(0,360)) 
	LTBX E 70 Bright
	TNT1 A 0 A_PlaySound("azazel/idle")
	TNT1 AAAAAAAAAAAAAAAA 0 A_SpawnItemEx("ArmorParticleBlue",random(-12,12),random(-12,12),random(0,24),random(-4,4),random(-4,4),random(2,6),random(-20,20))
	LTBX E 0 A_SpawnItemEx("EpicCratePickup",0,0,1,random(1,8),0,random(8,15),random(0,360))
	Goto Death
  Rune:
	LTBX E 35 Bright
	TNT1 AAAAAAAA 0 A_CustomMissile("GHellionSmokeSpawner",-20,0,random(0,-360),2,random(0,360)) 
	LTBX E 70 Bright
	TNT1 AAAAAAAA 0 A_CustomMissile("GHellionSmokeSpawner",-20,0,random(0,-360),2,random(0,360)) 
	LTBX E 70 Bright
	TNT1 A 0 A_PlaySound("HellishAvatar/See")
	TNT1 AAAAAAAAAAAAAAAA 0 A_SpawnItemEx("LootBoxParticle",random(-12,12),random(-12,12),random(0,24),random(-4,4),random(-4,4),random(2,6),random(-20,20))
	LTBX E 0 A_SpawnItemEx("LootRuneSpawner",0,0,1,random(1,8),0,random(8,15),random(0,360))
	Goto Death
  Death:
	LTBX EEE 35 Bright
  DeathLoop:
	LTBX E 2 A_FadeOut(0.1)
	Loop
}
}

ACTOR LuckyLootBox : LootBox
{
States
{
  Spawn:
    LTBX A 10 Bright
	LTBX A 5 Bright A_PlaySound("lootbox/open")
	LTBX BCDE 5 Bright
	LTBX E 35 Bright
	TNT1 A 0 A_Jump(12,"RandomKey")
	TNT1 A 0 A_Jump(32,"Legendary")
    TNT1 A 0 A_Jump(48,"PowerupItem")
	TNT1 A 0 A_Jump(16,"Rune","UtilityPack")
	TNT1 A 0 A_Jump(156,"Armor","LootBoxItem","Powerup","BonusCrate","InventoryItem","Weapon")
	TNT1 A 0 A_Jump(124,"FullRefilePack","DCell","LootBoxItem")
	TNT1 A 0 A_Jump(3,"EpicCrate","TrueLegendary","TrueLegendary","TrueLegendary")
	TNT1 A 0 A_Jump(128,"Ammo")
	TNT1 A 0 A_Jump(128,"HealthArmorItem")
	TNT1 A 0 A_Jump(256,"HealthArmorBonus")
}
}

ACTOR LootHealthArmorBonusSpawner : RandomSpawner
{
DropItem "NewArmorBonusLootingRune", 256, 3
DropItem "NewMaxArmorBonusLootingRune", 256, 2
DropItem "SuperArmorBonusLootingRune", 256, 1
DropItem "NewHealthBonusLootingRune", 256, 3
DropItem "NewMaxHealthBonusLootingRune", 256, 2
DropItem "SuperHealthBonusLootingRune", 256, 1
+NEVERRESPAWN
}

ACTOR LootHealthArmorItemSpawner : RandomSpawner
{
DropItem "HealthFlaskLootingRune", 256, 3
DropItem "StimkitLootingRune", 256, 2
DropItem "PortableMedkitLootingRune", 256, 1
DropItem "ArmorChargeLootingRune", 256, 3
DropItem "ArmorBoosterLootingRune", 256, 2
DropItem "ArmorPlateLootingRune", 256, 1
+NEVERRESPAWN
}

ACTOR LootAmmoSpawner : RandomSpawner
{
DropItem "NewShellBoxTimed", 256, 4
DropItem "BulletBoxTimed", 256, 4
DropItem "MissileBoxTimed", 256, 4
DropItem "NewCellPackTimed", 256, 4
DropItem "DemonAmmoBoxTimed", 256, 2
DropItem "MineAmmoTimed", 256, 2
DropItem "HandGrenadeAmmoTimed", 256, 2
DropItem "AmmoPackTimed", 256, 2
DropItem "EradicationCellPackTimed", 256, 1
DropItem "ModdedBackpack", 256, 1
+NEVERRESPAWN
}

ACTOR LootArmorSpawner : RandomSpawner
{
DropItem "RedArmorPickup", 256, 10
+NEVERRESPAWN
}

ACTOR LootBoxItemSpawner : RandomSpawner
{
DropItem "LootBoxInventoryItem", 256, 2
DropItem "LootBoxChalicesItem", 256, 1
DropItem "LootBoxPowerupItem", 256, 1
+NEVERRESPAWN
}

ACTOR LootPowerupSpawner : RandomSpawner
{
DropItem "ModdedBlurSphere", 256, 1
DropItem "HasteSphere", 256, 1
DropItem "ModdedMegaSphere2", 256, 1
DropItem "LifeSphere2", 256, 1
DropItem "ProtectionSphere", 256, 1
DropItem "UltraSphere2", 256, 1
DropItem "RandomSphere", 256, 1
DropItem "ModdedInvulnerabilitySphere", 256, 1
DropItem "NewDoomSphere", 256, 1
DropItem "IgnoranceSphere", 256, 1
DropItem "SpreadSphere", 256, 1
DropItem "ChaosSphere", 256, 1
DropItem "TerminatorSphere", 256, 1
DropItem "ThunderSphere", 256, 1
DropItem "TerrorSphere", 256, 1
DropItem "RevengeSphere", 256, 1
DropItem "AnnihilationSphere", 256, 1
DropItem "EpicSphere", 256, 1
DropItem "InsanitySphere", 256, 1
DropItem "WickedSphere", 256, 1
DropItem "UnbelieveabilitySphere", 256, 1
DropItem "HolySphere", 256, 1
DropItem "FateSphere", 256, 1
DropItem "LuckSphere", 256, 1
DropItem "FlightSphere", 256, 1
DropItem "RageSphere", 256, 1
DropItem "BFGSphere", 256, 1
DropItem "ArmorSphere", 256, 1
DropItem "ExplosionSphere", 256, 1
DropItem "SurvivalSphere", 256, 1
DropItem "ChemicalSphere", 256, 1
DropItem "SummonSphere", 256, 1
+NEVERRESPAWN
}

ACTOR LootPowerupItemSpawner : RandomSpawner
{
DropItem "NewSkullOfPower", 256, 5
DropItem "NewDemonicChalice", 256, 5
DropItem "ArmageddonChalice", 256, 2
DropItem "DemonRuneItem", 256, 1
+NEVERRESPAWN
}

ACTOR LootDCellSpawner : RandomSpawner
{
DropItem "DCell", 256, 2
DropItem "DCellPack", 256, 1
+NEVERRESPAWN
}

ACTOR BackPackItemSpawner : RandomSpawner
{
DropItem "FullRefilePack", 256, 1
DropItem "CombatBackpack", 256, 1
+NEVERRESPAWN
}

ACTOR LootInventoryItemSpawner : RandomSpawner
{
//DropItem "PureRage", 256, 1
DropItem "DeployableShield", 256, 1
DropItem "HolographicDecoy", 256, 1
DropItem "FlameTurret", 256, 1
DropItem "TimeBomb", 256, 1
DropItem "MissilePod", 256, 1
DropItem "EmergencyTeleporter", 256, 1
DropItem "SentryBox", 256, 1
DropItem "MedPack", 256, 1
DropItem "SoulGenerator", 256, 1
DropItem "ArmorGenerator", 256, 1
DropItem "PoisonTurret", 256, 1
DropItem "TeleportedStrikeBeacon", 256, 1
DropItem "LightDroneCompanionItem", 256, 1
DropItem "Beacon", 256, 1
DropItem "BarrelBeaconItem", 256, 1
DropItem "ReinforcementCard", 256, 1
DropItem "WeaponUpgrader", 256, 5
+NEVERRESPAWN
}

ACTOR LootRandomKeySpawner : RandomSpawner
{
DropItem "BlueSkullItem", 256, 1
DropItem "YellowSkullItem", 256, 1
DropItem "RedSkullItem", 256, 1
DropItem "BlueCardItem", 256, 1
DropItem "YellowCardItem", 256, 1
DropItem "RedCardItem", 256, 1
+NEVERRESPAWN
}

ACTOR LootLegendarySpawner : RandomSpawner
{
DropItem "LegendarySphere2", 256, 40
DropItem "LegendaryArmorPickup", 256, 40
DropItem "LegAmmoSphere", 256, 20
DropItem "LegTimeFreezeSphere", 256, 20
DropItem "LegendaryPowerShard", 256, 20
DropItem "LegendaryPowerSphere", 256, 20
DropItem "LegendaryUltraSphere2", 256, 20
DropItem "LegendaryDemonRuneItem", 256, 10
DropItem "LegendaryCrystal", 256, 10
DropItem "LegendarySalvationSphere", 256, 10
DropItem "LegendaryJudgmentSphere", 256, 10
DropItem "LegendaryRunePickup", 256, 1
+NEVERRESPAWN
}

ACTOR LootTrueLegendarySpawner : RandomSpawner
{
DropItem "TrueLegendaryCrystal", 256, 1
DropItem "TrueLegendaryUltraSphere", 256, 1
DropItem "TrueLegendaryArmorPickup", 256, 3
+NEVERRESPAWN
}

ACTOR LootRuneSpawner : RandomSpawner
{
DropItem "RegenerationRuneItemMap", 256, 6
DropItem "StrengthRuneItemMap", 256, 6
DropItem "ResistanceRuneItemMap", 256, 6
DropItem "ProsperityRuneItemMap", 256, 6
DropItem "RageRuneItemMap", 256, 6
DropItem "LootingRuneItemMap", 256, 6
DropItem "SummonerRuneItemMap", 256, 6
DropItem "AgilityRuneItemMap", 256, 4
DropItem "RevengeRuneItemMap", 256, 4
DropItem "TimeRunePickupMap", 256, 4
DropItem "AbsorptionRuneItemMap", 256, 4
DropItem "ConfusionRuneItemMap", 256, 4
DropItem "LuckRuneItemMap", 256, 4
DropItem "SpreadRuneItemMap", 256, 1
DropItem "VeterancyRuneItemMap", 256, 1
//DropItem "HighJumpRuneItemMap", 256, 4
//DropItem "HasteRuneItemMap", 256, 4
+NEVERRESPAWN
}

Actor LootBoxPowerupItem : LootBoxItem
{
Inventory.MaxAmount 3
Inventory.Icon "ITM3X0"
Inventory.PickupMessage "\c[G3]Loot Box - Powerup"
Tag "Loot Box - Powerup"
States
{
  Spawn:
	LTB4 A -1
    Stop
  Use:
    TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(3100,0,0,0) == 1 ,"Nope")
	TNT1 A 1 A_SpawnItemEx("LootBoxPowerup",0,0,16,8,0,4,0)
	Stop
}
}

Actor LootBoxPowerup : LootBox
{
States
{
  Spawn:
    LTB4 A 10 Bright
	LTB4 A 5 Bright A_PlaySound("lootbox/open")
	LTB4 B 55 Bright
	TNT1 A 0 A_PlaySound("lootbox/sound")
	TNT1 AAAA 0 A_SpawnItemEx("LootBoxParticle",random(-12,12),random(-12,12),random(0,24),random(-4,4),random(-4,4),random(2,6),random(-20,20))
	LTB4 B 35 Bright A_SpawnItemEx("LootPowerupSpawner",0,0,1,random(1,8),0,random(8,15),random(0,360))
	TNT1 A 0 A_PlaySound("lootbox/sound")
	TNT1 AAAA 0 A_SpawnItemEx("LootBoxParticle",random(-12,12),random(-12,12),random(0,24),random(-4,4),random(-4,4),random(2,6),random(-20,20))
	LTB4 B 35 Bright A_SpawnItemEx("LootPowerupSpawner",0,0,1,random(1,8),0,random(8,15),random(0,360))
	TNT1 A 0 A_PlaySound("lootbox/sound")
	TNT1 AAAA 0 A_SpawnItemEx("LootBoxParticle",random(-12,12),random(-12,12),random(0,24),random(-4,4),random(-4,4),random(2,6),random(-20,20))
	LTB4 B 35 Bright A_SpawnItemEx("LootPowerupSpawner",0,0,1,random(1,8),0,random(8,15),random(0,360))
	TNT1 A 0 A_PlaySound("lootbox/sound")
	TNT1 AAAA 0 A_SpawnItemEx("LootBoxParticle",random(-12,12),random(-12,12),random(0,24),random(-4,4),random(-4,4),random(2,6),random(-20,20))
	LTB4 B 35 Bright A_SpawnItemEx("LootPowerupSpawner",0,0,1,random(1,8),0,random(8,15),random(0,360))
	TNT1 A 0 A_PlaySound("lootbox/sound")
	TNT1 AAAA 0 A_SpawnItemEx("LootBoxParticle",random(-12,12),random(-12,12),random(0,24),random(-4,4),random(-4,4),random(2,6),random(-20,20))
	LTB4 B 35 Bright A_SpawnItemEx("LootPowerupSpawner",0,0,1,random(1,8),0,random(8,15),random(0,360))
	Goto Death
  Death:
	LTB4 BBB 35 Bright
  DeathLoop:
	LTB4 B 2 A_FadeOut(0.1)
	Loop
}
}

Actor LootBoxInventoryItem : LootBoxPowerupItem
{
Inventory.Icon "ITM3Y0"
Inventory.PickupMessage "\c[H2]Loot Box - Inventory"
Tag "Loot Box - Inventory"
States
{
  Spawn:
	LTB2 A -1
    Stop
  Use:
    TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(3100,0,0,0) == 1 ,"Nope")
	TNT1 A 1 A_SpawnItemEx("LootBoxInventory",0,0,16,8,0,4,0)
	Stop
}
}

Actor LootBoxInventory : LootBox
{
States
{
  Spawn:
    LTB2 A 10 Bright
	LTB2 A 5 Bright A_PlaySound("lootbox/open")
	LTB2 B 55 Bright
	TNT1 A 0 A_PlaySound("lootbox/sound")
	TNT1 AAAA 0 A_SpawnItemEx("LootBoxParticle",random(-12,12),random(-12,12),random(0,24),random(-4,4),random(-4,4),random(2,6),random(-20,20))
	LTB2 B 35 Bright A_SpawnItemEx("LootInventoryItemSpawner",0,0,1,random(1,8),0,random(8,15),random(0,360))
	TNT1 A 0 A_PlaySound("lootbox/sound")
	TNT1 AAAA 0 A_SpawnItemEx("LootBoxParticle",random(-12,12),random(-12,12),random(0,24),random(-4,4),random(-4,4),random(2,6),random(-20,20))
	LTB2 B 35 Bright A_SpawnItemEx("LootInventoryItemSpawner",0,0,1,random(1,8),0,random(8,15),random(0,360))
	TNT1 A 0 A_PlaySound("lootbox/sound")
	TNT1 AAAA 0 A_SpawnItemEx("LootBoxParticle",random(-12,12),random(-12,12),random(0,24),random(-4,4),random(-4,4),random(2,6),random(-20,20))
	LTB2 B 35 Bright A_SpawnItemEx("LootInventoryItemSpawner",0,0,1,random(1,8),0,random(8,15),random(0,360))
	TNT1 A 0 A_PlaySound("lootbox/sound")
	TNT1 AAAA 0 A_SpawnItemEx("LootBoxParticle",random(-12,12),random(-12,12),random(0,24),random(-4,4),random(-4,4),random(2,6),random(-20,20))
	LTB2 B 35 Bright A_SpawnItemEx("LootInventoryItemSpawner",0,0,1,random(1,8),0,random(8,15),random(0,360))
	TNT1 A 0 A_PlaySound("lootbox/sound")
	TNT1 AAAA 0 A_SpawnItemEx("LootBoxParticle",random(-12,12),random(-12,12),random(0,24),random(-4,4),random(-4,4),random(2,6),random(-20,20))
	LTB2 B 35 Bright A_SpawnItemEx("LootInventoryItemSpawner",0,0,1,random(1,8),0,random(8,15),random(0,360))
	Goto Death
  Death:
	LTB2 BBB 35 Bright
  DeathLoop:
	LTB2 B 2 A_FadeOut(0.1)
	Loop
}
}

Actor LootBoxChalicesItem : LootBoxPowerupItem
{
Inventory.Icon "ITM3Z0"
Inventory.PickupMessage "\c[Q3]Loot Box - Powerup Chalices"
Tag "Loot Box - Powerup Chalices"
States
{
  Spawn:
	LTB3 A -1
    Stop
  Use:
    TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(3100,0,0,0) == 1 ,"Nope")
	TNT1 A 1 A_SpawnItemEx("LootBoxChalices",0,0,16,8,0,4,0)
	Stop
}
}

Actor LootBoxChalices : LootBox
{
States
{
  Spawn:
    LTB3 A 10 Bright
	LTB3 A 5 Bright A_PlaySound("lootbox/open")
	LTB3 B 55 Bright
	TNT1 A 0 A_PlaySound("lootbox/sound")
	TNT1 AAAA 0 A_SpawnItemEx("LootBoxParticle",random(-12,12),random(-12,12),random(0,24),random(-4,4),random(-4,4),random(2,6),random(-20,20))
	LTB3 B 35 Bright A_SpawnItemEx("LootPowerupItemSpawner",0,0,1,random(1,8),0,random(8,15),random(0,360))
	TNT1 A 0 A_PlaySound("lootbox/sound")
	TNT1 AAAA 0 A_SpawnItemEx("LootBoxParticle",random(-12,12),random(-12,12),random(0,24),random(-4,4),random(-4,4),random(2,6),random(-20,20))
	LTB3 B 35 Bright A_SpawnItemEx("LootPowerupItemSpawner",0,0,1,random(1,8),0,random(8,15),random(0,360))
	TNT1 A 0 A_PlaySound("lootbox/sound")
	TNT1 AAAA 0 A_SpawnItemEx("LootBoxParticle",random(-12,12),random(-12,12),random(0,24),random(-4,4),random(-4,4),random(2,6),random(-20,20))
	LTB3 B 35 Bright A_SpawnItemEx("LootPowerupItemSpawner",0,0,1,random(1,8),0,random(8,15),random(0,360))
	Goto Death
  Death:
	LTB3 BBB 35 Bright
  DeathLoop:
	LTB3 B 2 A_FadeOut(0.1)
	Loop
}
}

ACTOR MisteryBoxItem : LootBoxItem
{
Inventory.MaxAmount 3
Inventory.Icon "ITM3H0"
Inventory.PickupMessage "\c[D4]Mistery Box"
Inventory.PickupSound "lootbox/open"
Tag "Mistery Box"
Scale 0.5
+INVBAR
States
{
  Spawn:
	LBX1 A -1
    Stop
  Use:
    TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(3100,0,0,0) == 1 ,"Nope")
    TNT1 A 1 A_JumpIfInventory("HasSpreadRune",1,4)
    TNT1 A 1 A_JumpIfInventory("LuckRune",1,2)
	TNT1 A 1 A_SpawnItemEx("MisteryBox",0,0,16,8,0,4,0)
	Stop
	TNT1 A 1 A_SpawnItemEx("LuckyMisteryBox",0,0,16,8,0,4,0)
	Stop
    TNT1 A 1 A_JumpIfInventory("LuckRune",1,4)
	TNT1 A 1 A_SpawnItemEx("MisteryBox",0,0,16,8,0,4,0)
	TNT1 A 1 A_SpawnItemEx("MisteryBox",0,0,16,8,-4,4,0)
 	TNT1 A 1 A_SpawnItemEx("MisteryBox",0,0,16,8,4,4,0)
	Stop
	TNT1 A 1 A_SpawnItemEx("LuckyMisteryBox",0,0,16,8,0,4,0)
	TNT1 A 1 A_SpawnItemEx("LuckyMisteryBox",0,0,16,8,-4,4,0)
 	TNT1 A 1 A_SpawnItemEx("LuckyMisteryBox",0,0,16,8,4,4,0)
	Stop
  Nope:
	TNT1 A 0 A_Print("Can't use this inventory now!")
	Fail
}
}

ACTOR MisteryBox : LootBox
{
States
{
  Spawn:
    LBX1 A 0
	LBX1 A 0 A_ChangeFlag("USESPECIAL",1)
	LBX1 A 0 A_JumpIf(user_script == 1,3)
	LBX1 A 0 Thing_SetSpecial(0,226,2997,0,0)
	LBX1 A 0 A_SetUserVar("user_script",1)
    LBX1 A 10 Bright
    TNT1 A 0
    TNT1 A 0 A_ChangeFlag("USESPECIAL",0)
	TNT1 A 0 A_PlaySound("lootbox/open")
	LBX1 ABC 7 Bright
	LBX1 C 35 Bright
	TNT1 A 0 A_PlaySound("lootbox/sound")
	LBX1 CCCCCCCCCC 1 Bright A_SpawnItemEx("LootBox",0,0,1,random(1,8),0,random(8,15),random(0,360),0,64)
	LBX1 CCC 35 Bright
  Death:
	LBX1 C 2 A_FadeOut(0.1)
	Loop
}
}

ACTOR LuckyMisteryBox : MisteryBox
{
States
{
  Spawn:
    LBX1 A 0
	LBX1 A 0 A_ChangeFlag("USESPECIAL",1)
	LBX1 A 0 A_JumpIf(user_script == 1,3)
	LBX1 A 0 Thing_SetSpecial(0,226,2997,0,0)
	LBX1 A 0 A_SetUserVar("user_script",1)
    LBX1 A 10 Bright
    TNT1 A 0
    TNT1 A 0 A_ChangeFlag("USESPECIAL",0)
	TNT1 A 0 A_PlaySound("lootbox/open")
	LBX1 ABC 7 Bright
	LBX1 C 35 Bright
	TNT1 A 0 A_PlaySound("lootbox/sound")
	LBX1 CCCCCCCCCC 1 Bright A_SpawnItemEx("LuckyLootBox",0,0,1,random(1,8),0,random(8,15),random(0,360),0,64)
	LBX1 CCC 35 Bright
    Goto Death
}
}

ACTOR LootBoxSpawner : RandomSpawner
{
DropItem "PortableMedkit", 256, 40
DropItem "ArmorPlate", 256, 40
DropItem "BulletBox", 256, 40
DropItem "NewShellBox", 256, 40
DropItem "MissileBox", 256, 40
DropItem "NewCellPack", 256, 40
DropItem "EradicationCellPack", 256, 40
DropItem "AmmoPack  ", 256, 40
DropItem "ModdedBackpack", 256, 40
DropItem "FullRefilePack", 256, 40
DropItem "LegendaryBulletBox", 256, 40
DropItem "LegendaryShellBox", 256, 40
DropItem "LDemonAmmoBox", 256, 40
DropItem "DemonAmmoBox", 256, 40
DropItem "DCellPack", 256, 40
DropItem "ModdedGreenArmorPickup", 256, 40
DropItem "NewExtraArmor", 256, 40
DropItem "ModdedSoulSphere", 256, 40
DropItem "ModdedBlueArmorPickup", 256, 10
DropItem "RedArmorPickup", 256, 10
DropItem "ModdedBlurSphere", 256, 10
DropItem "HasteSphere", 256, 10
DropItem "ModdedMegaSphere2", 256, 10
DropItem "LifeSphere2", 256, 10
DropItem "ProtectionSphere", 256, 10
DropItem "HellionRegen2", 256, 10
DropItem "UltraSphere2", 256, 10
DropItem "AmpGoggles", 256, 10
DropItem "BossLifeEssence", 256, 10
DropItem "BerserkPack", 256, 10
//DropItem "PureRage", 256, 10
DropItem "DeployableShield", 256, 10
DropItem "HolographicDecoy", 256, 10
DropItem "RandomSphere", 256, 10
DropItem "NewSkullOfPower", 256, 5
DropItem "NewDemonicChalice", 256, 5
DropItem "ArmageddonChalice", 256, 2
DropItem "ModdedInvulnerabilitySphere", 256, 5
DropItem "DemonRuneItem", 256, 5
DropItem "FlameTurret", 256, 5
DropItem "TimeBomb", 256, 5
DropItem "MissilePod", 256, 5
DropItem "EmergencyTeleporter", 256, 5
DropItem "SentryBox", 256, 5
DropItem "MedPack", 256, 20
DropItem "SoulGenerator", 256, 5
DropItem "ArmorGenerator", 256, 5
DropItem "PoisonTurret", 256, 5
DropItem "DemonRuneItem", 256, 5
DropItem "TeleportedStrikeBeacon", 256, 1
DropItem "LegAmmoSphere", 256, 5
DropItem "LegTimeFreezeSphere", 256, 5
DropItem "LegendarySphere2", 256, 5
DropItem "LegendaryArmorPickup", 256, 5
DropItem "LegendaryUltraSphere2", 256, 5
DropItem "NewDoomSphere", 256, 5
DropItem "SpreadSphere", 256, 5
DropItem "ChaosSphere", 256, 5
DropItem "IgnoranceSphere", 256, 5
DropItem "ThunderSphere", 256, 5
DropItem "TerrorSphere", 256, 5
DropItem "RevengeSphere", 256, 5
DropItem "AnnihilationSphere", 256, 5
DropItem "EpicSphere", 256, 5
DropItem "InsanitySphere", 256, 5
DropItem "WickedSphere", 256, 5
DropItem "LightDroneCompanionItem", 256, 5
DropItem "UnbelieveabilitySphere", 256, 1
DropItem "LegendaryDemonRune", 256, 1
DropItem "Beacon", 256, 1
DropItem "BarrelBeaconItem", 256, 1
DropItem "BonusCrate", 256, 1
DropItem "ReinforcementCard", 256, 1
DropItem "BlueSkullItem", 256, 1
DropItem "YellowSkullItem", 256, 1
DropItem "RedSkullItem", 256, 1
DropItem "BlueCardItem", 256, 1
DropItem "YellowCardItem", 256, 1
DropItem "RedCardItem", 256, 1
DropItem "HolySphere", 256, 1
DropItem "FateSphere", 256, 1
DropItem "LuckSphere", 256, 1
DropItem "TerminatorSphere", 256, 1
+NEVERRESPAWN
}

ACTOR WeaponCrateItem : CustomInventory
{
Inventory.MaxAmount 2
Inventory.Icon "ITM3I0"
Inventory.PickupMessage "\c[G5]Weapon Crate"
Inventory.PickupSound "crate/pain"
Tag "Weapon Crate"
+INVBAR
States
{
  Spawn:
	FLAR D -1
    Stop
  Use:
    TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(3100,0,0,0) == 1 ,"Nope")
    TNT1 A 1 A_JumpIfInventory("HasSpreadRune",1,4)
	TNT1 A 1 A_JumpIfInventory("LuckRune",1,2)
	TNT1 A 1 A_SpawnItemEx("WeaponCrateFlare",0,0,16,8,0,4,0)
	Stop
	TNT1 A 1 A_SpawnItemEx("LuckyWeaponCrateFlare",0,0,16,8,0,4,0)
	Stop
	TNT1 A 1 A_JumpIfInventory("LuckRune",1,4)
	TNT1 A 1 A_SpawnItemEx("WeaponCrateFlare",0,0,16,8,0,4,0)
	TNT1 A 1 A_SpawnItemEx("WeaponCrateFlare",0,0,16,8,-4,4,0)
 	TNT1 A 1 A_SpawnItemEx("WeaponCrateFlare",0,0,16,8,4,4,0)
	Stop
	TNT1 A 1 A_SpawnItemEx("LuckyWeaponCrateFlare",0,0,16,8,0,4,0)
	TNT1 A 1 A_SpawnItemEx("LuckyWeaponCrateFlare",0,0,16,8,-4,4,0)
 	TNT1 A 1 A_SpawnItemEx("LuckyWeaponCrateFlare",0,0,16,8,4,4,0)
	Stop
  Nope:
	TNT1 A 0 A_Print("Can't use this inventory now!")
    Fail
}
}

Actor WeaponCrateFlare
{
  Radius 22
  Height 11
  States
  {
  Spawn:
    FLAF A 0 Bright
    FLAF A 0 Bright A_PlaySound("Flare/Light")
    FLAF A 0 Bright A_PlaySoundEx("Flare/Loop", "SoundSlot7", 1, -1)
    FLAF ABABABABABABABABABABABABABABABABAB 1 Bright
	FLAF ABABABABABABABABABABABABABABABABAB 1 Bright
	TNT1 A 0 A_SpawnItemEx("TeleportFog",15,15,24,0,0,0,0,32)
	TNT1 A 0 A_SpawnItemEx("WeaponCrate",15,15,24,0,0,0,0,32)
	FLAF ABABABABABABABABABABABABABABABABAB 1 Bright
	FLAF ABABABABABABABABABABABABABABABABAB 1 Bright
	FLAF ABABABABABABABABABABABABABABABABAB 1 Bright
	FLAF ABABABABABABABABABABABABABABABABAB 1 Bright
	FLAF ABABABABABABABABABABABABABABABABAB 1 Bright
	FLAF ABABABABABABABABABABABABABABABABAB 1 Bright
	FLAF ABABABABABABABABABABABABABABABABAB 1 Bright
	FLAF ABABABABABABABABABABABABABABABABAB 1 Bright
	FLAR D 350
	FLAR DDDDDDDDDD 10 A_FadeOut(0.1)
    Stop
  }
}

Actor LuckyWeaponCrateFlare : WeaponCrateFlare
{
  States
  {
  Spawn:
    FLAF A 0 Bright
    FLAF A 0 Bright A_PlaySound("Flare/Light")
    FLAF A 0 Bright A_PlaySoundEx("Flare/Loop", "SoundSlot7", 1, -1)
    FLAF ABABABABABABABABABABABABABABABABAB 1 Bright
	FLAF ABABABABABABABABABABABABABABABABAB 1 Bright
	TNT1 A 0 A_SpawnItemEx("TeleportFog",15,15,24,0,0,0,0,32)
	TNT1 A 0 A_SpawnItemEx("LuckyWeaponCrate",15,15,24,0,0,0,0,32)
	FLAF ABABABABABABABABABABABABABABABABAB 1 Bright
	FLAF ABABABABABABABABABABABABABABABABAB 1 Bright
	FLAF ABABABABABABABABABABABABABABABABAB 1 Bright
	FLAF ABABABABABABABABABABABABABABABABAB 1 Bright
	FLAF ABABABABABABABABABABABABABABABABAB 1 Bright
	FLAF ABABABABABABABABABABABABABABABABAB 1 Bright
	FLAF ABABABABABABABABABABABABABABABABAB 1 Bright
	FLAF ABABABABABABABABABABABABABABABABAB 1 Bright
	FLAR D 350
	FLAR DDDDDDDDDD 10 A_FadeOut(0.1)
    Stop
  }
}

Actor WeaponCrate
{
Health 200
Radius 20
Height 38
Mass 90000
PainChance 256
+SHOOTABLE
+NOBLOOD
+DONTRIP
+DONTBLAST
+NORADIUSDMG
-SOLID
States
{
  Spawn:
	CRT3 A 1
	TNT1 A 0 A_JumpIfHealthLower(100,"Cracked")
	Loop
  Cracked:
	CRT3 C 1
	Loop
  Pain:
	TNT1 A 0
	TNT1 A 0 a_jumpifhealthlower(100,"CrackedPain")
	CRT3 A 1 A_SpawnItemEx("CrateSplinter",0,0,0,random(-8,8),random(-8,8),random(8,16))
	TNT1 A 0 A_PlaySound("crate/pain")
	TNT1 AAA 0 A_SpawnItemEx("CrateSplinter",0,0,0,random(-8,8),random(-8,8),random(8,16))
	Goto Spawn
  CrackedPain:
	CRT3 C 1 A_SpawnItemEx("CrateSplinter",0,0,0,random(-8,8),random(-8,8),random(8,16))
	TNT1 A 0 A_PlaySound("crate/pain")
	TNT1 AAA 0 A_SpawnItemEx("CrateSplinter",0,0,0,random(-8,8),random(-8,8),random(8,16))
	Goto Spawn
  Death:
	CRT3 B 1
	TNT1 A 0 A_PlaySound("crate/break")
	TNT1 A 0 A_SpawnItemEx("CrateDebris",0,0,0,random(-4,4),random(-4,4),random(6,10))
	TNT1 AAAAAA 0 A_SpawnItemEx("CrateSplinter",0,0,0,random(-8,8),random(-8,8),random(8,16))
	CRT3 BB 1 A_SpawnItemEx("WeaponCrateLootSpawner",0,0,0,frandom(1,3),frandom(2,4),frandom(3,6),frandom(0,360))
	CRT3 BBBBB 1 A_SpawnItemEx("WeaponCrateLootSpawner",0,0,0,frandom(1,3),frandom(2,4),frandom(3,6),frandom(0,360),0,64)
	CRT3 B 350 A_NoBlocking
	CRT3 BBBBBBBBBBB 10 A_FadeOut(0.1)
	Stop
}
}

Actor LuckyWeaponCrate : WeaponCrate
{
States
{
  Death:
	CRT3 B 1
	TNT1 A 0 A_PlaySound("crate/break")
	TNT1 A 0 A_SpawnItemEx("CrateDebris",0,0,0,random(-4,4),random(-4,4),random(6,10))
	TNT1 AAAAAA 0 A_SpawnItemEx("CrateSplinter",0,0,0,random(-8,8),random(-8,8),random(8,16))
	CRT3 BBBBBBB 1 A_SpawnItemEx("LuckyWeaponCrateLootSpawner",0,0,0,frandom(1,3),frandom(2,4),frandom(3,6),frandom(0,360))
	CRT3 B 350 A_NoBlocking
	CRT3 BBBBBBBBBBB 10 A_FadeOut(0.1)
	Stop
}
}

ACTOR WeaponCrateLootSpawner : PresentAmmo
{
States
{
  Spawn:
    TNT1 A 0
	TNT1 A 0 A_Jump(51,"WeaponUpgrader")
	TNT1 A 0 A_Jump(16,"HexaShotgun","TechErasus","QuadRocketLauncher","M79GrenadeLauncher","DemonTechMinigun","DemonTechRailgun","ExplosiveRailgun","DemonTechRepeater","Perforator","RapidShotgun","RapidRocketLauncher")
	TNT1 A 0 A_Jump(48,"Chainsaw","ExplosiveMinigun","TechVulcan","SniperRifle","DoubleGrenadeLauncher","HomingRocketLauncher","BehemothCannon","PlasmaRepeater","FreezerRifle","Railgun","DemonTechRifle","MineLauncher","PlasmaCaster","ExplosiveSSG","ErazorShotgun")
	TNT1 A 0 A_Jump(96,"QuadShotgun","PulseShotgun","Minigun","RocketLauncher","GrenadeLauncher","PlasmaRifle","LightningRifle")
	TNT1 A 1 A_Jump(256,"CombatShotgun","AssaultShotgun","DoubleShotgun","AssaultRifle","MP40")
	Stop
	WeaponUpgrader: TNT1 A 1 A_SpawnItemEx("WeaponUpgrader",0,0,0,frandom(1,3),frandom(2,4),frandom(3,6),frandom(0,360))Stop
	CombatShotgun: TNT1 A 1 A_SpawnItemEx("Combat Shotgun ",0,0,0,frandom(1,3),frandom(2,4),frandom(3,6),frandom(0,360))Stop
	AssaultShotgun: TNT1 A 1 A_SpawnItemEx("Assault Shotgun  ",0,0,0,frandom(1,3),frandom(2,4),frandom(3,6),frandom(0,360))Stop
	DoubleShotgun: TNT1 A 1 A_SpawnItemEx("Double Barrel Shotgun ",0,0,0,frandom(1,3),frandom(2,4),frandom(3,6),frandom(0,360))Stop
	AssaultRifle: TNT1 A 1 A_SpawnItemEx("Assault Rifle ",0,0,0,frandom(1,3),frandom(2,4),frandom(3,6),frandom(0,360))Stop
	MP40: TNT1 A 1 A_SpawnItemEx("MP40",0,0,0,frandom(1,3),frandom(2,4),frandom(3,6),frandom(0,360))Stop
	QuadShotgun: TNT1 A 1 A_SpawnItemEx("Quad Barrel Shotgun ",0,0,0,frandom(1,3),frandom(2,4),frandom(3,6),frandom(0,360))Stop
	PulseShotgun: TNT1 A 1 A_SpawnItemEx("PulseShotgun",0,0,0,frandom(1,3),frandom(2,4),frandom(3,6),frandom(0,360))Stop
	Minigun: TNT1 A 1 A_SpawnItemEx("Minigun  ",0,0,0,frandom(1,3),frandom(2,4),frandom(3,6),frandom(0,360))Stop
	RocketLauncher: TNT1 A 1 A_SpawnItemEx("Rocket Launcher ",0,0,0,frandom(1,3),frandom(2,4),frandom(3,6),frandom(0,360))Stop
	GrenadeLauncher: TNT1 A 1 A_SpawnItemEx("Grenade Launcher ",0,0,0,frandom(1,3),frandom(2,4),frandom(3,6),frandom(0,360))Stop
	PlasmaRifle: TNT1 A 1 A_SpawnItemEx("Plasma Rifle ",0,0,0,frandom(1,3),frandom(2,4),frandom(3,6),frandom(0,360))Stop
	LightningRifle: TNT1 A 1 A_SpawnItemEx("LightningRifle",0,0,0,frandom(1,3),frandom(2,4),frandom(3,6),frandom(0,360))Stop
	Chainsaw: TNT1 A 1 A_SpawnItemEx("Chainsaw  ",0,0,0,frandom(1,3),frandom(2,4),frandom(3,6),frandom(0,360))Stop
	ExplosiveMinigun: TNT1 A 1 A_SpawnItemEx("Explosive Minigun ",0,0,0,frandom(1,3),frandom(2,4),frandom(3,6),frandom(0,360))Stop
	TechVulcan: TNT1 A 1 A_SpawnItemEx("TechVulcan",0,0,0,frandom(1,3),frandom(2,4),frandom(3,6),frandom(0,360))Stop
	SniperRifle: TNT1 A 1 A_SpawnItemEx("SniperRifle",0,0,0,frandom(1,3),frandom(2,4),frandom(3,6),frandom(0,360))Stop
	DoubleGrenadeLauncher: TNT1 A 1 A_SpawnItemEx("DoubleGrenadeLauncher",0,0,0,frandom(1,3),frandom(2,4),frandom(3,6),frandom(0,360))Stop
	HomingRocketLauncher: TNT1 A 1 A_SpawnItemEx("HomingRocketLauncher",0,0,0,frandom(1,3),frandom(2,4),frandom(3,6),frandom(0,360))Stop
	BehemothCannon: TNT1 A 1 A_SpawnItemEx("Behemoth Cannon",0,0,0,frandom(1,3),frandom(2,4),frandom(3,6),frandom(0,360))Stop
	PlasmaRepeater: TNT1 A 1 A_SpawnItemEx("PlasmaRepeater",0,0,0,frandom(1,3),frandom(2,4),frandom(3,6),frandom(0,360))Stop
	FreezerRifle: TNT1 A 1 A_SpawnItemEx("Freezer Rifle",0,0,0,frandom(1,3),frandom(2,4),frandom(3,6),frandom(0,360))Stop
	Railgun: TNT1 A 1 A_SpawnItemEx("Railgun  ",0,0,0,frandom(1,3),frandom(2,4),frandom(3,6),frandom(0,360))Stop
	DemonTechRifle: TNT1 A 1 A_SpawnItemEx("Demon Tech Rifle  ",0,0,0,frandom(1,3),frandom(2,4),frandom(3,6),frandom(0,360))Stop
	HexaShotgun: TNT1 A 1 A_SpawnItemEx("Hexa-Shotgun ",0,0,0,frandom(1,3),frandom(2,4),frandom(3,6),frandom(0,360))Stop
	TechErasus: TNT1 A 1 A_SpawnItemEx("TechErasus",0,0,0,frandom(1,3),frandom(2,4),frandom(3,6),frandom(0,360))Stop
	QuadRocketLauncher: TNT1 A 1 A_SpawnItemEx("QuadRocketLauncher",0,0,0,frandom(1,3),frandom(2,4),frandom(3,6),frandom(0,360))Stop
	M79GrenadeLauncher: TNT1 A 1 A_SpawnItemEx("M79GrenadeLauncher",0,0,0,frandom(1,3),frandom(2,4),frandom(3,6),frandom(0,360))Stop
	DemonTechMinigun: TNT1 A 1 A_SpawnItemEx("Demon Tech Minigun",0,0,0,frandom(1,3),frandom(2,4),frandom(3,6),frandom(0,360))Stop
	DemonTechRailgun: TNT1 A 1 A_SpawnItemEx("Demon Tech Railgun",0,0,0,frandom(1,3),frandom(2,4),frandom(3,6),frandom(0,360))Stop
	MineLauncher: TNT1 A 1 A_SpawnItemEx("MineLauncher",0,0,0,frandom(1,3),frandom(2,4),frandom(3,6),frandom(0,360))Stop
	PlasmaCaster: TNT1 A 1 A_SpawnItemEx("PlasmaCaster",0,0,0,frandom(1,3),frandom(2,4),frandom(3,6),frandom(0,360))Stop
	ExplosiveSSG: TNT1 A 1 A_SpawnItemEx("ExplosiveSSG",0,0,0,frandom(1,3),frandom(2,4),frandom(3,6),frandom(0,360))Stop
	ExplosiveRailgun: TNT1 A 1 A_SpawnItemEx("ExplosiveRailgun",0,0,0,frandom(1,3),frandom(2,4),frandom(3,6),frandom(0,360))Stop
	DemonTechRepeater: TNT1 A 1 A_SpawnItemEx("Demon Tech Repeater",0,0,0,frandom(1,3),frandom(2,4),frandom(3,6),frandom(0,360))Stop
	Perforator: TNT1 A 1 A_SpawnItemEx("Perforator",0,0,0,frandom(1,3),frandom(2,4),frandom(3,6),frandom(0,360))Stop
	RapidShotgun: TNT1 A 1 A_SpawnItemEx("RapidShotgun",0,0,0,frandom(1,3),frandom(2,4),frandom(3,6),frandom(0,360))Stop
	RapidRocketLauncher: TNT1 A 1 A_SpawnItemEx("RapidRocketLauncher",0,0,0,frandom(1,3),frandom(2,4),frandom(3,6),frandom(0,360))Stop
	ErazorShotgun: TNT1 A 1 A_SpawnItemEx("ErazorShotgun",0,0,0,frandom(1,3),frandom(2,4),frandom(3,6),frandom(0,360))Stop
}
}

ACTOR LuckyWeaponCrateLootSpawner : WeaponCrateLootSpawner
{
States
{
   Spawn:
    TNT1 A 0
	TNT1 A 0 A_Jump(51,"WeaponUpgrader")
	TNT1 A 0 A_Jump(32,"HexaShotgun","TechErasus","QuadRocketLauncher","M79GrenadeLauncher","DemonTechMinigun","DemonTechRailgun","ExplosiveRailgun","DemonTechRepeater","Perforator","RapidShotgun","RapidRocketLauncher")
	TNT1 A 0 A_Jump(68,"Chainsaw","ExplosiveMinigun","TechVulcan","SniperRifle","DoubleGrenadeLauncher","HomingRocketLauncher","BehemothCannon","PlasmaRepeater","FreezerRifle","Railgun","DemonTechRifle","MineLauncher","PlasmaCaster","ExplosiveSSG","ErazorShotgun")
	TNT1 A 0 A_Jump(158,"QuadShotgun","PulseShotgun","Minigun","RocketLauncher","GrenadeLauncher","PlasmaRifle","LightningRifle")
	TNT1 A 1 A_Jump(256,"CombatShotgun","AssaultShotgun","DoubleShotgun","AssaultRifle","MP40")
	Stop
}
}

ACTOR LootWeaponSpawner : LuckyWeaponCrateLootSpawner
{
States
{
	CombatShotgun: TNT1 A 1 A_SpawnItemEx("Combat Shotgun ",0,0,1,random(1,8),0,random(8,15),random(0,360))Stop
	AssaultShotgun: TNT1 A 1 A_SpawnItemEx("Assault Shotgun  ",0,0,1,random(1,8),0,random(8,15),random(0,360))Stop
	DoubleShotgun: TNT1 A 1 A_SpawnItemEx("Double Barrel Shotgun ",0,0,1,random(1,8),0,random(8,15),random(0,360))Stop
	AssaultRifle: TNT1 A 1 A_SpawnItemEx("Assault Rifle ",0,0,1,random(1,8),0,random(8,15),random(0,360))Stop
	MP40: TNT1 A 1 A_SpawnItemEx("MP40",0,0,1,random(1,8),0,random(8,15),random(0,360))Stop
	QuadShotgun: TNT1 A 1 A_SpawnItemEx("Quad Barrel Shotgun ",0,0,1,random(1,8),0,random(8,15),random(0,360))Stop
	PulseShotgun: TNT1 A 1 A_SpawnItemEx("PulseShotgun",0,0,1,random(1,8),0,random(8,15),random(0,360))Stop
	Minigun: TNT1 A 1 A_SpawnItemEx("Minigun  ",0,0,1,random(1,8),0,random(8,15),random(0,360))Stop
	RocketLauncher: TNT1 A 1 A_SpawnItemEx("Rocket Launcher ",0,0,1,random(1,8),0,random(8,15),random(0,360))Stop
	GrenadeLauncher: TNT1 A 1 A_SpawnItemEx("Grenade Launcher ",0,0,1,random(1,8),0,random(8,15),random(0,360))Stop
	PlasmaRifle: TNT1 A 1 A_SpawnItemEx("Plasma Rifle ",0,0,1,random(1,8),0,random(8,15),random(0,360))Stop
	LightningRifle: TNT1 A 1 A_SpawnItemEx("LightningRifle",0,0,1,random(1,8),0,random(8,15),random(0,360))Stop
	Chainsaw: TNT1 A 1 A_SpawnItemEx("Chainsaw  ",0,0,1,random(1,8),0,random(8,15),random(0,360))Stop
	ExplosiveMinigun: TNT1 A 1 A_SpawnItemEx("Explosive Minigun ",0,0,1,random(1,8),0,random(8,15),random(0,360))Stop
	TechVulcan: TNT1 A 1 A_SpawnItemEx("TechVulcan",0,0,1,random(1,8),0,random(8,15),random(0,360))Stop
	SniperRifle: TNT1 A 1 A_SpawnItemEx("SniperRifle",0,0,1,random(1,8),0,random(8,15),random(0,360))Stop
	DoubleGrenadeLauncher: TNT1 A 1 A_SpawnItemEx("DoubleGrenadeLauncher",0,0,1,random(1,8),0,random(8,15),random(0,360))Stop
	HomingRocketLauncher: TNT1 A 1 A_SpawnItemEx("HomingRocketLauncher",0,0,1,random(1,8),0,random(8,15),random(0,360))Stop
	BehemothCannon: TNT1 A 1 A_SpawnItemEx("Behemoth Cannon",0,0,1,random(1,8),0,random(8,15),random(0,360))Stop
	PlasmaRepeater: TNT1 A 1 A_SpawnItemEx("PlasmaRepeater",0,0,1,random(1,8),0,random(8,15),random(0,360))Stop
	FreezerRifle: TNT1 A 1 A_SpawnItemEx("Freezer Rifle",0,0,1,random(1,8),0,random(8,15),random(0,360))Stop
	Railgun: TNT1 A 1 A_SpawnItemEx("Railgun  ",0,0,1,random(1,8),0,random(8,15),random(0,360))Stop
	DemonTechRifle: TNT1 A 1 A_SpawnItemEx("Demon Tech Rifle  ",0,0,1,random(1,8),0,random(8,15),random(0,360))Stop
	HexaShotgun: TNT1 A 1 A_SpawnItemEx("Hexa-Shotgun ",0,0,1,random(1,8),0,random(8,15),random(0,360))Stop
	TechErasus: TNT1 A 1 A_SpawnItemEx("TechErasus",0,0,1,random(1,8),0,random(8,15),random(0,360))Stop
	QuadRocketLauncher: TNT1 A 1 A_SpawnItemEx("QuadRocketLauncher",0,0,1,random(1,8),0,random(8,15),random(0,360))Stop
	M79GrenadeLauncher: TNT1 A 1 A_SpawnItemEx("M79GrenadeLauncher",0,0,1,random(1,8),0,random(8,15),random(0,360))Stop
	DemonTechMinigun: TNT1 A 1 A_SpawnItemEx("Demon Tech Minigun",0,0,1,random(1,8),0,random(8,15),random(0,360))Stop
	DemonTechRailgun: TNT1 A 1 A_SpawnItemEx("Demon Tech Railgun",0,0,1,random(1,8),0,random(8,15),random(0,360))Stop
	MineLauncher: TNT1 A 1 A_SpawnItemEx("MineLauncher",0,0,1,random(1,8),0,random(8,15),random(0,360))Stop
	PlasmaCaster: TNT1 A 1 A_SpawnItemEx("PlasmaCaster",0,0,1,random(1,8),0,random(8,15),random(0,360))Stop
	ExplosiveSSG: TNT1 A 1 A_SpawnItemEx("ExplosiveSSG",0,0,1,random(1,8),0,random(8,15),random(0,360))Stop
	ExplosiveRailgun: TNT1 A 1 A_SpawnItemEx("ExplosiveRailgun",0,0,1,random(1,8),0,random(8,15),random(0,360))Stop
	DemonTechRepeater: TNT1 A 1 A_SpawnItemEx("Demon Tech Repeater",0,0,1,random(1,8),0,random(8,15),random(0,360))Stop
	Perforator: TNT1 A 1 A_SpawnItemEx("Perforator",0,0,1,random(1,8),0,random(8,15),random(0,360))Stop
	RapidShotgun: TNT1 A 1 A_SpawnItemEx("RapidShotgun",0,0,1,random(1,8),0,random(8,15),random(0,360))Stop
	RapidRocketLauncher: TNT1 A 1 A_SpawnItemEx("RapidRocketLauncher",0,0,1,random(1,8),0,random(8,15),random(0,360))Stop
	ErazorShotgun: TNT1 A 1 A_SpawnItemEx("ErazorShotgun",0,0,0,frandom(1,3),frandom(2,4),frandom(3,6),frandom(0,360))Stop
}
}

Actor LegendaryPowerShard : CustomInventory
{//Armor Regen + Protection
  Inventory.PickupMessage "\c[l5]Legendary Power Shard"
  Tag "Legendary Power Shard"
  Inventory.PickupSound "legendarycrystal/take"
  Inventory.UseSound "legendary/defense"
  Inventory.Icon "PPOSZ0"
  Inventory.MaxAmount 1
  +INVBAR
  +COUNTITEM
  +INVENTORY.BIGPOWERUP
  +NOTIMEFREEZE
  +FLOAT
  +FLOATBOB
  Scale 0.75
  States
  {
  Use:
    TNT1 A 0
    TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(3100,0,0,0) == 1 ,"Nope")
	TNT1 A 1 A_GiveInventory("ModdedBlueArmorPickup",1)
	TNT1 A 1 A_GiveInventory("LegendaryCrystalProtect",1)
	TNT1 A 1 A_GiveInventory("LegendaryCrystalHealing",1)
    Stop
  Nope:
	TNT1 A 0 A_Print("Can't use this inventory now!")
    Fail
  Spawn:
    PPOS ABCDEFABCDEF 4 Bright A_CustomMissile("LegendaryDRuneFlameSpawner",-20,0,random(0,-360),2,random(0,360))
	PPOS ABCDEF 4 Bright A_CustomMissile("LegendaryDRuneFlameSpawner",-20,0,random(0,-360),2,random(0,360))
	Loop
  }
}

Actor LegendaryPowerSphere : CustomInventory
{//Rage + Drain + Speed + Frightener
  Inventory.PickupMessage "\c[z3]Legendary Power Sphere"
  Tag "Legendary Power Sphere"
  Inventory.PickupSound "legpowersphere/take"
  Inventory.UseSound "legpowersphere/use"
  Inventory.Icon "GARDZ0"
  Inventory.MaxAmount 1
  +INVBAR
  +COUNTITEM
  +INVENTORY.BIGPOWERUP
  +NOTIMEFREEZE
  +FLOAT
  +FLOATBOB
  States
  {
  Use:
    TNT1 A 0
    TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(3100,0,0,0) == 1 ,"Nope")
	TNT1 A 1 A_JumpIfInventory("HasHasteRune",1,2)
	TNT1 A 1 A_GiveInventory("LegendaryPowerSpeed",1)
	TNT1 A 1 A_GiveInventory("LegendaryPowerFrightener",1)
	TNT1 A 1 A_JumpIfInventory("HasRageRune",1,2)
	TNT1 A 1 A_GiveInventory("LegendaryPowerDoubleFiringSpeed",1)
	TNT1 A 1 A_JumpIfInventory("HasAbsorptionRune",1,2)
	TNT1 A 1 A_GiveInventory("LegendaryPowerDrain",1)
	TNT1 A 1 A_GiveInventory("LegendaryPowerSphereEffect",1)
    Stop
  Nope:
	TNT1 A 0 A_Print("Can't use this inventory now!")
    Fail
  Spawn:
    GARD ABCDABCDABCDABCD 6 Bright A_CustomMissile ("LegendarySphereFlameSpawner", -20, 0, random(0,-360), 2, random(0,360))
	GARD ABCDABCD 4 Bright  A_CustomMissile ("LegendarySphereFlameSpawner", -20, 0, random(0,-360), 2, random(0,360))
	Loop
  }
}

ACTOR BattleSuitItem : CustomInventory
{
  RenderStyle Add
  Scale 0.3
  +COUNTITEM
  +INVENTORY.INVBAR
  Inventory.MaxAmount 1
  Inventory.Icon "ITM3J0"
  Inventory.PickupSound "warmachine/idle"
  Inventory.PickupMessage "Battle Suit Item"
  States
  {
  Spawn:
	BTB4 A -1
    Stop
  Use:
    TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(3703,0,0,0) == 1 ,"Nope")
	TNT1 A 1 ACS_ExecuteAlways(2994,0,0,0,0)
    TNT1 A 1 A_GiveInventory("BattleSuitGiver")
	Stop
  Nope:
	TNT1 A 0 A_Print("Can't use this inventory now!")
	Fail
  }
}

ACTOR BattleSuitDeploy : CustomInventory
{
  RenderStyle Add
  Alpha 0.8
  Scale 0.6
  +FLOATBOB
  +COUNTITEM
  -FLOAT
  Inventory.PickupSound "powerups/protection"
  Inventory.PickupMessage "Demon Rune"
  States
  {
  Spawn:
     DRUN A 0 A_CustomMissile ("YellowSparkleSpawner", 0, 0, random(0,-360), 2, random(0,360))
	 DRUN AAAA 3 Bright A_SpawnItemEx("YellowPowerLineSpawner",0,0,16,0,0,0,0,128)
     Loop
  Pickup:
	 NULL A 1
	 NULL A 1 A_JumpIf(ACS_ExecuteWithResult(3703,0,0,0) == 1 ,"Nope")
	 NULL A 1 ACS_ExecuteAlways(2994,0,0,0,0)
	 NULL A 1 A_Jump(256,1,2,3,4,5)
	 Stop
     NULL A 1 A_GiveInventory("CydestoryerGiver")
	 NULL A 1 A_GiveInventory("BombElementalGiver")
	 NULL A 1 A_GiveInventory("BelphegorGiver")
	 NULL A 1 A_GiveInventory("BabyDarkDemolisherGiver")
	 NULL A 1 A_GiveInventory("DiabolistGiver")
	 Stop
  Nope:
	 DRUN E 1
	 Stop
     }
}

ACTOR LightDroneCompanionItem : CustomInventory
{
  +COUNTITEM
  +INVENTORY.INVBAR
  Inventory.MaxAmount 6
  Inventory.Icon "ITM3K0"
  Inventory.PickupMessage "\c[l2]Light Drone Companion"
  Inventory.PickupSound "drone/see"
  Tag "Light Drone Companion"
  Scale 0.5
  States
  {
  Spawn:
    DR0N X -1
    Stop
  Use:
    TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(3100,0,0,0) == 1 ,"Nope")
    TNT1 A 1 A_JumpIfInventory("HasSpreadRune",1,2)
	TNT1 A 1 A_SpawnItemEx("LightDroneCompanion",56,0,8,0,0,0,0,SXF_TRANSFERTRANSLATION)
	Stop
	TNT1 A 1 A_SpawnItemEx("LightDroneCompanion",56,0,8,0,0,0,0,SXF_TRANSFERTRANSLATION)
	TNT1 A 1 A_SpawnItemEx("LightDroneCompanion",56,-10,8,0,0,0,0,SXF_TRANSFERTRANSLATION)
 	TNT1 A 1 A_SpawnItemEx("LightDroneCompanion",56,10,8,0,0,0,0,SXF_TRANSFERTRANSLATION)
	Stop
  Nope:
	TNT1 A 0 A_Print("Can't use this inventory now!")
	Fail
  }
}

ACTOR HeavyDroneCompanionItem : CustomInventory
{
  +COUNTITEM
  +INVENTORY.INVBAR
  Inventory.MaxAmount 1
  Inventory.Icon "ITM3L0"
  Inventory.PickupMessage "Heavy Drone Companion"
  Inventory.PickupSound "drone/see"
  Scale 0.20
  States
  {
  Spawn:
    MADD A -1
    Stop
  Use:
    TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(3100,0,0,0) == 1 ,"Nope")
    TNT1 A 1 A_SpawnItemEx("HeavyDroneCompanion",56,0,8,0,0,0,0,0)
    Stop
  Nope:
	 TNT1 A 0 A_Print("Can't use this inventory now!")
	 Fail
  }
}

ACTOR DemonicizerItem : CustomInventory
{
Inventory.MaxAmount 1
Inventory.Icon "ITM3M0"
Inventory.PickupSound "soulgenerator/pickup"
Inventory.PickupMessage "\c[l2]Demonicizer"
Tag "Demonicizer"
Scale 0.25
+INVBAR
States
{
  Spawn:
	DMNC A -1
    Stop
  Use:
    TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(3100,0,0,0) == 1 ,"Nope")
    TNT1 A 1 A_JumpIfInventory("HasSpreadRune",1,2)
	TNT1 A 1 A_SpawnItemEx("Demonicizer",0,0,16,8,0,4,0)
	Stop
	TNT1 A 1 A_SpawnItemEx("Demonicizer",0,0,16,8,0,4,0)
	TNT1 A 1 A_SpawnItemEx("Demonicizer",0,0,16,8,-12,4,0)
 	TNT1 A 1 A_SpawnItemEx("Demonicizer",0,0,16,8,12,4,0)
	Stop
  Nope:
	TNT1 A 0 A_Print("Can't use this inventory now!")
	Fail
}
}

ACTOR Demonicizer
{
+USESPECIAL
Activation THINGSPEC_ThingActs
var int user_amount;
var int user_script;
var int user_ready;
var int user_limit;
States
{
  Spawn:
    DMNC A 0
	DMNC A 0 A_ChangeFlag("USESPECIAL",1)
	DMNC A 0 A_SetUserVar("user_limit",7)
	DMNC A 0 A_JumpIf(user_amount >= user_limit,"Death")
    DMNC A 0 A_SetUserVar("user_ready",0)
	DMNC A 0 A_JumpIf(user_script == 1,3)
	DMNC A 0 Thing_SetSpecial(0,226,2997,0,0)
	DMNC A 0 A_SetUserVar("user_script",1)
    DMNC AAAAAAAAAAAAA 1 Bright A_SpawnItemEx("GreenPowerLine",random(24,-24),random(24,-24),random(0,32),0,0,2,0,128,0)
    Loop
  Reloading:
    DMNC A 0 A_ChangeFlag("USESPECIAL",0)
    DMNC A 0 A_SetUserVar("user_amount",user_amount+1)
	DMNC A 0 A_SetUserVar("user_ready",1)
	DMNC B 25 Bright A_PlaySound("demon/active")
	DMNC E 4 Bright A_PlaySound("demon/melee")
	DMNC D 4 Bright
	DMNC CCCCCCCCCCC 2 Bright A_SpawnItemEx("DemonicizerDrop",0,0,0,0,0,0,0,32)
	DMNC DEF 4 Bright
	Goto Spawn
  Death:
	TNT1 A 0
	TNT1 A 0 A_ChangeFlag("USESPECIAL",0)
	DMNC A 35
	DMNC B 35 Bright A_PlaySound("demons/pain")
	TNT1 AA 0 A_SpawnItemEx("GreenGibbedGenerator",Random(10,-10),Random(10,-10),Random(20,60),0,0,0,0,128,0)
	TNT1 AAA 0 A_CustomMissile("BigGreenBloodCloud", random(10,80), 0, random(0,360), 2, random(0,360))
	DMNC BBBBB 2 Bright A_CustomMissile("Kaboom5", random(20,80), random(20,-20), random(0,360), 2, random(0,360))
	TNT1 AA 0 A_SpawnItemEx("GreenGibbedGenerator",Random(10,-10),Random(10,-10),Random(20,60),0,0,0,0,128,0)
	TNT1 AAA 0 A_CustomMissile("BigGreenBloodCloud", random(10,80), 0, random(0,360), 2, random(0,360))
	DMNC BBBBB 2 Bright A_CustomMissile("Kaboom5", random(20,80), random(20,-20), random(0,360), 2, random(0,360))
	DMNC Z 1050
    Stop
}
}

ACTOR DemonicizerDrop
{
Radius 1
Height 1
+FLOORCLIP
+NOCLIP
-COUNTKILL
-SOLID
States
{
   Spawn:
	TNT1 A 0
	TNT1 A 0 A_Jump(55,"Weapons")
   Ammunition:
   	TNT1 A 0
	TNT1 A 0 A_Jump(38,3)
	TNT1 A 0 A_Jump(24,3)
	TNT1 A 1 A_SpawnItemEx("DemonAmmo",random(-10,10),random(-10,10),24,random(1,4),0,random(2,6),random(1,359),32)
    Stop
	TNT1 A 1 A_SpawnItemEx("DemonAmmoBox",random(-10,10),random(-10,10),24,random(1,4),0,random(2,6),random(1,359),32)
    Stop
	TNT1 A 1 A_SpawnItemEx("LightDroneCompanionItem",random(-10,10),random(-10,10),24,random(1,4),0,random(2,6),random(1,359),32)
    Stop
   Weapons:
    TNT1 A 0
	TNT1 A 0 A_Jump(68,5,6,7,8)
	TNT1 A 0 A_Jump(168,2,3)
	TNT1 A 1 A_SpawnItemEx("Demon Tech Rifle  ",random(-10,10),random(-10,10),24,random(1,4),0,random(2,6),random(1,359),32)
    Stop
	TNT1 A 1 A_SpawnItemEx("Demon Tech Ballista",random(-10,10),random(-10,10),24,random(1,4),0,random(2,6),random(1,359),32)
    Stop
	TNT1 A 1 A_SpawnItemEx("Demon Tech Pistol",random(-10,10),random(-10,10),24,random(1,4),0,random(2,6),random(1,359),32)
    Stop
	TNT1 A 1 A_SpawnItemEx("Demon Tech Minigun",random(-10,10),random(-10,10),24,random(1,4),0,random(2,6),random(1,359),32)
    Stop
	TNT1 A 1 A_SpawnItemEx("Demon Tech Railgun",random(-10,10),random(-10,10),24,random(1,4),0,random(2,6),random(1,359),32)
    Stop
	TNT1 A 1 A_SpawnItemEx("Demon Tech Rocket Launcher",random(-10,10),random(-10,10),24,random(1,4),0,random(2,6),random(1,359),32)
    Stop
	TNT1 A 1 A_SpawnItemEx("Demon Tech Repeater",random(-10,10),random(-10,10),24,random(1,4),0,random(2,6),random(1,359),32)
    Stop
  }
}

ACTOR MissilePod : CustomInventory
{
Inventory.MaxAmount 6
Inventory.Icon "ITM3N0"
Inventory.PickupMessage "\c[X1]Missile Pod"
Inventory.PickupSound "MissilePad/Up"
Tag "Missile Pod"
Scale 0.8
+INVBAR
States
{
  Spawn:
	MSPD C -1
    Stop
  Use:
    TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(3100,0,0,0) == 1 ,"Nope")
    TNT1 A 1 A_JumpIfInventory("HasSpreadRune",1,2)
	TNT1 A 1 A_SpawnItemEx("MissilePodEngage",0,0,16,8,0,4,0)
	Stop
	TNT1 A 1 A_SpawnItemEx("MissilePodEngage",0,0,16,8,0,4,0)
	TNT1 A 1 A_SpawnItemEx("MissilePodEngage",0,0,16,8,-12,4,0)
 	TNT1 A 1 A_SpawnItemEx("MissilePodEngage",0,0,16,8,12,4,0)
	Stop
  Nope:
	TNT1 A 0 A_Print("Can't use this inventory now!")
	Fail
}
}

ACTOR MissilePodEngage
{
Radius 3
Height 8
Health 1000
Mass 25
Monster
-SHOOTABLE
-SOLID
+FRIENDLY
+NOBLOOD
+QUICKTORETALIATE
+INVULNERABLE
+NOTARGET
+LOOKALLAROUND
+BRIGHT
+DONTHARMSPECIES
Species "Player"
var int user_missile;
States
{
  Spawn:
	MSPD A 10
	Goto See
  See:
	MSPD A 108
  SeeLoop:
	TNT1 A 0 A_JumpIf(user_missile >= 84,"Death")
	TNT1 A 0 A_SetUserVar("user_missile",user_missile+1)
	MSPD B 2
	TNT1 A 0 A_PlaySound("MissilePod/Fire")
	TNT1 A 0 A_SpawnItemEx("MissileGlow",0,0,36,0,0,0,0)
	TNT1 A 0 A_SpawnItemEx("VerticalPodMissile",0,0,36,0,0,0,0)
	MSPD A 6 A_ClearTarget
	Loop
  Missile:
	Stop
  Death:
	TNT1 A 0
	TNT1 A 0 A_SpawnItemEx("MPodExplosion",0,0,5,0,0,0,0,32)
	TNT1 A 0 A_SpawnItemEx("MPodExplosionExtra",0,0,5,0,0,0,0,32)
	TNT1 A 0 A_SpawnItemEx("ExplosiveGlowBig",0,0,30,0,0,0,0,32)
	Stop
}
}

ACTOR VerticalPodMissile
{
Radius 3
Height 5
Speed 0
Reactiontime 8
Damage 8
PROJECTILE
+THRUACTORS
+MTHRUSPECIES
DamageType "Marine"
States
{
   Spawn:
	PSMS A 1 Bright
	TNT1 A 0 ThrustThingZ(0,46,0,0)
	TNT1 A 0 A_CountDown
	Loop
   Death:
	TNT1 A 0
	TNT1 A 0 A_CustomMissile("HomingPodMissile",-6,0,0,CMF_AIMDIRECTION)
	Stop
   }
}

ACTOR HomingPodMissile
{
Projectile
Radius 6
Height 6
Speed 48
Damage 8
+ROCKETTRAIL
+SEEKERMISSILE
+FORCERADIUSDMG
+MTHRUSPECIES
DamageType "Marine"
DeathSound "MiniRocketExpl"
Decal DoomImpScorch
States
{
  Spawn:
	TNT1 A 0
	TNT1 AAAAAA 0 A_SeekerMissile(10,20,SMF_LOOK,256|SMF_PRECISE)
	PMSL AAAA 1 Bright A_PlaySound("MiniRocketFly",0,1.0,0)
	TNT1 A 0 A_SpawnItemEx("MissileGlow", 0, 0, 0, 0, 0, 0, 0, 5)
	TNT1 A 0 A_SeekerMissile(10,20,SMF_LOOK,256|SMF_PRECISE)
	Goto Spawn+8
  Death:
	TNT1 A 0
	TNT1 A 0 A_SpawnItemEx("OrangeParticleSpawner", 0, 0, 1, 0, 0, 0, 0, 128)
	TNT1 AAAA 0 A_CustomMissile("Kaboom9", 0, 0, random(0,360), 2, random(0,360))
	TNT1 AAAA 0 A_CustomMissile("SmokeFX4", 0, 0, random(0,360), 2, random(0,360))
	TNT1 A 0 A_Explode(58,120)
	TNT1 A 0 A_SpawnItemEx("PodMissileExplosion",0,0,0,0,0,0,0,32)
	TNT1 A 0 A_SpawnItemEx("ExplosiveGlowSmall",0,0,5,0,0,0,0,32)
	Stop
}
}

ACTOR EmergencyTeleporter : CustomInventory
{
Inventory.MaxAmount 3
Inventory.Icon "ITM3O0"
Inventory.PickupMessage "\c[L5]Emergency Teleporter"
Inventory.PickupSound "MissilePod/Fire"
Tag "Emergency Teleporter"
+INVBAR
States
{
  Spawn:
	3PDA A -1
    Stop
  Use:
    TNT1 A 0 A_JumpIfInventory("Waiter",1,"Nope")
	TNT1 A 1 ACS_NamedExecuteAlways("Emergency Teleporter",0,0,0,0)
	Stop
  Nope:
	TNT1 A 0 A_Print("Can't use this inventory now!")
	Fail
}
}

ACTOR EmergencyTeleporterTemporalInvul : PowerupGiver
{
+INVENTORY.AUTOACTIVATE
+INVENTORY.ALWAYSPICKUP
Inventory.MaxAmount 0
Powerup.Duration -7
Powerup.Type "Invulnerable"
Powerup.Mode Reflective
Powerup.Color White 0.15
}

ACTOR TimeRuneItem : CustomInventory
{
Inventory.MaxAmount 1
Inventory.Icon "ITM3P0"
Inventory.PickupMessage "Time Rune Activation"
+INVBAR
States
{
  Spawn:
	3PDA A -1
    Stop
  Use:
	TNT1 A 1 ACS_NamedExecuteAlways("Time Rune Activation",0,0,0,0)
	Stop
}
}

Actor TimeRunePowerup : PowerTimeFreezer
{
    Powerup.Duration -9
    Powerup.Color InverseMap
}

Actor TimeRuneActivatedSoundEffect
{
  +NOTIMEFREEZE
  States
  {
  Spawn:
  	TNT1 A 0
	TNT1 A 1 A_PlaySound("TimeRune/Activation",CHAN_AUTO|CHAN_NOPAUSE,1.0,FALSE,ATTN_NONE)
	TNT1 A 1
	Stop
  }
}

Actor TimeRuneTickTockSoundEffect : TimeRuneActivatedSoundEffect
{
  +NOTIMEFREEZE
  States
  {
  Spawn:
  	TNT1 A 0
	TNT1 A 1 A_PlaySound("TimeRune/TickTock",CHAN_AUTO|CHAN_NOPAUSE,1.0,FALSE,ATTN_NONE)
	TNT1 A 1
	Stop
  }
}

Actor NewDemonicChalice : DemonicChalice replaces DemonicChalice
{
  Tag "Chalice Of Invulnerability"
  Inventory.PickupMessage "\c[X9]Chalice Of Invulnerability"
  Inventory.MaxAmount 2
  States
  {
  Spawn:
    IMOT ABCB 5 Bright
    Loop
  } 
}

Actor NewSkullOfPower : SkullOfPower replaces SkullOfPower
{
  Scale 0.75
  Inventory.MaxAmount 2
  Tag "Skull Of Power"
  Inventory.PickupMessage "\c[I7]Skull Of Power"
  States
  {
  Spawn:
    SKUT ABCB 5 Bright
    Loop
}
}

ACTOR ArmageddonChalice : CustomInventory
{
Scale 1.0
Inventory.Amount 1
Inventory.MaxAmount 1
Inventory.PickupSound "pickups/dchalice"
Inventory.UseSound "dchalice/use"
Inventory.PickupMessage "\c[J3]Chalice Of Armageddon"
Tag "Chalice Of Armageddon"
Inventory.Icon "DETMA0"
+INVENTORY.INVBAR
+FLOORCLIP
States
{
 Spawn:
	DETO A 1
	Loop
 Use:
	TNT1 A 0 A_GiveInventory("ArmageddonChaliceDoubleDamage", 1)
	TNT1 A 0 A_GiveInventory("ArmageddonChaliceInvulnerability", 1)
	Stop  	
} 
}

ACTOR ArmageddonChaliceDoubleDamage : PowerupGiver
{
+INVENTORY.AUTOACTIVATE
+INVENTORY.ALWAYSPICKUP
Inventory.MaxAmount 0
Powerup.Duration -15
Powerup.Type "DoubleDamage"
}
	 
ACTOR ArmageddonChaliceInvulnerability : PowerupGiver
{
+INVENTORY.AUTOACTIVATE
+INVENTORY.ALWAYSPICKUP
Inventory.MaxAmount 0
Powerup.Duration -15
Powerup.Type "Invulnerable"
Powerup.Mode Reflective
Powerup.Color GoldMap	 
}

Actor TrueLegendaryArmor : LegendaryArmor
{
Armor.SavePercent 100.0
Armor.SaveAmount 2000
DamageFactor "PDTBFG", 0.10
DamageFactor "PDTBFGTracer", 0.10
DamageFactor "Cyber10K", 0.10
DamageFactor "Legendary", 0.0
DamageFactor "Legendary1", 0.0
DamageFactor "LegendaryGuru", 0.0
DamageFactor "BFGSplash", 0.20
DamageFactor "BFGSpray", 0.20
DamageFactor "Explosion", 0.20
DamageFactor "Plasma", 0.20
DamageFactor 0.50
Scale 1.2
Inventory.Pickupmessage "\c[l5]True Legendary Armor!"
Inventory.Icon "ATLGA0"
Inventory.PickupSound "TrueLegendaryArmor/Pickup"
States
{
  Spawn:
	TNT1 A 0 A_SpawnItemEx("ArmorParticleBlue",random(-12,12),random(-12,12),random(-12,12),random(-2,2),random(-2,2),random(-2,2),random(-20,20))
	ATLG AAAAA 2 Bright A_SpawnItemEx("TrueLegSpark",random(-12,12),random(-12,12),random(2,16),frandom(-0.4,0.4),frandom(-0.4,0.4),frandom(0,2),0,0,64)
	TNT1 A 0 A_SpawnItemEx("ArmorParticleBlue",random(-12,12),random(-12,12),random(-12,12),random(-2,2),random(-2,2),random(-2,2),random(-20,20))
	ATLG BBBBB 2 Bright A_SpawnItemEx("TrueLegSpark",random(-12,12),random(-12,12),random(2,16),frandom(-0.4,0.4),frandom(-0.4,0.4),frandom(0,2),0,0,64)
	Loop
}
}

Actor TrueLegendaryArmorPickup : CustomInventory
{  
Inventory.Pickupmessage "\c[l5]True Legendary Armor!"
Inventory.PickupSound "TrueLegendaryArmor/Pickup"
+INVENTORY.UNDROPPABLE
Inventory.Amount 1
Inventory.MaxAmount 0
Scale 1.2
States
{
  Spawn:
	TNT1 A 0 A_SpawnItemEx("ArmorParticleBlue",random(-12,12),random(-12,12),random(-12,12),random(-2,2),random(-2,2),random(-2,2),random(-20,20))
	ATLG AAAAA 2 Bright A_SpawnItemEx("TrueLegSpark",random(-12,12),random(-12,12),random(2,16),frandom(-0.4,0.4),frandom(-0.4,0.4),frandom(0,2),0,0,64)
	TNT1 A 0 A_SpawnItemEx("ArmorParticleBlue",random(-12,12),random(-12,12),random(-12,12),random(-2,2),random(-2,2),random(-2,2),random(-20,20))
	ATLG BBBBB 2 Bright A_SpawnItemEx("TrueLegSpark",random(-12,12),random(-12,12),random(2,16),frandom(-0.4,0.4),frandom(-0.4,0.4),frandom(0,2),0,0,64)
	Loop
  Pickup:
  	NULL A 1
	NULL A 1 A_JumpIf(CallACS("Armor Pickup Conditions",6) == FALSE,"Nope")
    NULL A 1 A_GiveInventory("TrueLegendaryArmor")
	Stop
  Nope:
	LEGA A 1
	Stop
}
}

ACTOR TrueLegendaryUltraSphere : LegendaryUltraSphere
{
Inventory.PickupSound "TrueLegendaryUltraSphere/Pickup"
Inventory.Pickupmessage "\c[l5]True Legendary Ultra Sphere!"
ActiveSound "TrueLegendaryUltraSphere/Idle"
States
{
  Spawn:
	TNT1 A 0 A_CustomMissile("BlueSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	TNT1 A 0 A_LoopActiveSound
	TNT1 A 0 A_CustomMissile("BlueSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	TLUS ABCD 4 Bright A_CustomMissile("TrueLegendarySphereFlameSpawner",-20,0,random(0,-360),2,random(0,360)) 
	TLUS EFGH 4 Bright A_CustomMissile("BlueSparkleSpawner",0,0,random(0,-360),2,random(0,360))
	TLUS IJK 4 Bright A_CustomMissile("TrueLegendarySphereFlameSpawner",-20,0,random(0,-360),2,random(0,360)) 
	Loop
  Pickup:
	TNT1 A 0 A_GiveInventory("HasLegendarySphere",1)
	TNT1 A 0 A_GiveInventory("TrueLegendarySphereHealth",1)
	TNT1 A 0 A_GiveInventory("TrueLegendaryArmor",1)
	TNT1 A 0 A_GiveInventory("ModdedBackpack",1)
	TNT1 A 0 A_GiveInventory("BulletMag",9999)
    TNT1 A 0 A_GiveInventory("NewShell",9999)
	TNT1 A 0 A_GiveInventory("Missile",9999)
    TNT1 A 0 A_GiveInventory("NewCell",9999)
    TNT1 A 0 A_GiveInventory("EradicationCell",9999)
	TNT1 A 0 A_GiveInventory("DemonAmmo",9999)
	TNT1 A 0 A_GiveInventory("HandGrenadeAmmo",9999)
	TNT1 A 0 A_GiveInventory("MineAmmo",9999)
	TNT1 A 0 A_GiveInventory("LDemonAmmo",9999)
	TNT1 A 0 A_GiveInventory("LegendaryShell",9999)
	TNT1 A 0 A_GiveInventory("LegendaryBulletMag",9999)
	TNT1 A 0 A_GiveInventory("DCell",9999)
	TNT1 A 0 A_GiveInventory("UtilityAmmo",9999)
	TNT1 A 0 A_GiveInventory("FieldCommandAmmo",9999)
	TNT1 A 1 A_StopSound
	Stop
}
}

ACTOR TrueLegendarySphereHealth : Health
{
Inventory.Amount 2000
Inventory.MaxAmount 2000
}

Actor LegendaryArmorShard : NewMaxArmorBonus 
{
Inventory.Amount 1
Armor.MaxSaveAmount 500
Inventory.PickupMessage ""
Inventory.Icon "LEGAA0"
Armor.SavePercent 100
Armor.SaveAmount 1
DamageFactor "PDTBFG", 0.10
DamageFactor "PDTBFGTracer", 0.10
DamageFactor "Cyber10K", 0.01
DamageFactor "Legendary", 0.10
DamageFactor "Legendary1", 0.10
DamageFactor "LegendaryGuru", 0.10
DamageFactor "BFGSplash", 0.35
DamageFactor "BFGSpray", 0.35
DamageFactor "Explosion", 0.5
DamageFactor "Plasma", 0.5
DamageFactor 0.8
States
{
  Spawn:
	TNT1 A 1
    Stop
}
}

Actor TrueLegendaryArmorShard : NewMaxArmorBonus 
{
Inventory.Amount 1
Armor.MaxSaveAmount 2000
Inventory.PickupMessage ""
Inventory.Icon "ATLGA0"
Armor.SavePercent 100
Armor.SaveAmount 1
DamageFactor "PDTBFG", 0.10
DamageFactor "PDTBFGTracer", 0.10
DamageFactor "Cyber10K", 0.10
DamageFactor "Legendary", 0.0
DamageFactor "Legendary1", 0.0
DamageFactor "LegendaryGuru", 0.0
DamageFactor "BFGSplash", 0.20
DamageFactor "BFGSpray", 0.20
DamageFactor "Explosion", 0.20
DamageFactor "Plasma", 0.20
DamageFactor 0.50
States
{
  Spawn:
	TNT1 A 1
    Stop
}
}

ACTOR LegendaryCrystal : CustomInventory
{
+COUNTITEM
+INVENTORY.INVBAR
+FLOATBOB
Inventory.MaxAmount 5
Inventory.Icon "CRYSZ0"
Tag "Legendary Crystal"
Inventory.PickupMessage "\c[z3]Legendary Crystal"
Inventory.PickupSound "LegendaryCrystal/Pickup"
Scale 1.15
States
{
  Spawn:
	CRYS ABCDEDCB 4 Bright  A_SpawnItemEx("LegArmorSpark",random(16,-16),random(16,-16),random(-16,16),0,0,random(1,3),0,128,0)
	Loop
  Use:
    TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(3100,0,0,0) == 1 ,"Nope")
	TNT1 A 1 A_JumpIfInventory("LegendaryCrystal",5,2)
	TNT1 A 1 A_Jump(256,"Cant")
	TNT1 A 1 A_JumpIfInventory("LegendaryRuneItem",1,2)
	TNT1 A 1 A_Jump(256,"Cant")
	TNT1 A 1 A_SpawnItemEx("LegendaryRuneUpgrading",56,0,4,0,0,0,0,SXF_TRANSFERTRANSLATION)
	TNT1 A 1 ACS_NamedExecuteAlways("Legendary Rune Upgrade",0,0,0,0)
	Stop
  Cant:
	TNT1 A 0 A_Print("You need 5 Legendary Crystals and a Legendary Rune!")
	Fail
  Nope:
	TNT1 A 0 A_Print("Can't use this inventory now!")
	Fail
}
}

ACTOR TrueLegendaryCrystal : LegendaryCrystal
{
Inventory.Icon "TRYSZ0"
Tag "True Legendary Crystal"
Inventory.PickupMessage "\c[l5]True Legendary Crystal"
Inventory.PickupSound "TrueLegendaryCrystal/Pickup"
States
{
  Spawn:
	TRYS ABCDEDCB 4 Bright  A_SpawnItemEx("TrueLegSpark",random(16,-16),random(16,-16),random(-16,16),0,0,random(1,3),0,128,0)
	Loop
  Use:
    TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(3100,0,0,0) == 1 ,"Nope")
	TNT1 A 1 A_JumpIfInventory("TrueLegendaryCrystal",5,2)
	TNT1 A 1 A_Jump(256,"Cant")
	TNT1 A 1 A_JumpIfInventory("HasAwakenedLegendaryRune",1,2)
	TNT1 A 1 A_Jump(256,"Cant")
	TNT1 A 1 A_SpawnItemEx("AwakenedLegendaryRuneUpgrading",56,0,4,0,0,0,0,SXF_TRANSFERTRANSLATION)
	TNT1 A 1 ACS_NamedExecuteAlways("Awakened Legendary Rune Upgrade",0,0,0,0)
	Stop
  Cant:
	TNT1 A 0 A_Print("You need 5 True Legendary Crystals and an Awakened Legendary Rune!")
	Fail
  Nope:
	TNT1 A 0 A_Print("Can't use this inventory now!")
	Fail
}
}

ACTOR LegendaryJudgmentSphere : CustomInventory
{
+FLOATBOB
+COUNTITEM
+INVBAR
+NOTIMEFREEZE
-FLOAT
Inventory.PickupSound "LegendaryJudgmentSphere/Pickup"
Inventory.UseSound "LegendaryJudgmentSphere/Use"
Inventory.PickupMessage "\c[z3]Legendary Judgment Sphere"
Inventory.Icon "LEPKZ0"
Inventory.MaxAmount 1
Tag "Legendary Judgment Sphere"
States
{
  Spawn:
	TNT1 A 0 A_CustomMissile("LegendarySphereFlameSpawner",-20,0,random(0,-360),2,random(0,360))
	LEPK ABCD 2 Bright
	Loop
  Use:
    TNT1 A 0
    TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(3100,0,0,0) == 1 ,"Nope")
	TNT1 A 1 A_GiveInventory("PowerLegendaryJudgmentSphere",1)
    Stop
  Nope:
	TNT1 A 0 A_Print("Can't use this inventory now!")
	Fail
}
}

Actor PowerLegendaryJudgmentSphere : PowerProtection
{
DamageFactor "Normal",1.00
Powerup.Duration -20
Powerup.Color Yellow 0.25
}

ACTOR LegendarySalvationSphere : LegendaryJudgmentSphere
{
Inventory.PickupSound "LegendarySalvationSphere/Pickup"
Inventory.UseSound "LegendarySalvationSphere/Use"
Inventory.PickupMessage "\c[z3]Legendary Salvation Sphere"
Inventory.Icon "LSALZ0"
Tag "Legendary Salvation Sphere"
States
{
  Spawn:
	TNT1 A 0 A_CustomMissile("LegendarySphereFlameSpawner",-20,0,random(0,-360),2,random(0,360))
    LSAL AB 3 Bright
	TNT1 A 0 A_CustomMissile("LegendarySphereFlameSpawner",-20,0,random(0,-360),2,random(0,360))
    LSAL CD 3 Bright
    Loop
  Use:
    TNT1 A 0
    TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(3100,0,0,0) == 1 ,"Nope")
	TNT1 A 1 A_GiveInventory("PowerLegendarySalvationSphere",1)
    Stop
  Nope:
	TNT1 A 0 A_Print("Can't use this inventory now!")
	Fail
}
}

Actor PowerLegendarySalvationSphere : PowerProtection
{
DamageFactor "Normal",0.75
Powerup.Duration -30
Powerup.Color Yellow 0.25
}

ACTOR InsanitySphere : CustomInventory
{
  +FLOATBOB
  +COUNTITEM
  -FLOAT
  Inventory.PickupSound "powerups/insanity"
  Inventory.PickupMessage "\c[u2]Insanity Sphere"
  States
  {
  Spawn:
     TNT1 A 0 A_CustomMissile ("RedSparkleSpawner", 0, 0, random(0,-360), 2, random(0,360))
     ISSP AAAABBBB 1 Bright A_SpawnItem("RedSphereFlare",0,38)
     TNT1 A 0 A_CustomMissile ("RedSparkleSpawner", 0, 0, random(0,-360), 2, random(0,360))
     ISSP CCCCDDDD 1 Bright A_SpawnItem("RedSphereFlare",0,38)
     Loop
  Pickup:
	 TNT1 A 0 A_GiveInventory("Chainsaw  ",1)
	 TNT1 A 0 ACS_NamedExecuteAlways("Insanity Sphere Chainsaw Selection",0,0,0,0)
	 TNT1 A 0 A_GiveInventory("PowerInsanitySphere",1)
	 Stop
}
}

Actor PowerInsanitySphere : PowerProtection
{
DamageFactor "Normal",0.50
+NORADIUSDMG
Powerup.Duration -30
Powerup.Color DarkRed 0.25
}

ACTOR FlightSphere : CustomInventory
{
  +FLOATBOB
  +COUNTITEM
  -FLOAT
  Inventory.PickupSound "powerups/flight"
  Inventory.PickupMessage "\c[v4]Flight Sphere"
  States
  {
  Spawn:
     TNT1 A 0 A_CustomMissile ("PurpleSparkleSpawner", 0, 0, random(0,-360), 2, random(0,360))
     F2SP AAAABBBB 1 Bright A_SpawnItem("PurpleSphereFlare",0,38)
     TNT1 A 0 A_CustomMissile ("PurpleSparkleSpawner", 0, 0, random(0,-360), 2, random(0,360))
     F2SP CCCCDDDD 1 Bright A_SpawnItem("PurpleSphereFlare",0,38)
     Loop
  Pickup:
     TNT1 A 0
	 TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("Flight Sphere Check",0,0,0) == 1 ,"Nope")
	 TNT1 A 0 A_GiveInventory("PowerFlightSphere",1)
	 Stop
  Nope:
	 R2SP A 1 Bright
	 Stop
}
}

Actor PowerFlightSphere : PowerFlight
{
Powerup.Duration -20
Powerup.Color Pink 0.25
}

ACTOR RageSphere : CustomInventory
{
  +FLOATBOB
  +COUNTITEM
  -FLOAT
  Inventory.PickupSound "powerups/rage"
  Inventory.PickupMessage "\c[z4]Rage Sphere"
  States
  {
  Spawn:
     TNT1 A 0 A_CustomMissile ("YellowSparkleSpawner", 0, 0, random(0,-360), 2, random(0,360))
     R2SP AAAABBBB 1 Bright A_SpawnItem("OrangeSphereFlare",0,38)
     TNT1 A 0 A_CustomMissile ("YellowSparkleSpawner", 0, 0, random(0,-360), 2, random(0,360))
     R2SP CCCCDDDD 1 Bright A_SpawnItem("OrangeSphereFlare",0,38)
     TNT1 A 0 A_CustomMissile ("YellowSparkleSpawner", 0, 0, random(0,-360), 2, random(0,360))
     R2SP CCCCBBBB 1 Bright A_SpawnItem("OrangeSphereFlare",0,38)
     Loop
  Pickup:
     TNT1 A 0
	 TNT1 A 0 A_JumpIfInventory("HasRageRune",1,"Nope")
	 TNT1 A 0 A_JumpIfInventory("LegendaryPowerDoubleFiringSpeed",1,"Nope")
	 TNT1 A 0 A_GiveInventory("PowerRageSphere",1)
	 Stop
  Nope:
	 R2SP A 1 Bright
	 Stop
}
}

Actor PowerRageSphere : PowerDoubleFiringSpeed
{
Powerup.Duration -35
Powerup.Color Orange 0.25
}

ACTOR BFGSphere : CustomInventory
{
  +FLOATBOB
  +COUNTITEM
  -FLOAT
  Inventory.PickupSound "powerups/bfg"
  Inventory.PickupMessage "\c[x9]BFG Sphere"
  States
  {
  Spawn:
     TNT1 A 0 A_CustomMissile ("GreenSparkleSpawner", 0, 0, random(0,-360), 2, random(0,360))
     RDSP AAAABBBB 1 Bright A_SpawnItem("GreenSphereFlare",0,38)
     TNT1 A 0 A_CustomMissile ("GreenSparkleSpawner", 0, 0, random(0,-360), 2, random(0,360))
     RDSP CCCCDDDD 1 Bright A_SpawnItem("GreenSphereFlare",0,38)
     TNT1 A 0 A_CustomMissile ("GreenSparkleSpawner", 0, 0, random(0,-360), 2, random(0,360))
     RDSP CCCCBBBB 1 Bright A_SpawnItem("GreenSphereFlare",0,38)
     Loop
  Pickup:
	 TNT1 A 0 A_GiveInventory("PowerBFGSphere",1)
	 Stop
}
}

Actor PowerBFGSphere : PowerProtection
{
DamageFactor "Normal",1.0
Powerup.Duration -15
Powerup.Color Green 0.5
}

ACTOR ArmorSphere : CustomInventory
{
  +FLOATBOB
  +COUNTITEM
  -FLOAT
  Inventory.PickupSound "powerups/armor"
  Inventory.PickupMessage "\c[q0]Armor Sphere"
  States
  {
  Spawn:
     TNT1 A 0 A_CustomMissile ("PurpleSparkleSpawner", 0, 0, random(0,-360), 2, random(0,360))
     AM2P AAAABBBB 1 Bright A_SpawnItem("PurpleSphereFlare",0,38)
     TNT1 A 0 A_CustomMissile ("PurpleSparkleSpawner", 0, 0, random(0,-360), 2, random(0,360))
     AM2P CCCCBBBB 1 Bright A_SpawnItem("PurpleSphereFlare",0,38)
     Loop
  Pickup:
	 TNT1 A 0 A_GiveInventory("PowerArmorSphere",1)
	 Stop
  Nope:
	 AM2P A 1 Bright
	 Stop
}
}

Actor PowerArmorSphere : PowerProtection
{
DamageFactor "Normal",1.0
Powerup.Duration -45
Powerup.Color Purple 0.15
}

ACTOR ExplosionSphere : CustomInventory
{
  +FLOATBOB
  +COUNTITEM
  -FLOAT
  Inventory.PickupSound "powerups/explosion"
  Inventory.PickupMessage "\c[j3]Explosion Sphere"
  States
  {
  Spawn:
     TNT1 A 0 A_CustomMissile ("YellowSparkleSpawner", 0, 0, random(0,-360), 2, random(0,360))
     RLSP AAAABBBB 1 Bright A_SpawnItem("OrangeSphereFlare",0,38)
     TNT1 A 0 A_CustomMissile ("YellowSparkleSpawner", 0, 0, random(0,-360), 2, random(0,360))
     RLSP CCCCDDDD 1 Bright A_SpawnItem("OrangeSphereFlare",0,38)
     Loop
  Pickup:
     TNT1 A 0
	 TNT1 A 0 A_GiveInventory("PowerExplosionSphere",1)
	 Stop
}
}

Actor PowerExplosionSphere : PowerProtection
{
DamageFactor "Normal",1.0
Powerup.Duration -13
Powerup.Color Orange 0.25
}

ACTOR SurvivalSphere : CustomInventory
{
  +FLOATBOB
  +COUNTITEM
  -FLOAT
  Inventory.PickupSound "powerups/survival"
  Inventory.PickupMessage "\c[q3]Survival Sphere"
  States
  {
  Spawn:
     TNT1 A 0 A_CustomMissile ("RedSparkleSpawner", 0, 0, random(0,-360), 2, random(0,360))
     SVSP AAAABBBB 1 Bright A_SpawnItem("RedSphereFlare",0,38)
     TNT1 A 0 A_CustomMissile ("RedSparkleSpawner", 0, 0, random(0,-360), 2, random(0,360))
     SVSP CCCCDDDD 1 Bright A_SpawnItem("RedSphereFlare",0,38)
     TNT1 A 0 A_CustomMissile ("RedSparkleSpawner", 0, 0, random(0,-360), 2, random(0,360))
     SVSP CCCCBBBB 1 Bright A_SpawnItem("RedSphereFlare",0,38)
     Loop
  Pickup:
	 TNT1 A 0 A_GiveInventory("PowerSurvivalSphereDamage",1)
	 Stop
}
}

Actor PowerSurvivalSphereDamage : PowerDamage
{
DamageFactor "Normal", 2.0
Powerup.Duration -25
Powerup.Color Red 0.5
}

ACTOR SummonSphere : CustomInventory
{
  +FLOATBOB
  +COUNTITEM
  -FLOAT
  Inventory.PickupSound "powerups/summon"
  Inventory.PickupMessage "\c[z2]Summon Sphere"
  States
  {
  Spawn:
     TNT1 A 0 A_CustomMissile ("BlueSparkleSpawner", 0, 0, random(0,-360), 2, random(0,360))
     PS0B AAABCDEF 1 Bright A_SpawnItem("BlueSphereFlare",0,38)
     TNT1 A 0 A_CustomMissile ("BlueSparkleSpawner", 0, 0, random(0,-360), 2, random(0,360))
     PS0B GHIJKKKJ 1 Bright A_SpawnItem("BlueSphereFlare",0,38)
     TNT1 A 0 A_CustomMissile ("BlueSparkleSpawner", 0, 0, random(0,-360), 2, random(0,360))
     PS0B IHGFEDCB 1 Bright A_SpawnItem("BlueSphereFlare",0,38)
     Loop
  Pickup:
     TNT1 A 0
	 TNT1 A 0 A_JumpIfInventory("PowerSummonSphere",1,"Nope")
	 TNT1 A 0 A_GiveInventory("PowerSummonSphere",1)
	 TNT1 A 0 A_GiveInventory("SummonSphereMinionSpawnerItem",1)
	 Stop
  Nope:
	 PS0B A 1
	 Stop
}
}

Actor PowerSummonSphere : PowerProtection
{
DamageFactor "Normal",1.0
Powerup.Duration -30
Powerup.Color Blue 0.25
}

ACTOR ChemicalSphere : CustomInventory
{
  +FLOATBOB
  +COUNTITEM
  -FLOAT
  Inventory.PickupSound "powerups/chemical"
  Inventory.PickupMessage "\c[u1]Chemical Sphere"
  States
  {
  Spawn:
     TNT1 A 0 A_CustomMissile ("GreenSparkleSpawner", 0, 0, random(0,-360), 2, random(0,360))
     CHMP AAAABBBB 1 Bright A_SpawnItem("GreenSphereFlare",0,38)
     TNT1 A 0 A_CustomMissile ("GreenSparkleSpawner", 0, 0, random(0,-360), 2, random(0,360))
     CHMP CCCCDDDD 1 Bright A_SpawnItem("GreenSphereFlare",0,38)
     TNT1 A 0 A_CustomMissile ("GreenSparkleSpawner", 0, 0, random(0,-360), 2, random(0,360))
     CHMP CCCCBBBB 1 Bright A_SpawnItem("GreenSphereFlare",0,38)
     Loop
  Pickup:
	 TNT1 A 0 A_GiveInventory("PowerChemicalSphere",1)
	 Stop
}
}

Actor PowerChemicalSphere : PowerProtection
{
DamageFactor "Normal",1.0
Powerup.Duration -30
Powerup.Color Green 0.25
}

ACTOR GoreNestItem : CustomInventory
{
+COUNTITEM
+INVENTORY.INVBAR
Inventory.MaxAmount 1
Inventory.Icon "ITM3S0"
Inventory.PickupMessage "\c[s0]Gore Nest Challenger\c-"
Inventory.PickupSound "legendarysphere/idle"
Tag "Gore Nest Challenger"
Scale 0.25
States
{
  Spawn:
    GORN A -1
    Stop
  Use:
    TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(3100,0,0,0) == 1 ,"Nope")
    TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("Gore Nest Check Wave",0,0,0) == FALSE ,"Wave")
    TNT1 A 0 A_CheckFloor(2)
    TNT1 A 0 A_Jump(256,"Floor")
    TNT1 A 0 A_JumpIfInventory("GoreNestConfirm",1,2)
    TNT1 A 0 A_Jump(256,"Confirm")
    TNT1 A 1 A_SpawnItemEx("GoreNestSpawner",322,0,8,0,0,0,0,0)
    Stop
  Nope:
	TNT1 A 0 A_Print("Can't use this inventory now!")
	Fail
  Floor:
	TNT1 A 0 A_Print("You must be on the floor!")
	Fail
  Wave:
	TNT1 A 0 A_Print("You must be in an ongoing wave for that!")
	Fail
  Confirm:
	TNT1 A 0 ACS_NamedExecuteAlways("Gore Nest Confirm",0,0,0,0)
	TNT1 A 0 A_Print("Are you sure that you want to challenge the gore nest?!")
	Fail
}
}

Actor GoreNestConfirm : Inventory{Inventory.MaxAmount 1}

Actor GoreNestSpawner
{
Monster
Height 128
Radius 160
Mass 99999
Health 99999
+SOLID
-SHOOTABLE
+NORADIUSDMG
+NOTELEPORT
+NOTARGET
+NEVERTARGET
+CANTSEEK
+NOBLOOD
-FRIENDLY
-COUNTKILL
States
{
  Spawn:
    TNT1 A 0 
    TNT1 A 0 A_ChangeFlag(SOLID,FALSE)
	TNT1 A 0 ACS_NamedExecuteAlways("Some Recieved Something",0,0,22,0)
	TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 1 A_SpawnItemEx("RedStar",random(-160,160),random(-160,160),random(8,84),0,0,0,0,128)
	TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 1 A_SpawnItemEx("RedStar",random(-160,160),random(-160,160),random(8,84),0,0,0,0,128)
	TNT1 A 0 Radius_Quake(10,280,0,256,0)
	TNT1 A 0 A_PlaySoundEx("GoreNest/Laught","Voice",0,2)
	TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 1 A_SpawnItemEx("RedStar",random(-160,160),random(-160,160),random(8,84),0,0,0,0,128)
	TNT1 A 0 A_SpawnItemEx("HellishAvatarLightning",random(-160,160),random(-160,160))
	TNT1 AAAAAAAAAAAAAAAAA 1 A_SpawnItemEx("RedStar",random(-160,160),random(-160,160),random(8,84),0,0,0,0,128)
	TNT1 A 0 A_SpawnItemEx("RedBossExplosionEffect",random(-160,160),random(-160,160))
	TNT1 AAAAAAAAAAAAAAAAA 1 A_SpawnItemEx("RedStar",random(-160,160),random(-160,160),random(8,84),0,0,0,0,128)
	TNT1 A 0 A_SpawnItemEx("HellishAvatarLightning",random(-160,160),random(-160,160))
	TNT1 AAAAAAAAAAAAAAAAA 1 A_SpawnItemEx("RedStar",random(-160,160),random(-160,160),random(8,84),0,0,0,0,128)
	TNT1 A 0 A_SpawnItemEx("RedBossExplosionEffect",random(-160,160),random(-160,160))
	TNT1 AAAAAAAAAAAAAAAAA 1 A_SpawnItemEx("RedStar",random(-160,160),random(-160,160),random(8,84),0,0,0,0,128)
	TNT1 A 0 A_SpawnItemEx("RedBossExplosionEffect",random(-160,160),random(-160,160))
	TNT1 AAAAAAAAAAAAAAAAA 1 A_SpawnItemEx("RedStar",random(-160,160),random(-160,160),random(8,84),0,0,0,0,128)
	TNT1 A 0 A_SpawnItemEx("HellishAvatarLightning",random(-160,160),random(-160,160))
	TNT1 AAAAAAAAAAAAAAAAA 1 A_SpawnItemEx("RedStar",random(-160,160),random(-160,160),random(8,84),0,0,0,0,128)
	TNT1 A 0 A_SpawnItemEx("HellishAvatarLightning",random(-160,160),random(-160,160))
	TNT1 A 0 A_SpawnItemEx("RedBossExplosionEffect",random(-160,160),random(-160,160))
	TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 1 A_SpawnItemEx("RedStar",random(-160,160),random(-160,160),random(8,84),0,0,0,0,128)
	TNT1 AAAAAAAAAAAAAAAAA 1 A_SpawnItemEx("RedStar",random(-160,160),random(-160,160),random(8,84),0,0,0,0,128)
	TNT1 A 0 A_SpawnItemEx("HellishAvatarLightning",random(-160,160),random(-160,160))
	TNT1 A 0 A_SpawnItemEx("RedBossExplosionEffect",random(-160,160),random(-160,160))
	TNT1 AAAAAAAAAAAAAAAAA 1 A_SpawnItemEx("RedStar",random(-160,160),random(-160,160),random(8,84),0,0,0,0,128)
	TNT1 AA 0 A_SpawnItemEx("HellishAvatarLightning",random(-160,160),random(-160,160))
	TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 1 A_SpawnItemEx("RedStar",random(-160,160),random(-160,160),random(8,84),0,0,0,0,128)
	TNT1 A 0 A_SpawnItemEx("HellishAvatarLightning",0,0)
	TNT1 A 0 A_SpawnItemEx("RedBossExplosionEffect")
    TNT1 A 0 A_SpawnItemEx("GoreNest",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)    
    TNT1 A 1
    Stop
}
}

Actor GoreNest
{
Monster
Radius 25
Height 84
Mass 99999
Health 99999
+SOLID
+SHOOTABLE
+NORADIUSDMG
+NOTELEPORT
+USESPECIAL
+NOTARGET
+NEVERTARGET
+CANTSEEK
DamageFactor 0.1
RadiusDamageFactor 0.1
Activation THINGSPEC_ThingActs
Scale 1.5
var int user_script;
var int user_amount;
Tag "\c[s0]Gore Nest\c-"
States
{
  Spawn:
	TNT1 A 0
	TNT1 A 0 A_JumpIf(user_script == 1,3)
	TNT1 A 0 Thing_SetSpecial(0,226,21050,0,0)
	TNT1 A 0 A_SetUserVar("user_script",1)
	TNT1 A 0 A_PlaySoundEx("legendarysphere/idle","SoundSlot7",1)
    GORN AAAAAAAAAAAAAAAAAAAABBBBBBBBBBBBBBBBBBBB 1 Bright A_SpawnItemEx("RedStar",random(-32,32),random(-32,32),random(8,84),0,0,0,0,128)
    Loop
  Activated:
	TNT1 A 0
	TNT1 A 0 A_StopSoundEx("SoundSlot7")
	TNT1 A 0 A_ChangeFlag("USESPECIAL",0)
	TNT1 A 0 A_AlertMonsters
	GORN C 35 Bright A_PlayWeaponSound("gorenest/death")
	TNT1 A 0 ACS_NamedExecuteAlways("Gore Nest Activated",0,0,0,0)
	TNT1 A 0 A_PlaySound("gibbage/xsplat")
	TNT1 AA 0 A_CustomMissile("BigRedBloodCloud",random(20,80),0,random(0,360),2,random(0,360))
	GORN CCCCCCCCC 6 Bright A_SpawnItemEx("GoreNestGibbedGenerator",0,0,0,0,0,0,0,128,0)
	TNT1 A 0 A_ChangeFlag(SOLID,FALSE)
	TNT1 A 0 A_ChangeFlag(SHOOTABLE,FALSE)
	TNT1 AA 0 A_CustomMissile("BigRedBloodCloud",random(20,80),0,random(0,360),2,random(0,360))
	GORN DEFGHIJK 3 A_SpawnItemEx("GoreNestGibbedGenerator",0,0,0,0,0,0,0,128,0)
	GORN K 35
	Wait
  Death:
	TNT1 A 0 A_ScreamAndUnblock
	TNT1 A 1
	Stop
}
}

ACTOR GoreNestMonsterCount : GoreNest
{
Radius 4
Height 4
-SOLID
-USESPECIAL
Tag "\ccNothing\c-"
States
{
  Spawn:
	TNT1 A 0
    TNT1 A 35
    Loop
  Death:
	TNT1 A 0 A_ScreamAndUnblock
	TNT1 A 1
	Stop
}
}

Actor GoreNest_Loot_Phase_1
{
States
{
  Spawn:
	TNT1 A 0
	TNT1 A 0 A_SpawnItemEx("BackPackItemSpawner",0,0,1,random(1,8),0,random(8,15),random(0,360))
	TNT1 AA 0 A_SpawnItemEx("BonusCrate",0,0,1,random(1,8),0,random(8,15),random(0,360))
	TNT1 AAA 0 A_SpawnItemEx("LootArmorSpawner",0,0,1,random(1,8),0,random(8,15),random(0,360))
	TNT1 AAA 0 A_SpawnItemEx("LootPowerupSpawner",0,0,1,random(1,8),0,random(8,15),random(0,360))
	TNT1 AAA 0 A_SpawnItemEx("LootWeaponSpawner",0,0,1,random(1,8),0,random(8,15),random(0,360))
	TNT1 AAA 0 A_SpawnItemEx("LootInventoryItemSpawner",0,0,1,random(1,8),0,random(8,15),random(0,360))
	Stop
}
}

Actor GoreNest_Loot_Phase_2
{
States
{
  Spawn:
	TNT1 A 0
	TNT1 A 0 A_SpawnItemEx("LootRuneSpawner",0,0,1,random(1,8),0,random(8,15),random(0,360))
	TNT1 A 0 A_SpawnItemEx("LootPowerupItemSpawner",0,0,1,random(1,8),0,random(8,15),random(0,360))
	TNT1 AAA 0 A_SpawnItemEx("BackPackItemSpawner",0,0,1,random(1,8),0,random(8,15),random(0,360))
	TNT1 AAAA 0 A_SpawnItemEx("BonusCrate",0,0,1,random(1,8),0,random(8,15),random(0,360))
	TNT1 AAAA 0 A_SpawnItemEx("LootArmorSpawner",0,0,1,random(1,8),0,random(8,15),random(0,360))
	TNT1 AAAAA 0 A_SpawnItemEx("LootPowerupSpawner",0,0,1,random(1,8),0,random(8,15),random(0,360))
	TNT1 AAAAAA 0 A_SpawnItemEx("LootWeaponSpawner",0,0,1,random(1,8),0,random(8,15),random(0,360))
	TNT1 AAAAAAAA 0 A_SpawnItemEx("LootInventoryItemSpawner",0,0,1,random(1,8),0,random(8,15),random(0,360))
	Stop
}
}

Actor GoreNest_Loot_Phase_3
{
States
{
  Spawn:
	TNT1 A 0
	TNT1 A 0 A_SpawnItemEx("NewUtilityPack",0,0,1,random(1,8),0,random(8,15),random(0,360))
	TNT1 AA 0 A_SpawnItemEx("LootRuneSpawner",0,0,1,random(1,8),0,random(8,15),random(0,360))
	TNT1 AA 0 A_SpawnItemEx("LootLegendarySpawner",0,0,1,random(1,8),0,random(8,15),random(0,360))
	TNT1 AA 0 A_SpawnItemEx("LootPowerupItemSpawner",0,0,1,random(1,8),0,random(8,15),random(0,360))
	TNT1 AAAAAA 0 A_SpawnItemEx("BackPackItemSpawner",0,0,1,random(1,8),0,random(8,15),random(0,360))
	TNT1 AAAAAAAA 0 A_SpawnItemEx("BonusCrate",0,0,1,random(1,8),0,random(8,15),random(0,360))
	TNT1 AAAA 0 A_SpawnItemEx("LootArmorSpawner",0,0,1,random(1,8),0,random(8,15),random(0,360))
	TNT1 AAAAAAA 0 A_SpawnItemEx("LootPowerupSpawner",0,0,1,random(1,8),0,random(8,15),random(0,360))
	TNT1 AAAAAAAA 0 A_SpawnItemEx("LootWeaponSpawner",0,0,1,random(1,8),0,random(8,15),random(0,360))
	TNT1 AAAAAAAAAAAA 0 A_SpawnItemEx("LootInventoryItemSpawner",0,0,1,random(1,8),0,random(8,15),random(0,360))
	Stop
}
}

Actor GoreNest_Loot_Phase_4
{
States
{
  Spawn:
	TNT1 A 0
	TNT1 A 0 A_SpawnItemEx("LootTrueLegendarySpawner",0,0,1,random(1,8),0,random(8,15),random(0,360))
	TNT1 AA 0 A_SpawnItemEx("NewUtilityPack",0,0,1,random(1,8),0,random(8,15),random(0,360))
	TNT1 AAAA 0 A_SpawnItemEx("LootRuneSpawner",0,0,1,random(1,8),0,random(8,15),random(0,360))
	TNT1 AAAA 0 A_SpawnItemEx("LootLegendarySpawner",0,0,1,random(1,8),0,random(8,15),random(0,360))
	TNT1 AAAA 0 A_SpawnItemEx("LootPowerupItemSpawner",0,0,1,random(1,8),0,random(8,15),random(0,360))
	TNT1 AAAAAAA 0 A_SpawnItemEx("BackPackItemSpawner",0,0,1,random(1,8),0,random(8,15),random(0,360))
	TNT1 AAAAAAAAAAAAA 0 A_SpawnItemEx("BonusCrate",0,0,1,random(1,8),0,random(8,15),random(0,360))
	TNT1 AAAAA 0 A_SpawnItemEx("LootArmorSpawner",0,0,1,random(1,8),0,random(8,15),random(0,360))
	TNT1 AAAAAAAAAA 0 A_SpawnItemEx("LootPowerupSpawner",0,0,1,random(1,8),0,random(8,15),random(0,360))
	TNT1 AAAAAAAAAAAAA 0 A_SpawnItemEx("LootWeaponSpawner",0,0,1,random(1,8),0,random(8,15),random(0,360))
	TNT1 AAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("LootInventoryItemSpawner",0,0,1,random(1,8),0,random(8,15),random(0,360))
	Stop
}
}

Actor GoreNest_Loot_Phase_5
{
States
{
  Spawn:
	TNT1 A 0
	TNT1 A 0 A_SpawnItemEx("EpicCratePickup",0,0,1,random(1,8),0,random(8,15),random(0,360),0,64)
	TNT1 AA 0 A_SpawnItemEx("LootTrueLegendarySpawner",0,0,1,random(1,8),0,random(8,15),random(0,360))
	TNT1 AAA 0 A_SpawnItemEx("NewUtilityPack",0,0,1,random(1,8),0,random(8,15),random(0,360))
	TNT1 AAAAAA 0 A_SpawnItemEx("LootRuneSpawner",0,0,1,random(1,8),0,random(8,15),random(0,360))
	TNT1 AAAAAAA 0 A_SpawnItemEx("LootLegendarySpawner",0,0,1,random(1,8),0,random(8,15),random(0,360))
	TNT1 AAAAAA 0 A_SpawnItemEx("LootPowerupItemSpawner",0,0,1,random(1,8),0,random(8,15),random(0,360))
	TNT1 AAAAAAAAA 0 A_SpawnItemEx("BackPackItemSpawner",0,0,1,random(1,8),0,random(8,15),random(0,360))
	TNT1 AAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("BonusCrate",0,0,1,random(1,8),0,random(8,15),random(0,360))
	TNT1 AAAAAA 0 A_SpawnItemEx("LootArmorSpawner",0,0,1,random(1,8),0,random(8,15),random(0,360))
	TNT1 AAAAAAAAAAAA 0 A_SpawnItemEx("LootPowerupSpawner",0,0,1,random(1,8),0,random(8,15),random(0,360))
	TNT1 AAAAAAAAAAAAAAAA 0 A_SpawnItemEx("LootWeaponSpawner",0,0,1,random(1,8),0,random(8,15),random(0,360))
	TNT1 AAAAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("LootInventoryItemSpawner",0,0,1,random(1,8),0,random(8,15),random(0,360))
	Stop
}
}

ACTOR RuneSummoningTotemItem : CustomInventory
{
Inventory.MaxAmount 3
Inventory.Icon "ITM3W0"
Inventory.PickupMessage "\c[V1]Rune Summoning Totem"
Tag "Rune Summoning Totem"
Inventory.PickupSound "soulgenerator/pickup"
Scale 0.44
+INVBAR
States
{
  Spawn:
	RNBC A -1
    Stop
  Use:
    TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(3100,0,0,0) == 1 ,"Nope")
    TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("Rune Summoning Totem Type",0,0,0) == 12,"Agility")
    TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("Rune Summoning Totem Type",0,0,0) == 11,"Time")
    TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("Rune Summoning Totem Type",0,0,0) == 10,"Confusion")
    TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("Rune Summoning Totem Type",0,0,0) == 9,"Looting")
    TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("Rune Summoning Totem Type",0,0,0) == 8,"Summoner")
    TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("Rune Summoning Totem Type",0,0,0) == 7,"Revenge")
    TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("Rune Summoning Totem Type",0,0,0) == 6,"Rage")
    TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("Rune Summoning Totem Type",0,0,0) == 5,"Strength")
    TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("Rune Summoning Totem Type",0,0,0) == 4,"Absorption")
    TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("Rune Summoning Totem Type",0,0,0) == 3,"Prosperity")
    TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("Rune Summoning Totem Type",0,0,0) == 2,"Resistance")
    TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("Rune Summoning Totem Type",0,0,0) == 1,"Regeneration")
  Normal:
	TNT1 A 1 A_SpawnItemEx("RuneSummoningTotem",0,0,16,8,0,4,0)
	Stop
  Regeneration:
	TNT1 A 1 A_SpawnItemEx("RuneSummoningTotemRegeneration",0,0,16,8,0,4,0)
	Stop
  Resistance:
	TNT1 A 1 A_SpawnItemEx("RuneSummoningTotemResistance",0,0,16,8,0,4,0)
	Stop
  Prosperity:
	TNT1 A 1 A_SpawnItemEx("RuneSummoningTotemProsperity",0,0,16,8,0,4,0)
	Stop
  Absorption:
	TNT1 A 1 A_SpawnItemEx("RuneSummoningTotemAbsorption",0,0,16,8,0,4,0)
	Stop
  Strength:
	TNT1 A 1 A_SpawnItemEx("RuneSummoningTotemStrength",0,0,16,8,0,4,0)
	Stop
  Rage:
	TNT1 A 1 A_SpawnItemEx("RuneSummoningTotemRage",0,0,16,8,0,4,0)
	Stop
  Revenge:
	TNT1 A 1 A_SpawnItemEx("RuneSummoningTotemRevenge",0,0,16,8,0,4,0)
	Stop
  Summoner:
	TNT1 A 1 A_SpawnItemEx("RuneSummoningTotemSummoner",0,0,16,8,0,4,0)
	Stop
  Looting:
	TNT1 A 1 A_SpawnItemEx("RuneSummoningTotemLooting",0,0,16,8,0,4,0)
	Stop
  Confusion:
	TNT1 A 1 A_SpawnItemEx("RuneSummoningTotemConfusion",0,0,16,8,0,4,0)
	Stop
  Time:
	TNT1 A 1 A_SpawnItemEx("RuneSummoningTotemTime",0,0,16,8,0,4,0)
	Stop
  Agility:
	TNT1 A 1 A_SpawnItemEx("RuneSummoningTotemAgility",0,0,16,8,0,4,0)
	Stop
  Nope:
	TNT1 A 0 A_Print("Can't use this inventory now!")
	Fail
}
}

Actor LegendaryObeliskItem : CustomInventory
{
+COUNTITEM
+INVENTORY.INVBAR
Inventory.MaxAmount 1
Inventory.Icon "ITM3S1"
Inventory.PickupMessage "\c[z3]Legendary Obelisk\c-"
Inventory.PickupSound "legendarysphere/idle"
Tag "Legendary Obelisk"
Scale 0.25
States
{
  Spawn:
    LGOB A -1
    Stop
  Use:
    TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(3100,0,0,0) == 1 ,"Nope")
    TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("Gore Nest Check Wave",0,0,0) == FALSE ,"Wave")
    TNT1 A 0 A_CheckFloor(2)
    TNT1 A 0 A_Jump(256,"Floor")
    TNT1 A 0 A_JumpIfInventory("GoreNestConfirm",1,2)
    TNT1 A 0 A_Jump(256,"Confirm")
    TNT1 A 1 A_SpawnItemEx("LegendaryObelisk",322,0,8,0,0,0,0,0)
    Stop
  Nope:
	TNT1 A 0 A_Print("Can't use this inventory now!")
	Fail
  Floor:
	TNT1 A 0 A_Print("You must be on the floor!")
	Fail
  Wave:
	TNT1 A 0 A_Print("You must be in an ongoing wave for that!")
	Fail
  Confirm:
	TNT1 A 0 ACS_NamedExecuteAlways("Gore Nest Confirm",0,0,0,0)
	TNT1 A 0 A_Print("Are you sure that you want to challenge the legendary obelisk?!")
	Fail
}
}

Actor AngelRing : CustomInventory
{
+COUNTITEM
+INVENTORY.INVBAR
+FLOATBOB
+BRIGHT
Inventory.MaxAmount 1
Inventory.Icon "ITM3S2"
Inventory.PickupMessage "\c[H2]Angel Ring\c-"
Inventory.PickupSound "AscendedCacodemon/Spawn"
Tag "Angel Ring"
Scale 0.15
States
{
  Spawn:
	AGRG AAAAAAAAAA 8 A_SpawnItemEx("LegendaryAssaultProjectileParticle",frandom(8,-8),frandom(8,-8),frandom(8,32))
	TNT1 A 0 A_SpawnItemEx("AngelRingShockwave",0,0,24)
	Loop
  Use:
    TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(3100,0,0,0) == 1 ,"Nope")
    TNT1 A 1 A_SpawnItemEx("AngelRingActivated",8,0,0,0,0,2,0,0)
    Stop
  Nope:
	TNT1 A 0 A_Print("Can't use this inventory now!")
	Fail
}
}

Actor AscendedCacodemon
{
Monster
Health 100000
Radius 30
Height 56
Mass 999999
+INVULNERABLE
+NOGRAVITY
+NOTIMEFREEZE
+FLOATBOB
+BRIGHT
+NEVERTARGET
+CANTSEEK
+FRIENDLY
-COUNTKILL
-SOLID
Species "Player"
DamageFactor "Marine", 0.0
DamageFactor "MarinePierce", 0.0
DamageFactor "MarineKaboom", 0.0
DamageFactor "Legendary", 0.0
DamageFactor "MechStep", 0.0
DamageFactor "Mine", 0.0
DamageFactor "Hell", 0.0 
Tag "\c[H2]Ascended Cacodemon\c-"
Activation THINGSPEC_ThingActs
States
{
  Spawn:
	TNT1 A 0
	TNT1 A 0 A_PlaySoundEx("AscendedCacodemon/Spawn","Body",FALSE,1)
	TNT1 A 0 A_PlaySoundEx("AscendedCacodemon/Idling","Voice",TRUE)
	TNT1 A 0 A_SpawnItemEx("LegendaryAssaultProjectileShockwave",0,0,16)
	ACCD AAAAAAAAAAAAAAAAAAAA 4 A_SpawnItemEx("LegendaryAssaultProjectileParticle",frandom(16,-16),frandom(16,-16),frandom(0,64))
	TNT1 A 0 A_SpawnItemEx("LegendaryAssaultProjectileShockwave",0,0,16)
	TNT1 A 0 A_PrintBold("\c[z3]Greetings.")
	ACCD AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 4 A_SpawnItemEx("LegendaryAssaultProjectileParticle",frandom(16,-16),frandom(16,-16),frandom(0,64))
	TNT1 A 0 A_SpawnItemEx("LegendaryAssaultProjectileShockwave",0,0,16)
	TNT1 A 0 A_PrintBold("\c[z3]I am the \c[H2]Ascended Cacodemon\c[z3].")
	ACCD AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 4 A_SpawnItemEx("LegendaryAssaultProjectileParticle",frandom(16,-16),frandom(16,-16),frandom(0,64))
	TNT1 A 0 A_SpawnItemEx("LegendaryAssaultProjectileShockwave",0,0,16)
	TNT1 A 0 A_PrintBold("\c[z3]Speak, child...")
	ACCD AAAAAAAAAAAAAAAAAA 4 A_SpawnItemEx("LegendaryAssaultProjectileParticle",frandom(16,-16),frandom(16,-16),frandom(0,64))
	TNT1 A 0 A_ChangeFlag("USESPECIAL",TRUE)
	TNT1 A 0 Thing_SetSpecial(0,226,2997,0,0)
  Fly:
	ACCD AAAAAAAAAAAAAAAAAAAA 4 A_SpawnItemEx("LegendaryAssaultProjectileParticle",frandom(16,-16),frandom(16,-16),frandom(0,64))
	TNT1 A 0 A_SpawnItemEx("LegendaryAssaultProjectileShockwave",0,0,16)
	Loop
  Reloading:
	TNT1 A 0 A_ChangeFlag("USESPECIAL",0)
	TNT1 A 0 A_SpawnItemEx("LegendaryAssaultProjectileShockwave",0,0,16)
	TNT1 A 0 A_PrintBold("\c[z3]As you wish.")
	TNT1 A 0 A_Jump(256,"PowerupRune","Legendary","Legendary")
  PowerupRune:
	ACCD AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 4 A_SpawnItemEx("LegendaryAssaultProjectileParticle",frandom(16,-16),frandom(16,-16),frandom(0,64))
	ACCD AA 50 A_SpawnItemEx("PowerupRuneItemMap",0,0,0,random(2,7),0,random(2,5),random(0,359),32)
    Goto Done
  Legendary:
	ACCD AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 4 A_SpawnItemEx("LegendaryAssaultProjectileParticle",frandom(16,-16),frandom(16,-16),frandom(0,64))
	ACCD AAA 1 A_SpawnItemEx("LegendaryRunePickupMap",0,0,0,random(2,7),0,random(2,5),random(0,359),32)
	ACCD AAAAAAAAAAAAAAA 1 A_SpawnItemEx("LegendaryCrystal",0,0,0,random(2,7),0,random(2,5),random(0,359),32)
    Goto Done
  Done:
	TNT1 A 0 A_PrintBold("\c[z3]I'll be on my way.")
	ACCD AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 4 A_SpawnItemEx("LegendaryAssaultProjectileParticle",frandom(16,-16),frandom(16,-16),frandom(0,64))
	TNT1 A 0 A_PrintBold("\c[z3]Good luck, child.")
	ACCD AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 4 A_SpawnItemEx("LegendaryAssaultProjectileParticle",frandom(16,-16),frandom(16,-16),frandom(0,64))
  Death:
    TNT1 A 0 A_SpawnItemEx("TeleportFog")
    TNT1 A 0 A_StopSoundEx("Voice")
	TNT1 A 0 A_PlaySoundEx("AscendedCacodemon/Leave","Body",FALSE,1)
	TNT1 A 0 A_SpawnItemEx("LegendaryAssaultProjectileShockwave",0,0,16)
    TNT1 A 0 A_ScreamAndUnblock
	TNT1 A 1
	Stop
}
}